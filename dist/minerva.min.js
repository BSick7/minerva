function radToDegrees(t){return 180*t/Math.PI}var minerva;!function(t){t.version="0.7.2"}(minerva||(minerva={}));var minerva;!function(t){!function(t){t[t.Left=0]="Left",t[t.Center=1]="Center",t[t.Right=2]="Right",t[t.Stretch=3]="Stretch"}(t.HorizontalAlignment||(t.HorizontalAlignment={}));t.HorizontalAlignment;!function(t){t[t.Top=0]="Top",t[t.Center=1]="Center",t[t.Bottom=2]="Bottom",t[t.Stretch=3]="Stretch"}(t.VerticalAlignment||(t.VerticalAlignment={}));t.VerticalAlignment}(minerva||(minerva={}));var minerva;!function(t){var e=function(){function t(t,e,n,r){this.topLeft=null==t?0:t,this.topRight=null==e?0:e,this.bottomRight=null==n?0:n,this.bottomLeft=null==r?0:r}return t.isEmpty=function(t){return 0===t.topLeft&&0===t.topRight&&0===t.bottomRight&&0===t.bottomLeft},t.isEqual=function(t,e){return t.topLeft===e.topLeft&&t.topRight===e.topRight&&t.bottomRight===e.bottomRight&&t.bottomLeft===e.bottomLeft},t.clear=function(t){t.topLeft=t.topRight=t.bottomRight=t.bottomLeft=0},t.copyTo=function(t,e){e.topLeft=t.topLeft,e.topRight=t.topRight,e.bottomRight=t.bottomRight,e.bottomLeft=t.bottomLeft},t}();t.CornerRadius=e}(minerva||(minerva={}));var minerva;!function(t){!function(t){t[t.Horizontal=0]="Horizontal",t[t.Vertical=1]="Vertical"}(t.Orientation||(t.Orientation={}));t.Orientation;!function(t){t[t.Miter=0]="Miter",t[t.Bevel=1]="Bevel",t[t.Round=2]="Round"}(t.PenLineJoin||(t.PenLineJoin={}));t.PenLineJoin;!function(t){t[t.Flat=0]="Flat",t[t.Square=1]="Square",t[t.Round=2]="Round",t[t.Triangle=3]="Triangle"}(t.PenLineCap||(t.PenLineCap={}));t.PenLineCap;!function(t){t[t.EvenOdd=0]="EvenOdd",t[t.NonZero=1]="NonZero"}(t.FillRule||(t.FillRule={}));t.FillRule;!function(t){t[t.None=0]="None",t[t.Fill=1]="Fill",t[t.Uniform=2]="Uniform",t[t.UniformToFill=3]="UniformToFill"}(t.Stretch||(t.Stretch={}));t.Stretch;!function(t){t[t.LeftToRight=0]="LeftToRight",t[t.RightToLeft=1]="RightToLeft"}(t.FlowDirection||(t.FlowDirection={}));t.FlowDirection;!function(t){t[t.MaxHeight=0]="MaxHeight",t[t.BlockLineHeight=1]="BlockLineHeight"}(t.LineStackingStrategy||(t.LineStackingStrategy={}));t.LineStackingStrategy;!function(t){t[t.Left=0]="Left",t[t.Center=1]="Center",t[t.Right=2]="Right",t[t.Justify=3]="Justify"}(t.TextAlignment||(t.TextAlignment={}));t.TextAlignment;!function(t){t[t.None=0]="None",t[t.WordEllipsis=1]="WordEllipsis",t[t.CharacterEllipsis=2]="CharacterEllipsis"}(t.TextTrimming||(t.TextTrimming={}));t.TextTrimming;!function(t){t[t.NoWrap=0]="NoWrap",t[t.Wrap=1]="Wrap",t[t.WrapWithOverflow=2]="WrapWithOverflow"}(t.TextWrapping||(t.TextWrapping={}));t.TextWrapping;!function(t){t[t.None=0]="None",t[t.Underline=1]="Underline"}(t.TextDecorations||(t.TextDecorations={}));t.TextDecorations;!function(t){t[t.Thin=100]="Thin",t[t.ExtraLight=200]="ExtraLight",t[t.Light=300]="Light",t[t.Normal=400]="Normal",t[t.Medium=500]="Medium",t[t.SemiBold=600]="SemiBold",t[t.Bold=700]="Bold",t[t.ExtraBold=800]="ExtraBold",t[t.Black=900]="Black",t[t.ExtraBlack=950]="ExtraBlack"}(t.FontWeight||(t.FontWeight={}));t.FontWeight;!function(t){t[t.Counterclockwise=0]="Counterclockwise",t[t.Clockwise=1]="Clockwise"}(t.SweepDirection||(t.SweepDirection={}));t.SweepDirection}(minerva||(minerva={}));var minerva;!function(t){!function(t){t[t.Transform=1]="Transform",t[t.LocalTransform=2]="LocalTransform",t[t.Clip=8]="Clip",t[t.LocalClip=16]="LocalClip",t[t.LayoutClip=32]="LayoutClip",t[t.RenderVisibility=64]="RenderVisibility",t[t.HitTestVisibility=128]="HitTestVisibility",t[t.ImageMetrics=256]="ImageMetrics",t[t.Measure=512]="Measure",t[t.Arrange=1024]="Arrange",t[t.Bounds=1048576]="Bounds",t[t.NewBounds=2097152]="NewBounds",t[t.Invalidate=4194304]="Invalidate",t[t.InUpDirtyList=1073741824]="InUpDirtyList",t[t.InDownDirtyList=-2147483648]="InDownDirtyList",t[t.DownDirtyState=507]="DownDirtyState",t[t.UpDirtyState=7340032]="UpDirtyState",t[t.PropagateDown=225]="PropagateDown"}(t.DirtyFlags||(t.DirtyFlags={}));t.DirtyFlags;!function(t){t[t.None=0]="None",t[t.RenderVisible=2]="RenderVisible",t[t.HitTestVisible=4]="HitTestVisible",t[t.TotalRenderVisible=8]="TotalRenderVisible",t[t.TotalHitTestVisible=16]="TotalHitTestVisible",t[t.MeasureHint=2048]="MeasureHint",t[t.ArrangeHint=4096]="ArrangeHint",t[t.SizeHint=8192]="SizeHint",t[t.Hints=14336]="Hints"}(t.UIFlags||(t.UIFlags={}));t.UIFlags;!function(t){t[t.None=0]="None",t[t.Empty=1]="Empty",t[t.Normal=2]="Normal",t[t.Degenerate=4]="Degenerate",t[t.Radii=8]="Radii"}(t.ShapeFlags||(t.ShapeFlags={}));t.ShapeFlags}(minerva||(minerva={}));var minerva;!function(t){function e(t){var e="";return e+=t.style.toString()+" ",e+="normal ",e+=t.weight.toString()+" ",e+=t.size+"px ",e+=t.family.toString()}t.FontStyle={Normal:"normal",Italic:"italic",Oblique:"oblique"},t.FontStretch={UltraCondensed:"ultra-condensed",ExtraCondensed:"extra-condensed",Condensed:"condensed",SemiCondensed:"semi-condensed",Normal:"normal",SemiExpanded:"semi-expanded",Expanded:"expanded",ExtraExpanded:"extra-expanded",UltraExpanded:"ultra-expanded"};var n=function(){function n(){this.family=n.DEFAULT_FAMILY,this.size=n.DEFAULT_SIZE,this.stretch=n.DEFAULT_STRETCH,this.style=n.DEFAULT_STYLE,this.weight=n.DEFAULT_WEIGHT,this.$$cachedObj=null,this.$$cachedHeight=null}return n.mergeInto=function(t,e,n,r,i,a){var o=t.family!==e||t.size!==n||t.stretch!==r||t.style!==i||t.weight!==a;return t.family=e,t.size=n,t.stretch=r,t.style=i,t.weight=a,o&&(t.$$cachedObj=null,t.$$cachedHeight=null),o},n.prototype.toHtml5Object=function(){return this.$$cachedObj=this.$$cachedObj||e(this)},n.prototype.getHeight=function(){return null==this.$$cachedHeight&&(this.$$cachedHeight=t.fontHeight.get(this)),this.$$cachedHeight},n.prototype.getAscender=function(){return 0},n.prototype.getDescender=function(){return 0},n.DEFAULT_FAMILY="Segoe UI, Lucida Grande, Verdana",n.DEFAULT_STRETCH=t.FontStretch.Normal,n.DEFAULT_STYLE=t.FontStyle.Normal,n.DEFAULT_WEIGHT=t.FontWeight.Normal,n.DEFAULT_SIZE=14,n}();t.Font=n}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){function e(e){var i=e.toHtml5Object(),a=r[i];return null==a?(r[i]=a=n(i),t.cache.misses++):t.cache.hits++,a}function n(t){perfex.timer.start("MeasureFontHeight",t),i||(i=document.createElement("div"),i.appendChild(document.createTextNode("Hg")),document.body.appendChild(i)),i.style.display="",i.style.font=t;var e=i.offsetHeight;return i.style.display="none",perfex.timer.stop(),e}var r=[];t.cache={hits:0,misses:0},t.get=e;var i}(e=t.fontHeight||(t.fontHeight={}))}(minerva||(minerva={}));var minerva;!function(t){var e=function(){function t(t){this.raw=t}return t.prototype.isTransparent=function(){return!1},t.prototype.setupBrush=function(t,e){},t.prototype.toHtml5Object=function(){return this.raw},t}();t.FakeBrush=e}(minerva||(minerva={}));var minerva;!function(t){t.NO_SIZE_UPDATER={setActualWidth:function(t){},setActualHeight:function(t){},onSizeChanged:function(t,e){}}}(minerva||(minerva={}));var minerva;!function(t){!function(t){t[t.Forward=0]="Forward",t[t.Reverse=1]="Reverse",t[t.ZForward=2]="ZForward",t[t.ZReverse=3]="ZReverse"}(t.WalkDirection||(t.WalkDirection={}));t.WalkDirection}(minerva||(minerva={}));var minerva;!function(t){var e=function(){function t(t,e){this.x=null==t?0:t,this.y=null==e?0:e}return t.isEqual=function(t,e){return t.x===e.x&&t.y===e.y},t.copyTo=function(t,e){e.x=t.x,e.y=t.y},t}();t.Point=e}(minerva||(minerva={}));var minerva;!function(t){var e;e="undefined"!=typeof Float32Array?function(t){return new Float32Array(t)}:function(t){return new Array(t)},t.vec2={create:function(t,n){var r=e(2);return r[0]=t,r[1]=n,r},init:function(t,n,r){return r||(r=e(2)),r[0]=t,r[1]=n,r}}}(minerva||(minerva={}));var vec2=minerva.vec2,minerva;!function(t){!function(t){t[t.Out=0]="Out",t[t.In=1]="In",t[t.Part=2]="Part"}(t.RectOverlap||(t.RectOverlap={}));var e=t.RectOverlap,n=t.vec2.create(0,0),r=t.vec2.create(0,0),i=t.vec2.create(0,0),a=t.vec2.create(0,0),o=function(){function o(t,e,n,r){this.x=null==t?0:t,this.y=null==e?0:e,this.width=null==n?0:n,this.height=null==r?0:r}return o.clear=function(t){t.x=t.y=t.width=t.height=0},o.getBottom=function(t){return t.y+t.height},o.getRight=function(t){return t.x+t.width},o.isEqual=function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height},o.isEmpty=function(t){return 0===t.width||0===t.height},o.copyTo=function(t,e){e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height},o.roundOut=function(t){var e=Math.floor(t.x),n=Math.floor(t.y);t.width=Math.ceil(t.x+t.width)-e,t.height=Math.ceil(t.y+t.height)-n,t.x=e,t.y=n},o.roundIn=function(t){var e=Math.ceil(t.x),n=Math.ceil(t.y);return t.width=Math.floor(t.x+t.width)-Math.ceil(t.x),t.height=Math.floor(t.y+t.height)-Math.ceil(t.y),t.x=e,t.y=n,t},o.intersection=function(t,e){var n=Math.max(t.x,e.x),r=Math.max(t.y,e.y);t.width=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-n),t.height=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-r),t.x=n,t.y=r},o.union=function(t,e){if(!(e.width<=0||e.height<=0)){if(t.width<=0||t.height<=0)return void o.copyTo(e,t);var n=Math.min(t.x,e.x),r=Math.min(t.y,e.y);t.width=Math.max(t.x+t.width,e.x+e.width)-n,t.height=Math.max(t.y+t.height,e.y+e.height)-r,t.x=n,t.y=r}},o.isContainedIn=function(t,e){var n=t.x,r=t.y,i=t.x+t.width,a=t.y+t.height,o=e.x,s=e.y,c=e.x+e.width,u=e.y+e.height;return o>n||s>r||n>c||r>u?!1:o>i||s>a||i>c||a>u?!1:!0},o.containsPoint=function(t,e){return t.x<=e.x&&t.y<=e.y&&t.x+t.width>=e.x&&t.y+t.height>=e.y},o.extendTo=function(t,e,n){var r=t.x,i=t.y,a=t.width,o=t.height;(r>e||e>r+a)&&(a=Math.max(Math.abs(e-r),Math.abs(e-r-a))),(i>n||n>i+o)&&(o=Math.max(Math.abs(n-i),Math.abs(n-i-o))),t.x=Math.min(r,e),t.y=Math.min(i,n),t.width=a,t.height=o},o.grow=function(t,e,n,r,i){return t.x-=e,t.y-=n,t.width+=e+r,t.height+=n+i,t.width<0&&(t.width=0),t.height<0&&(t.height=0),t},o.shrink=function(t,e,n,r,i){t.x+=e,t.y+=n,t.width-=e+r,t.height-=n+i,t.width<0&&(t.width=0),t.height<0&&(t.height=0)},o.rectIn=function(t,n){var r=new o;return o.copyTo(t,r),o.intersection(r,n),o.isEmpty(r)?e.Out:o.isEqual(r,n)?e.In:e.Part},o.transform=function(e,o){if(!o)return e;var s=e.x,c=e.y,u=e.width,l=e.height;t.vec2.init(s,c,n),t.vec2.init(s+u,c,r),t.vec2.init(s+u,c+l,i),t.vec2.init(s,c+l,a),t.mat3.transformVec2(o,n),t.mat3.transformVec2(o,r),t.mat3.transformVec2(o,i),t.mat3.transformVec2(o,a);var h=Math.min(n[0],r[0],i[0],a[0]),p=Math.min(n[1],r[1],i[1],a[1]),f=Math.max(n[0],r[0],i[0],a[0]),d=Math.max(n[1],r[1],i[1],a[1]);return e.x=h,e.y=p,e.width=f-h,e.height=d-p,e},o.transform4=function(t,e){},o}();t.Rect=o}(minerva||(minerva={}));var minerva;!function(t){var e=function(){function t(t,e){this.width=null==t?0:t,this.height=null==e?0:e}return t.copyTo=function(t,e){e.width=t.width,e.height=t.height},t.isEqual=function(t,e){return t.width===e.width&&t.height===e.height},t.isEmpty=function(t){return 0===t.width||0===t.height},t.min=function(t,e){t.width=Math.min(t.width,e.width),t.height=Math.min(t.height,e.height)},t.isUndef=function(t){return isNaN(t.width)&&isNaN(t.height)},t.undef=function(t){t.width=NaN,t.height=NaN},t}();t.Size=e}(minerva||(minerva={}));var minerva;!function(t){var e=function(){function t(t,e,n,r){this.left=null==t?0:t,this.top=null==e?0:e,this.right=null==n?0:n,this.bottom=null==r?0:r}return t.add=function(t,e){t.left+=e.left,t.top+=e.top,t.right+=e.right,t.bottom+=e.bottom},t.copyTo=function(t,e){e.left=t.left,e.top=t.top,e.right=t.right,e.bottom=t.bottom},t.isEmpty=function(t){return 0===t.left&&0===t.top&&0===t.right&&0===t.bottom},t.isBalanced=function(t){return t.left===t.top&&t.left===t.right&&t.left===t.bottom},t.shrinkSize=function(t,e){var n=e.width,r=e.height;return n!=Number.POSITIVE_INFINITY&&(n-=t.left+t.right),r!=Number.POSITIVE_INFINITY&&(r-=t.top+t.bottom),e.width=n>0?n:0,e.height=r>0?r:0,e},t.shrinkRect=function(t,e){e.x+=t.left,e.y+=t.top,e.width-=t.left+t.right,e.height-=t.top+t.bottom,e.width<0&&(e.width=0),e.height<0&&(e.height=0)},t.shrinkCornerRadius=function(t,e){e.topLeft=Math.max(e.topLeft-.5*Math.max(t.left,t.top),0),e.topRight=Math.max(e.topRight-.5*Math.max(t.right,t.top),0),e.bottomRight=Math.max(e.bottomRight-.5*Math.max(t.right,t.bottom),0),e.bottomLeft=Math.max(e.bottomLeft-.5*Math.max(t.left,t.bottom),0)},t.growSize=function(t,e){var n=e.width,r=e.height;return n!=Number.POSITIVE_INFINITY&&(n+=t.left+t.right),r!=Number.POSITIVE_INFINITY&&(r+=t.top+t.bottom),e.width=n>0?n:0,e.height=r>0?r:0,e},t.growRect=function(t,e){e.x-=t.left,e.y-=t.top,e.width+=t.left+t.right,e.height+=t.top+t.bottom,e.width<0&&(e.width=0),e.height<0&&(e.height=0)},t.growCornerRadius=function(t,e){e.topLeft=e.topLeft?Math.max(e.topLeft+.5*Math.max(t.left,t.top),0):0,e.topRight=e.topRight?Math.max(e.topRight+.5*Math.max(t.right,t.top),0):0,e.bottomRight=e.bottomRight?Math.max(e.bottomRight+.5*Math.max(t.right,t.bottom),0):0,e.bottomLeft=e.bottomLeft?Math.max(e.bottomLeft+.5*Math.max(t.left,t.bottom),0):0},t}();t.Thickness=e}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){function e(t,e){return[t,e]}function n(t){return t[0]=-t[0],t[1]=-t[1],t}function r(t){var e=t[0],n=t[1];return t[0]=-n,t[1]=e,t}function i(t){var e=t[0],n=t[1],r=Math.sqrt(e*e+n*n);return t[0]=e/r,t[1]=n/r,t}function a(t,e){var n=Math.cos(e),r=Math.sin(e),i=t[0],a=t[1];return t[0]=i*n-a*r,t[1]=i*r+a*n,t}function o(t,e){var n=t[0],r=t[1],i=e[0],a=e[1],o=n*i+r*a,s=Math.sqrt(n*n+r*r)*Math.sqrt(i*i+a*a);return Math.acos(o/s)}function s(t,e){var n=o(t,e),r=i(t.slice(0)),s=i(e.slice(0));a(r,n);var c=Math.abs(r[0]-s[0]),l=Math.abs(r[1]-s[1]);return u>c&&u>l}function c(t,e,n,r){var i=t[0],a=t[1],o=i+e[0],s=a+e[1],c=n[0],u=n[1],l=c+r[0],h=u+r[1],p=(i-o)*(u-h)-(a-s)*(c-l);if(0===p)return null;var f=(i*s-a*o)*(c-l)-(i-o)*(c*h-u*l),d=(i*s-a*o)*(u-h)-(a-s)*(c*h-u*l);return[f/p,d/p]}var u=1e-10;t.create=e,t.reverse=n,t.orthogonal=r,t.normalize=i,t.rotate=a,t.angleBetween=o,t.isClockwiseTo=s,t.intersection=c}(e=t.Vector||(t.Vector={}))}(minerva||(minerva={}));var minerva;!function(t){!function(t){t[t.Visible=0]="Visible",t[t.Collapsed=1]="Collapsed"}(t.Visibility||(t.Visibility={}));t.Visibility}(minerva||(minerva={}));var minerva;!function(t){function e(e,r){n=n||new t.core.render.RenderContext(document.createElement("canvas").getContext("2d"));var i=t.mat3.inverse(r.assets.renderXform,t.mat3.create());n.save(),n.preapply(i);var a=[];return r.hitTest(e,a,n,!0),n.restore(),a}var n=null;t.findElementsInHostSpace=e}(minerva||(minerva={}));var minerva;!function(t){function e(e,n,r){t.errors.push({tree:e,pipedef:n,message:r})}t.errors=[],t.layoutError=e}(minerva||(minerva={}));var minerva;!function(t){function e(e){var n=t.zoom.calc();return new t.Size(e.offsetWidth*n,e.offsetHeight*n)}t.getNaturalCanvasSize=e}(minerva||(minerva={}));var minerva;!function(t){function e(t){var e=t;return e.$$instance||Object.defineProperty(e,"$$instance",{value:new e,enumerable:!1}),e.$$instance}t.singleton=e}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){function e(){return function(){var t=document.frames.screen,e=t.deviceXDPI/t.systemXDPI;return Math.round(100*e)/100}}function n(){function t(){!e&&document.body&&(e=document.createElementNS("http://www.w3.org/2000/svg","svg"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("version","1.1"),document.body.appendChild(e),function(t){t.opacity="0.0",t.position="absolute",t.left="-300px"}(e.style))}var e;return function(){return t(),e?e.currentScale:1}}t.calc=function(){return document.frames?e():n()}()}(e=t.zoom||(t.zoom={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){function e(t){return{def:t,state:t.createState(),output:t.createOutput()}}var n=function(){function t(){}return t}();t.ITriPipe=n,t.createTriPipe=e}(e=t.pipe||(t.pipe={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e=function(){function t(){this.$$names=[],this.$$tapins=[]}return t.prototype.addTapin=function(t,e){return this.$$names.push(t),this.$$tapins.push(e),this},t.prototype.addTapinBefore=function(t,e,n){var r=this.$$names,i=this.$$tapins,a=t?r.indexOf(t):-1;return-1===a?(r.unshift(e),i.unshift(n)):(r.splice(a,0,e),i.splice(a,0,n)),this},t.prototype.addTapinAfter=function(t,e,n){var r=this.$$names,i=this.$$tapins,a=t?r.indexOf(t):-1;return-1===a||a===r.length-1?(r.push(e),i.push(n)):(r.splice(a+1,0,e),i.splice(a+1,0,n)),this},t.prototype.replaceTapin=function(t,e){var n=this.$$names,r=this.$$tapins,i=n.indexOf(t);if(-1===i)throw new Error("Could not replace pipe tap-in. No pipe tap-in named `"+t+"`.");return r[i]=e,this},t.prototype.removeTapin=function(t){var e=this.$$names,n=e.indexOf(t);if(-1===n)throw new Error("Could not replace pipe tap-in. No pipe tap-in named `"+t+"`.");return e.splice(n,1),this.$$tapins.splice(n,1),this},t.prototype.run=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];e.unshift(t),this.prepare.apply(this,e);for(var r=!0,i=0,a=this.$$tapins,o=a.length;o>i;i++)if(!a[i].apply(this,e)){r=!1;break}return this.flush.apply(this,e),r},t.prototype.prepare=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n]},t.prototype.flush=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n]},t}();t.PipeDef=e}(e=t.pipe||(t.pipe={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e=function(){function t(){this.$$names=[],this.$$tapins=[]}return t.prototype.addTapin=function(t,e){return this.$$names.push(t),this.$$tapins.push(e),this},t.prototype.addTapinBefore=function(t,e,n){var r=this.$$names,i=this.$$tapins,a=t?r.indexOf(t):-1;return-1===a?(r.unshift(e),i.unshift(n)):(r.splice(a,0,e),i.splice(a,0,n)),this},t.prototype.addTapinAfter=function(t,e,n){var r=this.$$names,i=this.$$tapins,a=t?r.indexOf(t):-1;return-1===a||a===r.length-1?(r.push(e),i.push(n)):(r.splice(a+1,0,e),i.splice(a+1,0,n)),this},t.prototype.replaceTapin=function(t,e){var n=this.$$names,r=this.$$tapins,i=n.indexOf(t);if(-1===i)throw new Error("Could not replace pipe tap-in. No pipe tap-in named `"+t+"`.");return r[i]=e,this},t.prototype.removeTapin=function(t){var e=this.$$names,n=e.indexOf(t);if(-1===n)throw new Error("Could not replace pipe tap-in. No pipe tap-in named `"+t+"`.");return e.splice(n,1),this.$$tapins.splice(n,1),this},t.prototype.run=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];r.unshift(n),r.unshift(e),r.unshift(t),this.prepare.apply(this,r);for(var a=!0,o=0,s=this.$$tapins,c=s.length;c>o;o++)if(!s[o].apply(this,r)){a=!1;break}return this.flush.apply(this,r),a},t.prototype.createState=function(){return null},t.prototype.createOutput=function(){return null},t.prototype.prepare=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i]},t.prototype.flush=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i]},t}();t.TriPipeDef=e}(e=t.pipe||(t.pipe={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n=function(){function n(){this.$$measure=null,this.$$measureBinder=null,this.$$arrange=null,this.$$arrangeBinder=null,this.$$sizing=null,this.$$processdown=null,this.$$processup=null,this.$$render=null,this.$$hittest=null,this.$$inDownDirty=!1,this.$$inUpDirty=!1,this.$$attached={},this.$$sizeupdater=t.NO_SIZE_UPDATER,this.assets={width:NaN,height:NaN,minWidth:0,minHeight:0,maxWidth:Number.POSITIVE_INFINITY,maxHeight:Number.POSITIVE_INFINITY,useLayoutRounding:!0,margin:new t.Thickness,horizontalAlignment:t.HorizontalAlignment.Stretch,verticalAlignment:t.VerticalAlignment.Stretch,clip:null,effect:null,visibility:t.Visibility.Visible,opacity:1,isHitTestVisible:!0,renderTransform:null,renderTransformOrigin:new t.Point,effectPadding:new t.Thickness,previousConstraint:new t.Size,desiredSize:new t.Size,hiddenDesire:new t.Size(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),renderSize:new t.Size,visualOffset:new t.Point,lastRenderSize:void 0,layoutSlot:new t.Rect,layoutClip:new t.Rect,compositeLayoutClip:new t.Rect,breakLayoutClip:!1,actualWidth:0,actualHeight:0,z:NaN,totalIsRenderVisible:!0,totalOpacity:1,totalIsHitTestVisible:!0,extents:new t.Rect,extentsWithChildren:new t.Rect,surfaceBoundsWithChildren:new t.Rect,globalBoundsWithChildren:new t.Rect,layoutXform:t.mat3.identity(),carrierXform:null,renderXform:t.mat3.identity(),absoluteXform:t.mat3.identity(),dirtyRegion:new t.Rect,dirtyFlags:0,uiFlags:t.UIFlags.RenderVisible|t.UIFlags.HitTestVisible,forceInvalidate:!1},this.tree=null,perfex.timer.start("CreateUpdater",null),this.setMeasureBinder().setArrangeBinder().init(),perfex.timer.stop()}return n.prototype.init=function(){this.setTree(this.tree),this.$$measure||this.setMeasurePipe(),this.$$arrange||this.setArrangePipe(),this.$$sizing||this.setSizingPipe(),this.$$processdown||this.setProcessDownPipe(),this.$$processup||this.setProcessUpPipe(),this.$$render||this.setRenderPipe(),this.$$hittest||this.setHitTestPipe(),this.$$hittest.data.tree||(this.$$hittest.data.tree=this.tree)},n.prototype.setTree=function(t){return this.tree=t||new e.UpdaterTree,this},n.prototype.getAttachedValue=function(t){return this.$$attached[t]},n.prototype.setAttachedValue=function(t,e){this.$$attached[t]=e},n.prototype.onDetached=function(){e.reactTo.helpers.invalidateParent(this),this.invalidateMeasure(),this.tree.visualParent&&this.tree.visualParent.invalidateMeasure();var t=this.assets.layoutSlot;t.x=t.y=t.width=t.height=0;var n=this.assets.layoutClip;n.x=n.y=n.width=n.height=0},n.prototype.onAttached=function(){var e=this.assets;t.Size.undef(e.previousConstraint),e.dirtyFlags|=t.DirtyFlags.RenderVisibility|t.DirtyFlags.HitTestVisibility|t.DirtyFlags.LocalTransform;var r=e.layoutClip;r.x=r.y=r.width=r.height=0;var i=e.renderSize;i.width=i.height=0,this.invalidateMeasure().invalidateArrange().invalidate().updateBounds(!0),n.$$addDownDirty(this),((e.uiFlags&t.UIFlags.SizeHint)>0||void 0!==e.lastRenderSize)&&n.$$propagateUiFlagsUp(this,t.UIFlags.SizeHint)},n.prototype.setVisualParent=function(t){return!t&&this.tree.visualParent&&(this.onDetached(),this.tree.visualParent.tree.onChildDetached(this)),this.tree.visualParent=t,this.setSurface(t?t.tree.surface:void 0),t&&(t.tree.onChildAttached(this),this.onAttached()),this},n.prototype.setSurface=function(e){for(var n,r=[],i=this.walkDeep();i.step();)if(n=i.current,n.tree.surface!==e){var a=n.tree.surface;n.tree.surface=e,n.onSurfaceChanged(a,e),e&&((n.assets.dirtyFlags&t.DirtyFlags.DownDirtyState)>0&&(n.$$inDownDirty=!0,e.addDownDirty(n)),(n.assets.dirtyFlags&t.DirtyFlags.UpDirtyState)>0&&r.push(n))}else i.skipBranch();for(;null!=(n=r.pop());)n.$$inUpDirty=!0,e.addUpDirty(n);return this},n.prototype.onSurfaceChanged=function(t,e){},n.prototype.walkDeep=function(e){var n=void 0,r=[this];e=e||t.WalkDirection.Forward;var i=e===t.WalkDirection.Forward||e===t.WalkDirection.ZForward?e+1:e-1;return{current:void 0,step:function(){if(n)for(var t=n.tree.walk(i);t.step();)r.unshift(t.current);return this.current=n=r.shift(),void 0!==this.current},skipBranch:function(){n=void 0}}},n.prototype.setMeasurePipe=function(n){if(this.$$measure)return this;var r=n||new e.measure.MeasurePipeDef;return this.$$measure=t.pipe.createTriPipe(r),this},n.prototype.setMeasureBinder=function(t){return this.$$measureBinder=t||new e.measure.MeasureBinder,this},n.prototype.setArrangePipe=function(n){if(this.$$arrange)return this;var r=n||new e.arrange.ArrangePipeDef;return this.$$arrange=t.pipe.createTriPipe(r),this},n.prototype.setArrangeBinder=function(t){return this.$$arrangeBinder=t||new e.arrange.ArrangeBinder,this},n.prototype.setSizingPipe=function(n){if(this.$$sizing)return this;var r=n;return r||(r=new e.sizing.SizingPipeDef),this.$$sizing=t.pipe.createTriPipe(r),this},n.prototype.setProcessDownPipe=function(n){var r=n;return r||(r=new e.processdown.ProcessDownPipeDef),this.$$processdown=t.pipe.createTriPipe(r),this},n.prototype.setProcessUpPipe=function(n){if(this.$$processup)return this;var r=n;return r||(r=new e.processup.ProcessUpPipeDef),this.$$processup=t.pipe.createTriPipe(r),this},n.prototype.setRenderPipe=function(n){if(this.$$render)return this;var r=n||new e.render.RenderPipeDef;return this.$$render=t.pipe.createTriPipe(r),this},n.prototype.setHitTestPipe=function(n){if(this.$$hittest)return this;var r=n||new e.hittest.HitTestPipeDef;return this.$$hittest={def:r,data:{updater:this,assets:this.assets,tree:this.tree,hitChildren:!1,bounds:new t.Rect,layoutClipBounds:new t.Rect}},this},n.prototype.doMeasure=function(){this.$$measureBinder.bind(this)},n.prototype.measure=function(t){var e=this.$$measure,r=e.output,i=e.def.run(this.assets,e.state,r,this.tree,t);return r.newUpDirty&&n.$$addUpDirty(this),r.newDownDirty&&n.$$addDownDirty(this),r.newUiFlags&&n.$$propagateUiFlagsUp(this,r.newUiFlags),i},n.prototype.doArrange=function(){this.$$arrangeBinder.bind(this)},n.prototype.arrange=function(t){var e=this.$$arrange,r=e.output,i=e.def.run(this.assets,e.state,r,this.tree,t);return r.newUpDirty&&n.$$addUpDirty(this),r.newDownDirty&&n.$$addDownDirty(this),r.newUiFlags&&n.$$propagateUiFlagsUp(this,r.newUiFlags),i},n.prototype.sizing=function(e,n){var r=this.$$sizing,i=this.assets;i.lastRenderSize&&t.Size.copyTo(i.lastRenderSize,e);var a=r.def.run(i,r.state,r.output,this.tree);return t.Size.copyTo(r.output.actualSize,n),this.$$sizeupdater.setActualWidth(n.width),this.$$sizeupdater.setActualHeight(n.height),i.lastRenderSize=void 0,a},n.prototype.processDown=function(){if(this.tree.surface||(this.$$inDownDirty=!1),!this.$$inDownDirty)return!0;var t=this.tree.visualParent;if(t&&t.$$inDownDirty)return!1;var e=this.$$processdown,r=e.def.run(this.assets,e.state,e.output,t?t.assets:null,this.tree);return this.$$inDownDirty=!1,e.output.newUpDirty&&n.$$addUpDirty(this),r},n.prototype.processUp=function(){if(this.tree.surface||(this.$$inUpDirty=!1),!this.$$inUpDirty)return!0;var t=this.$$processup,e=t.def.run(this.assets,t.state,t.output,this.tree);return this.$$inUpDirty=!1,e},n.prototype.render=function(t,e){var n=this.$$render;return n.def.run(this.assets,n.state,n.output,t,e,this.tree)},n.prototype.preRender=function(){},n.prototype.hitTest=function(t,e,n,r){var i=this.$$hittest;return i.def.run(i.data,t,e,n,r===!0)},n.prototype.onSizeChanged=function(t,e){this.$$sizeupdater.onSizeChanged(t,e)},n.prototype.setSizeUpdater=function(e){this.$$sizeupdater=e||t.NO_SIZE_UPDATER},n.prototype.invalidateMeasure=function(){return this.assets.dirtyFlags|=t.DirtyFlags.Measure,n.$$propagateUiFlagsUp(this,t.UIFlags.MeasureHint),this},n.prototype.invalidateArrange=function(){return this.assets.dirtyFlags|=t.DirtyFlags.Arrange,n.$$propagateUiFlagsUp(this,t.UIFlags.ArrangeHint),this},n.prototype.updateBounds=function(e){var r=this.assets;return r.dirtyFlags|=t.DirtyFlags.Bounds,n.$$addUpDirty(this),e===!0&&(r.forceInvalidate=!0),this},n.prototype.fullInvalidate=function(e){var r=this.assets;return this.invalidate(r.surfaceBoundsWithChildren),e&&(r.dirtyFlags|=t.DirtyFlags.LocalTransform,n.$$addDownDirty(this)),this.updateBounds(!0),this},n.prototype.invalidate=function(e){var r=this.assets;return!r.totalIsRenderVisible||255*r.totalOpacity<.5?this:(r.dirtyFlags|=t.DirtyFlags.Invalidate,n.$$addUpDirty(this),e||(e=r.surfaceBoundsWithChildren),t.Rect.union(r.dirtyRegion,e),this)},n.prototype.findChildInList=function(t){for(var e=0,n=t.length;n>e;e++)if(t[e].tree.visualParent===this)return e;return-1},n.$$addUpDirty=function(t){var e=t.tree.surface;e&&!t.$$inUpDirty&&(e.addUpDirty(t),t.$$inUpDirty=!0)},n.$$addDownDirty=function(t){var e=t.tree.surface;e&&!t.$$inDownDirty&&(e.addDownDirty(t),t.$$inDownDirty=!0)},n.$$propagateUiFlagsUp=function(t,e){t.assets.uiFlags|=e;for(var n=t;null!=(n=n.tree.visualParent)&&0===(n.assets.uiFlags&e);)n.assets.uiFlags|=e},n.transformToVisual=function(e,n){if(!e.tree.surface||n&&!n.tree.surface)return null;var r=t.mat3.create(),i=e.assets.absoluteXform;if(n){var a=t.mat3.inverse(n.assets.absoluteXform,t.mat3.create());t.mat3.multiply(i,a,r)}else t.mat3.copyTo(i,r);return r},n.transformPoint=function(e,n){var r=t.mat3.inverse(e.assets.absoluteXform,t.mat3.create());if(!r)return void console.warn("Could not get inverse of Absolute Transform for UIElement.");var i=t.vec2.create(n.x,n.y);t.mat3.transformVec2(r,i),n.x=i[0],n.y=i[1]},n}();e.Updater=n}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e={updateBounds:function(){},invalidate:function(t){}},n=function(){function t(){this.isTop=!1,this.surface=null,this.visualParent=null,this.isContainer=!1,this.isLayoutContainer=!1,this.subtree=null}return Object.defineProperty(t.prototype,"visualOwner",{get:function(){return this.visualParent?this.visualParent:this.isTop&&this.surface?this.surface:e},enumerable:!0,configurable:!0}),t.prototype.walk=function(t){var e=!1,n=this;return{current:void 0,step:function(){return e?!1:(e=!0,this.current=n.subtree,null!=this.current)}}},t.prototype.onChildAttached=function(t){this.subtree=t},t.prototype.onChildDetached=function(t){this.subtree=null},t.prototype.setTemplateApplier=function(t){this.applyTemplate=t},t.prototype.applyTemplate=function(){return!1},t}();t.UpdaterTree=n}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){function n(t,e){var n=Math.max(e.minWidth,t.width),r=Math.max(e.minHeight,t.height);isNaN(e.width)||(n=e.width),isNaN(e.height)||(r=e.height),n=Math.max(Math.min(n,e.maxWidth),e.minWidth),r=Math.max(Math.min(r,e.maxHeight),e.minHeight),e.useLayoutRounding&&(n=Math.round(n),r=Math.round(r)),t.width=n,t.height=r}function r(e,n,r,i,a,o){t.Rect.copyTo(n,e),t.Thickness.growRect(r,e),a&&t.Rect.intersection(e,a.GetBounds()),t.Rect.isEmpty(o)||t.Rect.intersection(e,o),i&&t.Rect.transform(e,i)}function i(e,n,r){var i;a.x=0,a.y=0;for(var o,s=e.raw;n&&(i=n.layoutClip,t.Rect.isEmpty(i)||(s.beginPath(),s.rect(i.x,i.y,i.width,i.height),s.clip()),!n.breakLayoutClip);){var c=n.visualOffset;if(a.x+=c.x,a.y+=c.y,e.translate(-c.x,-c.y),!r)break;o=r.visualParent,r=o?o.tree:null,n=o?o.assets:null}e.translate(a.x,a.y)}e.coerceSize=n,e.intersectBoundsWithClipPath=r;var a=new t.Point;e.renderLayoutClip=i}(n=e.helpers||(e.helpers={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(n){function r(n,r,i){n.assets.dirtyFlags|=t.DirtyFlags.HitTestVisibility,e.Updater.$$addDownDirty(n)}function i(t,e,n){t.invalidateMeasure(),t.invalidateArrange()}function a(n,r,i){n.assets.dirtyFlags|=t.DirtyFlags.RenderVisibility,e.Updater.$$addDownDirty(n),h.invalidateParent(n)}function o(n,r,i){n.assets.dirtyFlags|=t.DirtyFlags.RenderVisibility,e.Updater.$$addDownDirty(n),h.invalidateParent(n),n.invalidateMeasure();var a=n.tree.visualParent;a&&a.invalidateMeasure()}function s(n,r,i){h.invalidateParent(n);var a=i?i.GetPadding(n.assets.effectPadding):!1;a&&n.updateBounds(),r!==i&&n.tree.surface&&(n.assets.dirtyFlags|=t.DirtyFlags.LocalTransform,e.Updater.$$addDownDirty(n))}function c(n,r,i){var a=n.assets;h.invalidateParent(n),n.updateBounds(!0),a.dirtyFlags|=t.DirtyFlags.LocalClip,e.Updater.$$addDownDirty(n)}function u(n,r,i){n.assets.dirtyFlags|=t.DirtyFlags.LocalTransform,e.Updater.$$addDownDirty(n)}function l(n,r,i){n.assets.dirtyFlags|=t.DirtyFlags.LocalTransform,e.Updater.$$addDownDirty(n)}var h;!function(t){function e(t){t.tree.visualOwner.invalidate(t.assets.surfaceBoundsWithChildren)}function n(t){var e=t.tree.visualParent;e&&e.invalidateMeasure();var n=t.assets.renderTransformOrigin;t.fullInvalidate(0!==n.x||0!==n.y).invalidateMeasure().invalidateArrange()}function r(t){t.invalidateArrange(),t.fullInvalidate(!0)}t.invalidateParent=e,t.sizeChanged=n,t.alignmentChanged=r}(h=n.helpers||(n.helpers={})),n.isHitTestVisible=r,n.useLayoutRounding=i,n.opacity=a,n.visibility=o,n.effect=s,n.clip=c,n.renderTransform=u,n.renderTransformOrigin=l,n.width=h.sizeChanged,n.height=h.sizeChanged,n.minWidth=h.sizeChanged,n.minHeight=h.sizeChanged,n.maxWidth=h.sizeChanged,n.maxHeight=h.sizeChanged,
n.margin=h.sizeChanged,n.flowDirection=h.sizeChanged,n.horizontalAlignment=h.alignmentChanged,n.verticalAlignment=h.alignmentChanged}(n=e.reactTo||(e.reactTo={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n=function(){function e(){}return e.prototype.bind=function(e){var n=e.assets,r=e.tree,i=n.layoutSlot||void 0;return r.visualParent||(i=new t.Rect,this.expandViewport(i,n,r),this.shiftViewport(i,e)),i?e.arrange(i):(r.visualParent&&r.visualParent.invalidateArrange(),!1)},e.prototype.expandViewport=function(e,n,r){if(r.isLayoutContainer){if(t.Size.copyTo(n.desiredSize,e),r.surface){var i=n.previousConstraint;t.Size.isUndef(i)?(e.width=r.surface.width,e.height=r.surface.height):(e.width=Math.max(e.width,i.width),e.height=Math.max(e.height,i.height))}}else e.width=n.actualWidth,e.height=n.actualHeight},e.prototype.shiftViewport=function(t,e){t.x=e.getAttachedValue("Canvas.Left")||0,t.y=e.getAttachedValue("Canvas.Top")||0},e}();e.ArrangeBinder=n}(n=e.arrange||(e.arrange={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},minerva;!function(t){var e;!function(e){var n;!function(e){var n=function(n){function r(){n.call(this),this.addTapin("applyRounding",e.tapins.applyRounding).addTapin("validateFinalRect",e.tapins.validateFinalRect).addTapin("validateVisibility",e.tapins.validateVisibility).addTapin("checkNeedArrange",e.tapins.checkNeedArrange).addTapin("invalidateFuture",e.tapins.invalidateFuture).addTapin("calcStretched",e.tapins.calcStretched).addTapin("prepareOverride",e.tapins.prepareOverride).addTapin("doOverride",e.tapins.doOverride).addTapin("completeOverride",e.tapins.completeOverride).addTapin("calcFlip",e.tapins.calcFlip).addTapin("calcVisualOffset",e.tapins.calcVisualOffset).addTapin("buildLayoutClip",e.tapins.buildLayoutClip).addTapin("buildLayoutXform",e.tapins.buildLayoutXform).addTapin("buildRenderSize",e.tapins.buildRenderSize)}return __extends(r,n),r.prototype.createState=function(){return{arrangedSize:new t.Size,finalRect:new t.Rect,finalSize:new t.Size,childRect:new t.Rect,framework:new t.Size,stretched:new t.Size,constrained:new t.Size,flipHorizontal:!1}},r.prototype.createOutput=function(){return{dirtyFlags:0,uiFlags:0,layoutSlot:new t.Rect,layoutXform:t.mat3.identity(),layoutClip:new t.Rect,renderSize:new t.Size,lastRenderSize:void 0,visualOffset:new t.Point,origDirtyFlags:0,origUiFlags:0,newUpDirty:0,newDownDirty:0,newUiFlags:0}},r.prototype.prepare=function(e,n,r){r.origDirtyFlags=r.dirtyFlags=e.dirtyFlags,r.origUiFlags=r.uiFlags=e.uiFlags,t.Rect.copyTo(e.layoutSlot,r.layoutSlot),t.Rect.copyTo(e.layoutClip,r.layoutClip),t.Size.copyTo(e.renderSize,r.renderSize),r.lastRenderSize=e.lastRenderSize,t.mat3.copyTo(e.layoutXform,r.layoutXform),t.Point.copyTo(e.visualOffset,r.visualOffset)},r.prototype.flush=function(e,n,r){var i=(r.dirtyFlags|e.dirtyFlags)&~r.origDirtyFlags;r.newUpDirty=i&t.DirtyFlags.UpDirtyState,r.newDownDirty=i&t.DirtyFlags.DownDirtyState,r.newUiFlags=(r.uiFlags|e.uiFlags)&~r.origUiFlags,e.dirtyFlags=r.dirtyFlags,e.uiFlags=r.uiFlags,t.Rect.copyTo(r.layoutSlot,e.layoutSlot),t.Rect.copyTo(r.layoutClip,e.layoutClip),t.Size.copyTo(r.renderSize,e.renderSize),e.lastRenderSize=r.lastRenderSize,t.mat3.copyTo(r.layoutXform,e.layoutXform),t.Point.copyTo(r.visualOffset,e.visualOffset)},r}(t.pipe.TriPipeDef);e.ArrangePipeDef=n}(n=e.arrange||(e.arrange={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n=function(t){function n(){t.call(this),this.addTapin("flushPrevious",e.tapins.flushPrevious).addTapin("determinePhase",e.tapins.determinePhase).addTapin("prepareMeasure",e.tapins.prepareMeasure).addTapin("measure",e.tapins.measure).addTapin("prepareArrange",e.tapins.prepareArrange).addTapin("arrange",e.tapins.arrange).addTapin("prepareSizing",e.tapins.prepareSizing).addTapin("sizing",e.tapins.sizing).addTapin("notifyResize",e.tapins.notifyResize)}return __extends(n,t),n.prototype.prepare=function(t){},n.prototype.flush=function(t){},n}(t.pipe.PipeDef);e.DraftPipeDef=n}(n=e.draft||(e.draft={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n=function(t){function n(){t.call(this),this.addTapin("canHit",e.tapins.canHit).addTapin("prepareCtx",e.tapins.prepareCtx).addTapin("insideClip",e.tapins.insideClip).addTapin("insideChildren",e.tapins.insideChildren).addTapin("canHitInside",e.tapins.canHitInside).addTapin("insideObject",e.tapins.insideObject).addTapin("insideLayoutClip",e.tapins.insideLayoutClip).addTapin("completeCtx",e.tapins.completeCtx)}return __extends(n,t),n}(t.pipe.PipeDef);e.HitTestPipeDef=n}(n=e.hittest||(e.hittest={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n=function(){function e(){}return e.prototype.bind=function(e){var n=e.assets,r=n.previousConstraint,i=new t.Size,a=e.tree;!a.surface&&t.Size.isUndef(r)&&!a.visualParent&&a.isLayoutContainer&&(r.width=r.height=Number.POSITIVE_INFINITY);var o=!1;return!t.Size.isUndef(r)&&(t.Size.copyTo(n.desiredSize,i),o=e.measure(r),t.Size.isEqual(i,n.desiredSize))?o:(a.visualParent&&a.visualParent.invalidateMeasure(),n.dirtyFlags&=~t.DirtyFlags.Measure,o)},e}();e.MeasureBinder=n}(n=e.measure||(e.measure={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n=function(n){function r(){n.call(this),this.addTapin("validate",e.tapins.validate).addTapin("validateVisibility",e.tapins.validateVisibility).addTapin("applyTemplate",e.tapins.applyTemplate).addTapin("checkNeedMeasure",e.tapins.checkNeedMeasure).addTapin("invalidateFuture",e.tapins.invalidateFuture).addTapin("prepareOverride",e.tapins.prepareOverride).addTapin("doOverride",e.tapins.doOverride).addTapin("completeOverride",e.tapins.completeOverride).addTapin("finishDesired",e.tapins.finishDesired)}return __extends(r,n),r.prototype.createState=function(){return{availableSize:new t.Size}},r.prototype.createOutput=function(){return{previousConstraint:new t.Size,desiredSize:new t.Size,hiddenDesire:new t.Size,dirtyFlags:0,uiFlags:0,origDirtyFlags:0,origUiFlags:0,newUpDirty:0,newDownDirty:0,newUiFlags:0}},r.prototype.prepare=function(e,n,r){t.Size.copyTo(e.previousConstraint,r.previousConstraint),t.Size.copyTo(e.desiredSize,r.desiredSize),t.Size.copyTo(e.hiddenDesire,r.hiddenDesire),r.origDirtyFlags=r.dirtyFlags=e.dirtyFlags,r.origUiFlags=r.uiFlags=e.uiFlags},r.prototype.flush=function(e,n,r){var i=(r.dirtyFlags|e.dirtyFlags)&~r.origDirtyFlags;r.newUpDirty=i&t.DirtyFlags.UpDirtyState,r.newDownDirty=i&t.DirtyFlags.DownDirtyState,r.newUiFlags=(r.uiFlags|e.uiFlags)&~r.origUiFlags,e.dirtyFlags=r.dirtyFlags,e.uiFlags=r.uiFlags,t.Size.copyTo(r.previousConstraint,e.previousConstraint),t.Size.copyTo(r.hiddenDesire,e.hiddenDesire),t.Size.copyTo(r.desiredSize,e.desiredSize)},r}(t.pipe.TriPipeDef);e.MeasurePipeDef=n}(n=e.measure||(e.measure={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n=function(n){function r(){n.call(this),this.addTapin("processRenderVisibility",e.tapins.processRenderVisibility).addTapin("processHitTestVisibility",e.tapins.processHitTestVisibility).addTapin("calcXformOrigin",e.tapins.calcXformOrigin).addTapin("processLocalXform",e.tapins.processLocalXform).addTapin("calcRenderXform",e.tapins.calcRenderXform).addTapin("calcAbsoluteXform",e.tapins.calcAbsoluteXform).addTapin("processXform",e.tapins.processXform).addTapin("processLayoutClip",e.tapins.processLayoutClip).addTapin("propagateDirtyToChildren",e.tapins.propagateDirtyToChildren)}return __extends(r,n),r.prototype.createState=function(){return{xformOrigin:new t.Point,localXform:t.mat3.identity(),subtreeDownDirty:0}},r.prototype.createOutput=function(){return{totalIsRenderVisible:!1,totalOpacity:1,totalIsHitTestVisible:!1,z:NaN,compositeLayoutClip:new t.Rect,renderXform:t.mat3.identity(),absoluteXform:t.mat3.identity(),dirtyFlags:0,newUpDirty:0}},r.prototype.prepare=function(e,n,r,i,a){(e.dirtyFlags&t.DirtyFlags.LocalTransform)>0&&(e.dirtyFlags|=t.DirtyFlags.Transform),r.dirtyFlags=e.dirtyFlags,r.totalIsRenderVisible=e.totalIsRenderVisible,r.totalOpacity=e.totalOpacity,r.totalIsHitTestVisible=e.totalIsHitTestVisible,r.z=e.z,t.Rect.copyTo(e.compositeLayoutClip,r.compositeLayoutClip),t.mat3.copyTo(e.renderXform,r.renderXform),t.mat3.copyTo(e.absoluteXform,r.absoluteXform),n.subtreeDownDirty=0},r.prototype.flush=function(e,n,r,i,a){r.newUpDirty=r.dirtyFlags&~e.dirtyFlags&t.DirtyFlags.UpDirtyState,e.dirtyFlags=r.dirtyFlags&~t.DirtyFlags.DownDirtyState,e.totalIsRenderVisible=r.totalIsRenderVisible,e.totalOpacity=r.totalOpacity,e.totalIsHitTestVisible=r.totalIsHitTestVisible,e.z=r.z,t.Rect.copyTo(r.compositeLayoutClip,e.compositeLayoutClip),t.mat3.copyTo(r.renderXform,e.renderXform),t.mat3.copyTo(r.absoluteXform,e.absoluteXform)},r}(t.pipe.TriPipeDef);e.ProcessDownPipeDef=n}(n=e.processdown||(e.processdown={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n=function(n){function r(){n.call(this),this.addTapin("calcActualSize",e.tapins.calcActualSize).addTapin("calcExtents",e.tapins.calcExtents).addTapin("calcPaintBounds",e.tapins.calcPaintBounds).addTapin("processBounds",e.tapins.processBounds).addTapin("processNewBounds",e.tapins.processNewBounds).addTapin("processInvalidate",e.tapins.processInvalidate)}return __extends(r,n),r.prototype.createState=function(){return{invalidateSubtreePaint:!1,actualSize:new t.Size,hasNewBounds:!1,hasInvalidate:!1}},r.prototype.createOutput=function(){return{extents:new t.Rect,extentsWithChildren:new t.Rect,globalBoundsWithChildren:new t.Rect,surfaceBoundsWithChildren:new t.Rect,dirtyFlags:0,dirtyRegion:new t.Rect,forceInvalidate:!1}},r.prototype.prepare=function(e,n,r){r.dirtyFlags=e.dirtyFlags,t.Rect.copyTo(e.extents,r.extents),t.Rect.copyTo(e.extentsWithChildren,r.extentsWithChildren),t.Rect.copyTo(e.globalBoundsWithChildren,r.globalBoundsWithChildren),t.Rect.copyTo(e.surfaceBoundsWithChildren,r.surfaceBoundsWithChildren),t.Rect.copyTo(e.dirtyRegion,r.dirtyRegion),r.forceInvalidate=e.forceInvalidate},r.prototype.flush=function(e,n,r){e.dirtyFlags=r.dirtyFlags&~t.DirtyFlags.UpDirtyState,t.Rect.copyTo(r.extents,e.extents),t.Rect.copyTo(r.extentsWithChildren,e.extentsWithChildren),t.Rect.copyTo(r.globalBoundsWithChildren,e.globalBoundsWithChildren),t.Rect.copyTo(r.surfaceBoundsWithChildren,e.surfaceBoundsWithChildren),t.Rect.copyTo(r.dirtyRegion,e.dirtyRegion),e.forceInvalidate=r.forceInvalidate},r}(t.pipe.TriPipeDef);e.ProcessUpPipeDef=n}(n=e.processup||(e.processup={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){function n(){var t=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");return null!=t.exec(navigator.userAgent)?parseFloat(RegExp.$1):-1}var r=["butt","square","round","butt"],i=["miter","bevel","round"],a=function(){function a(n){this.$$transforms=[],this.currentTransform=t.mat3.identity(),Object.defineProperties(this,{raw:{value:n,writable:!1},currentTransform:{value:t.mat3.identity(),writable:!1},hasFillRule:{value:a.hasFillRule,writable:!1},size:{value:new e.RenderContextSize,writable:!1}}),this.size.init(n)}return Object.defineProperty(a,"hasFillRule",{get:function(){if("Microsoft Internet Explorer"===navigator.appName){var t=n();return 0>t||t>10}return!0},enumerable:!0,configurable:!0}),a.prototype.applyDpiRatio=function(){var t=this.size.dpiRatio;this.scale(t,t)},a.prototype.save=function(){this.$$transforms.push(t.mat3.create(this.currentTransform)),this.raw.save()},a.prototype.restore=function(){var e=this.$$transforms.pop();e&&t.mat3.copyTo(e,this.currentTransform),this.raw.restore()},a.prototype.setTransform=function(e,n,r,i,a,o){t.mat3.copyTo([e,n,r,i,a,o],this.currentTransform),this.raw.setTransform(e,n,r,i,a,o)},a.prototype.resetTransform=function(){t.mat3.identity(this.currentTransform);var e=this.raw;e.resetTransform&&e.resetTransform()},a.prototype.transform=function(e,n,r,i,a,o){var s=this.currentTransform;t.mat3.multiply(s,t.mat3.create([e,n,r,i,a,o]),s),this.raw.transform(e,n,r,i,a,o)},a.prototype.scale=function(e,n){t.mat3.scale(this.currentTransform,e,n),this.raw.scale(e,n)},a.prototype.rotate=function(e){var n=this.currentTransform,r=t.mat3.createRotate(e);t.mat3.multiply(n,r,n),this.raw.rotate(e)},a.prototype.translate=function(e,n){t.mat3.translate(this.currentTransform,e,n),this.raw.translate(e,n)},a.prototype.apply=function(e){var n=t.mat3.apply(this.currentTransform,e);this.raw.setTransform(n[0],n[1],n[2],n[3],n[4],n[5])},a.prototype.preapply=function(e){var n=t.mat3.preapply(this.currentTransform,e);this.raw.setTransform(n[0],n[1],n[2],n[3],n[4],n[5])},a.prototype.clipGeometry=function(t){t.Draw(this),this.raw.clip()},a.prototype.clipRect=function(t){var e=this.raw;e.beginPath(),e.rect(t.x,t.y,t.width,t.height),e.clip()},a.prototype.fillEx=function(e,n,r){var i=this.raw;if(e.setupBrush(i,n),i.fillStyle=e.toHtml5Object(),null==r)i.fillRule=i.msFillRule="nonzero",i.fill();else{var a=r===t.FillRule.EvenOdd?"evenodd":"nonzero";i.fillRule=i.msFillRule=a,i.fill(a)}},a.prototype.isPointInStrokeEx=function(t,e,n){var a=this.raw;return a.lineWidth=t.strokeThickness,a.lineCap=r[t.strokeStartLineCap||t.strokeEndLineCap||0]||r[0],a.lineJoin=i[t.strokeLineJoin||0]||i[0],a.miterLimit=t.strokeMiterLimit,a.isPointInStroke(e,n)},a}();e.RenderContext=a}(n=e.render||(e.render={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n=1e-10,r=function(){function e(){this.$$ctx=null,this.$$desiredWidth=0,this.$$desiredHeight=0,this.$$changed=null,this.$$lastDpiRatio=1}return Object.defineProperty(e.prototype,"desiredWidth",{get:function(){return this.$$desiredWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"desiredHeight",{get:function(){return this.$$desiredHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paintWidth",{get:function(){return this.$$desiredWidth*this.dpiRatio},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paintHeight",{get:function(){return this.$$desiredHeight*this.dpiRatio},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dpiRatio",{get:function(){return(window.devicePixelRatio||1)/this.$$ctx.backingStorePixelRatio},enumerable:!0,configurable:!0}),e.prototype.init=function(e){this.$$ctx=e;var n=t.getNaturalCanvasSize(e.canvas);this.$$desiredWidth=n.width,this.$$desiredHeight=n.height,this.$adjustCanvas()},e.prototype.queueResize=function(t,e){return this.$$changed?(this.$$changed.width=t,this.$$changed.height=e):this.$$changed={width:t,height:e},this},e.prototype.commitResize=function(){if(this.$$changed){if(Math.abs(this.$$changed.width-this.$$desiredWidth)<n&&Math.abs(this.$$changed.height-this.$$desiredHeight)<n)return;this.$$desiredWidth=this.$$changed.width,this.$$desiredHeight=this.$$changed.height,this.$$changed=null,this.$adjustCanvas()}return this},e.prototype.updateDpiRatio=function(){return this.$$lastDpiRatio===this.dpiRatio?!1:(this.$adjustCanvas(),!0)},e.prototype.$adjustCanvas=function(){var t=this.$$ctx.canvas,e=this.dpiRatio;Math.abs(e-1)<n?(t.width=this.desiredWidth,t.height=this.desiredHeight):(t.width=this.paintWidth,t.height=this.paintHeight,t.style.width=this.desiredWidth.toString()+"px",t.style.height=this.desiredHeight.toString()+"px"),this.$$lastDpiRatio=e},e}();e.RenderContextSize=r}(n=e.render||(e.render={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n=function(n){function r(){n.call(this),this.addTapin("validate",e.tapins.validate).addTapin("validateRegion",e.tapins.validateRegion).addTapin("prepareContext",e.tapins.prepareContext).addTapin("applyClip",e.tapins.applyClip).addTapin("preRender",e.tapins.preRender).addTapin("doRender",e.tapins.doRender).addTapin("postRender",e.tapins.postRender).addTapin("renderChildren",e.tapins.renderChildren).addTapin("restoreContext",e.tapins.restoreContext)}return __extends(r,n),r.prototype.createState=function(){return{renderRegion:new t.Rect}},r.prototype.createOutput=function(){return{}},r}(t.pipe.TriPipeDef);e.RenderPipeDef=n}(n=e.render||(e.render={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n=function(n){function r(){n.call(this),this.addTapin("calcUseRender",e.tapins.calcUseRender).addTapin("computeActual",e.tapins.computeActual)}return __extends(r,n),r.prototype.createState=function(){return{useRender:!1}},r.prototype.createOutput=function(){return{actualSize:new t.Size}},r.prototype.prepare=function(t,e,n,r){},r.prototype.flush=function(t,e,n,r){var i=n.actualSize;t.actualWidth=i.width,t.actualHeight=i.height},r}(t.pipe.TriPipeDef);e.SizingPipeDef=n}(n=e.sizing||(e.sizing={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){e.applyRounding=function(e,n,r,i,a){var o=n.finalRect;return e.useLayoutRounding?(o.x=Math.round(a.x),o.y=Math.round(a.y),o.width=Math.round(a.width),o.height=Math.round(a.height)):t.Rect.copyTo(a,o),!0}}(n=e.tapins||(e.tapins={}))}(n=e.arrange||(e.arrange={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(n){var r;!function(n){var r=new t.Rect,i=new t.Rect;n.buildLayoutClip=function(n,a,o,s,c){var u=o.layoutClip;t.Rect.copyTo(a.finalRect,u);var l=o.visualOffset;u.x=Math.max(u.x-l.x,0),u.y=Math.max(u.y-l.y,0),n.useLayoutRounding&&(u.x=Math.round(u.x),u.y=Math.round(u.y)),r.x=r.y=0;var h=a.arrangedSize;return t.Size.copyTo(h,r),(s.isTop||t.Rect.isContainedIn(r,u))&&t.Size.isEqual(a.constrained,h)?u.x=u.y=u.width=u.height=0:(i.x=i.y=0,i.width=i.height=Number.POSITIVE_INFINITY,e.helpers.coerceSize(i,n),t.Rect.intersection(u,i)),t.Rect.isEqual(o.layoutClip,n.layoutClip)||(o.dirtyFlags|=t.DirtyFlags.LayoutClip),!0}}(r=n.tapins||(n.tapins={}))}(n=e.arrange||(e.arrange={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){e.buildLayoutXform=function(e,n,r,i,a){var o=r.visualOffset,s=t.mat3.createTranslate(o.x,o.y,r.layoutXform);return n.flipHorizontal&&(t.mat3.translate(s,n.arrangedSize.width,0),t.mat3.scale(s,-1,1)),t.mat3.equal(e.layoutXform,r.layoutXform)||(r.dirtyFlags|=t.DirtyFlags.LocalTransform),!0}}(n=e.tapins||(e.tapins={}))}(n=e.arrange||(e.arrange={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){e.buildRenderSize=function(e,n,r,i,a){return t.Size.copyTo(n.arrangedSize,r.renderSize),t.Size.isEqual(e.renderSize,r.renderSize)||r.lastRenderSize||(r.lastRenderSize=r.renderSize,r.uiFlags|=t.UIFlags.SizeHint),!0}}(n=e.tapins||(e.tapins={}))}(n=e.arrange||(e.arrange={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){t.calcFlip=function(t,e,n,r,i){return e.flipHorizontal=!1,!0}}(e=t.tapins||(t.tapins={}))}(e=t.arrange||(t.arrange={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(n){var r;!function(n){n.calcStretched=function(n,r,i,a,o){t.Rect.copyTo(o,i.layoutSlot);var s=r.finalRect;t.Thickness.shrinkRect(n.margin,s);var c=r.stretched;return c.width=s.width,c.height=s.height,e.helpers.coerceSize(c,n),!0}}(r=n.tapins||(n.tapins={}))}(n=e.arrange||(e.arrange={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){e.calcVisualOffset=function(e,n,r,i,a){var o=r.visualOffset,s=n.finalRect,c=n.constrained;if(o.x=s.x,o.y=s.y,!i.isTop){switch(e.horizontalAlignment){case t.HorizontalAlignment.Left:break;case t.HorizontalAlignment.Right:o.x+=s.width-c.width;break;case t.HorizontalAlignment.Center:o.x+=.5*(s.width-c.width);break;default:o.x+=Math.max(.5*(s.width-c.width),0)}switch(e.verticalAlignment){case t.VerticalAlignment.Top:break;case t.VerticalAlignment.Bottom:o.y+=s.height-c.height;break;case t.VerticalAlignment.Center:o.y+=.5*(s.height-c.height);break;default:o.y+=Math.max(.5*(s.height-c.height),0)}}return e.useLayoutRounding&&(o.x=Math.round(o.x),o.y=Math.round(o.y)),!0}}(n=e.tapins||(e.tapins={}))}(n=e.arrange||(e.arrange={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){e.checkNeedArrange=function(e,n,r,i,a){return(e.dirtyFlags&t.DirtyFlags.Arrange)>0?!0:!t.Rect.isEqual(r.layoutSlot,n.finalRect)}}(n=e.tapins||(e.tapins={}))}(n=e.arrange||(e.arrange={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(n){var r;!function(n){n.completeOverride=function(n,r,i,a,o){i.dirtyFlags&=~t.DirtyFlags.Arrange;var s=r.arrangedSize;n.horizontalAlignment===t.HorizontalAlignment.Stretch&&(s.width=Math.max(s.width,r.framework.width)),n.verticalAlignment===t.VerticalAlignment.Stretch&&(s.height=Math.max(s.height,r.framework.height)),n.useLayoutRounding&&(s.width=Math.round(s.width),s.height=Math.round(s.height));var c=r.constrained;return t.Size.copyTo(s,c),e.helpers.coerceSize(c,n),c.width=Math.min(c.width,s.width),c.height=Math.min(c.height,s.height),!0}}(r=n.tapins||(n.tapins={}))}(n=e.arrange||(e.arrange={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){e.doOverride=function(e,n,r,i,a){var o=n.childRect;o.x=o.y=0,t.Size.copyTo(n.finalSize,o);for(var s=i.walk();s.step();){var c=s.current;c.arrange(n.childRect)}return t.Size.copyTo(o,n.arrangedSize),!0}}(n=e.tapins||(e.tapins={}))}(n=e.arrange||(e.arrange={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){e.invalidateFuture=function(e,n,r,i,a){var o=r.layoutClip;return o.x=o.y=o.width=o.height=0,r.dirtyFlags|=t.DirtyFlags.LocalTransform,r.dirtyFlags|=t.DirtyFlags.Bounds,!0}}(n=e.tapins||(e.tapins={}))}(n=e.arrange||(e.arrange={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(n){var r;!function(n){n.prepareOverride=function(n,r,i,a,o){var s=r.framework;s.width=0,s.height=0,e.helpers.coerceSize(s,n),n.horizontalAlignment===t.HorizontalAlignment.Stretch&&(s.width=Math.max(s.width,r.stretched.width)),n.verticalAlignment===t.VerticalAlignment.Stretch&&(s.height=Math.max(s.height,r.stretched.height));var c=r.finalSize,u=n.hiddenDesire;return c.width=Math.max(u.width,s.width),c.height=Math.max(u.height,s.height),!0}}(r=n.tapins||(n.tapins={}))}(n=e.arrange||(e.arrange={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){e.validateFinalRect=function(e,n,r,i,a){var o=n.finalRect;return o.width<0||o.height<0||!isFinite(o.width)||!isFinite(o.height)||isNaN(o.width)||isNaN(o.height)?(t.layoutError(i,this,"Invalid arguments to Arrange."),!1):!0}}(n=e.tapins||(e.tapins={}))}(n=e.arrange||(e.arrange={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){e.validateVisibility=function(e,n,r,i,a){return e.visibility!==t.Visibility.Visible?(t.Rect.copyTo(n.finalRect,r.layoutSlot),!1):!0}}(n=e.tapins||(e.tapins={}))}(n=e.arrange||(e.arrange={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){e.arrange=function(e){if(e.flag!==t.UIFlags.ArrangeHint)return!0;if(e.arrangeList.length<=0)return!1;for(var n;null!=(n=e.arrangeList.shift());)n.doArrange();return!0}}(n=e.tapins||(e.tapins={}))}(n=e.draft||(e.draft={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){e.determinePhase=function(e){e.flag=t.UIFlags.None;var n=e.assets;if(n.visibility!==t.Visibility.Visible)return!0;if((n.uiFlags&t.UIFlags.MeasureHint)>0)e.flag=t.UIFlags.MeasureHint;else if((n.uiFlags&t.UIFlags.ArrangeHint)>0)e.flag=t.UIFlags.ArrangeHint;else{if(!((n.uiFlags&t.UIFlags.SizeHint)>0))return!1;e.flag=t.UIFlags.SizeHint}return!0}}(n=e.tapins||(e.tapins={}))}(n=e.draft||(e.draft={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(n){var r;!function(n){n.flushPrevious=function(n){for(var r;null!=(r=n.arrangeList.shift());)e.Updater.$$propagateUiFlagsUp(r,t.UIFlags.ArrangeHint);for(;null!=(r=n.sizingList.shift());)e.Updater.$$propagateUiFlagsUp(r,t.UIFlags.SizeHint);return!0}}(r=n.tapins||(n.tapins={}))}(n=e.draft||(e.draft={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){e.measure=function(e){if(e.flag!==t.UIFlags.MeasureHint)return!0;if(e.measureList.length<=0)return!1;for(var n;null!=(n=e.measureList.shift());)n.doMeasure();return!0}}(n=e.tapins||(e.tapins={}))}(n=e.draft||(e.draft={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){e.notifyResize=function(e){if(e.flag!==t.UIFlags.SizeHint)return!0;if(e.sizingUpdates.length<=0)return!0;for(var n;null!=(n=e.sizingUpdates.pop());)n.updater.onSizeChanged(n.oldSize,n.newSize);return!0}}(n=e.tapins||(e.tapins={}))}(n=e.draft||(e.draft={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){e.prepareArrange=function(e){if(e.flag!==t.UIFlags.ArrangeHint)return!0;for(var n=e.updater.walkDeep();n.step();){var r=n.current.assets;r.visibility===t.Visibility.Visible&&0!==(r.uiFlags&t.UIFlags.ArrangeHint)?(r.uiFlags&=~t.UIFlags.ArrangeHint,(r.dirtyFlags&t.DirtyFlags.Arrange)>0&&e.arrangeList.push(n.current)):n.skipBranch()}return!0}}(n=e.tapins||(e.tapins={}))}(n=e.draft||(e.draft={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){e.prepareMeasure=function(e){if(e.flag!==t.UIFlags.MeasureHint)return!0;var n=e.assets.previousConstraint;!e.tree.isContainer||!t.Size.isUndef(n)&&t.Size.isEqual(n,e.surfaceSize)||(e.assets.dirtyFlags|=t.DirtyFlags.Measure,t.Size.copyTo(e.surfaceSize,e.assets.previousConstraint));for(var r=e.updater.walkDeep();r.step();){var i=r.current.assets;i.visibility===t.Visibility.Visible&&0!==(i.uiFlags&t.UIFlags.MeasureHint)?(i.uiFlags&=~t.UIFlags.MeasureHint,(i.dirtyFlags&t.DirtyFlags.Measure)>0&&e.measureList.push(r.current)):r.skipBranch()}return!0}}(n=e.tapins||(e.tapins={}))}(n=e.draft||(e.draft={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){e.prepareSizing=function(e){if(e.flag!==t.UIFlags.SizeHint)return!0;for(var n=e.updater.walkDeep();n.step();){var r=n.current.assets;r.visibility===t.Visibility.Visible&&0!==(r.uiFlags&t.UIFlags.SizeHint)?(r.uiFlags&=~t.UIFlags.SizeHint,void 0!==r.lastRenderSize&&e.sizingList.push(n.current)):n.skipBranch()}return!0}}(n=e.tapins||(e.tapins={}))}(n=e.draft||(e.draft={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){e.sizing=function(e){if(e.flag!==t.UIFlags.SizeHint)return!0;if(e.sizingList.length<=0)return!1;for(var n,r=new t.Size,i=new t.Size;null!=(n=e.sizingList.pop());)n.sizing(r,i),t.Size.isEqual(r,new t.Size)||(e.sizingUpdates.push({updater:n,oldSize:r,newSize:i}),r=new t.Size,i=new t.Size);return!0}}(n=e.tapins||(e.tapins={}))}(n=e.draft||(e.draft={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,n,r,i){var a=t.assets;return!!a.totalIsRenderVisible&&!!a.totalIsHitTestVisible}t.canHit=e}(e=t.tapins||(t.tapins={}))}(e=t.hittest||(t.hittest={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,n,r,i){return t.hitChildren?!0:(n.shift(),r.restore(),!1)}t.canHitInside=e}(e=t.tapins||(t.tapins={}))}(e=t.hittest||(t.hittest={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,n,r,i){return r.restore(),!0}t.completeCtx=e}(e=t.tapins||(t.tapins={}))}(e=t.hittest||(t.hittest={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a){r.unshift(e.updater);for(var o=!1,s=e.tree.walk(t.WalkDirection.ZReverse);s.step()&&(o=s.current.hitTest(n,r,i,a)||o,!o||a););return e.hitChildren=o,!0}e.insideChildren=n}(n=e.tapins||(e.tapins={}))}(n=e.hittest||(e.hittest={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a){var o=e.assets.clip;if(!o)return!0;var s=o.GetBounds();return t.Rect.transform(s,i.currentTransform),t.Rect.containsPoint(s,n)?(o.Draw(i),i.raw.isPointInPath(n.x,n.y)?!0:(i.restore(),!1)):(i.restore(),!1)}e.insideClip=n}(n=e.tapins||(e.tapins={}))}(n=e.hittest||(e.hittest={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a){if(e.hitChildren)return!0;var o=e.assets.compositeLayoutClip;if(!o||t.Rect.isEmpty(o))return!0;var s=e.layoutClipBounds;return t.Rect.copyTo(o,s),t.Rect.transform(s,i.currentTransform),t.Rect.containsPoint(s,n)?!0:(r.shift(),i.restore(),!1)}e.insideLayoutClip=n}(n=e.tapins||(e.tapins={}))}(n=e.hittest||(e.hittest={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a){if(e.hitChildren)return!0;var o=e.bounds;return t.Rect.copyTo(e.assets.extents,o),t.Rect.transform(o,i.currentTransform),t.Rect.containsPoint(o,n)?!0:(r.shift(),i.restore(),!1)}e.insideObject=n}(n=e.tapins||(e.tapins={}))}(n=e.hittest||(e.hittest={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,n,r,i){return r.save(),r.preapply(t.assets.renderXform),!0}t.prepareCtx=e}(e=t.tapins||(t.tapins={}))}(e=t.hittest||(t.hittest={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){t.applyTemplate=function(t,e,n,r,i){return r.applyTemplate(),!0}}(e=t.tapins||(t.tapins={}))}(e=t.measure||(t.measure={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){e.checkNeedMeasure=function(e,n,r,i,a){if((e.dirtyFlags&t.DirtyFlags.Measure)>0)return!0;var o=e.previousConstraint;return t.Size.isUndef(o)||o.width!==a.width||o.height!==a.height?(t.Size.copyTo(a,r.previousConstraint),!0):!1}}(n=e.tapins||(e.tapins={}))}(n=e.measure||(e.measure={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){e.completeOverride=function(e,n,r,i,a){return r.dirtyFlags&=~t.DirtyFlags.Measure,t.Size.copyTo(r.desiredSize,r.hiddenDesire),!0}}(n=e.tapins||(e.tapins={}))}(n=e.measure||(e.measure={}))}(e=t.core||(t.core={}));
}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){e.doOverride=function(e,n,r,i,a){var o=r.desiredSize;o.width=o.height=0;for(var s=i.walk();s.step();){var c=s.current;c.measure(n.availableSize),t.Size.copyTo(c.assets.desiredSize,o)}return!0}}(n=e.tapins||(e.tapins={}))}(n=e.measure||(e.measure={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(n){var r;!function(n){n.finishDesired=function(n,r,i,a,o){var s=i.desiredSize;return e.helpers.coerceSize(s,n),t.Thickness.growSize(n.margin,s),s.width=Math.min(s.width,o.width),s.height=Math.min(s.height,o.height),n.useLayoutRounding&&(s.width=Math.round(s.width),s.height=Math.round(s.height)),!0}}(r=n.tapins||(n.tapins={}))}(n=e.measure||(e.measure={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){e.invalidateFuture=function(e,n,r,i,a){return r.dirtyFlags|=t.DirtyFlags.Arrange,r.uiFlags|=t.UIFlags.ArrangeHint,r.dirtyFlags|=t.DirtyFlags.Bounds,!0}}(n=e.tapins||(e.tapins={}))}(n=e.measure||(e.measure={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(n){var r;!function(n){n.prepareOverride=function(n,r,i,a,o){return t.Size.copyTo(o,r.availableSize),t.Thickness.shrinkSize(n.margin,r.availableSize),e.helpers.coerceSize(r.availableSize,n),!0}}(r=n.tapins||(n.tapins={}))}(n=e.measure||(e.measure={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){e.validate=function(e,n,r,i,a){return isNaN(a.width)||isNaN(a.height)?(t.layoutError(i,this,"Cannot call Measure using a size with NaN values."),!1):!0}}(n=e.tapins||(e.tapins={}))}(n=e.measure||(e.measure={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){e.validateVisibility=function(e,n,r,i,a){if(e.visibility!==t.Visibility.Visible){t.Size.copyTo(a,r.previousConstraint);var o=r.desiredSize;return o.width=o.height=0,!1}return!0}}(n=e.tapins||(e.tapins={}))}(n=e.measure||(e.measure={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){e.calcAbsoluteXform=function(e,n,r,i,a){if(0===(e.dirtyFlags&t.DirtyFlags.Transform))return!0;var o=r.absoluteXform;return t.mat3.copyTo(r.renderXform,o),i&&t.mat3.apply(o,i.absoluteXform),!0}}(n=e.tapins||(e.tapins={}))}(n=e.processdown||(e.processdown={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){e.calcRenderXform=function(e,n,r,i,a){if(0===(e.dirtyFlags&t.DirtyFlags.Transform))return!0;var o=r.renderXform;return t.mat3.copyTo(n.localXform,o),t.mat3.apply(o,e.layoutXform),e.carrierXform&&t.mat3.apply(o,e.carrierXform),!0}}(n=e.tapins||(e.tapins={}))}(n=e.processdown||(e.processdown={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){t.calcXformOrigin=function(t,e,n,r,i){var a=e.xformOrigin,o=t.renderTransformOrigin;return o?(a.x=t.actualWidth*o.x,a.y=t.actualHeight*o.y):(a.x=0,a.y=0),!0}}(e=t.tapins||(t.tapins={}))}(e=t.processdown||(t.processdown={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){e.processHitTestVisibility=function(e,n,r,i,a){return 0===(e.dirtyFlags&t.DirtyFlags.HitTestVisibility)?!0:(i?r.totalIsHitTestVisible=i.totalIsHitTestVisible&&e.isHitTestVisible:r.totalIsHitTestVisible=e.isHitTestVisible,r.totalIsHitTestVisible!==e.totalIsHitTestVisible&&(n.subtreeDownDirty|=t.DirtyFlags.HitTestVisibility),!0)}}(n=e.tapins||(e.tapins={}))}(n=e.processdown||(e.processdown={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){e.processLayoutClip=function(e,n,r,i,a){if(0===(e.dirtyFlags&t.DirtyFlags.LayoutClip))return!0;var o=e.layoutClip,s=r.compositeLayoutClip;return!i||t.Rect.isEmpty(i.compositeLayoutClip)?t.Rect.copyTo(o,s):(t.Rect.copyTo(i.compositeLayoutClip,s),t.Rect.isEmpty(o)||t.Rect.intersection(s,o)),t.Rect.isEqual(e.compositeLayoutClip,r.compositeLayoutClip)||(n.subtreeDownDirty|=t.DirtyFlags.LayoutClip),!0}}(n=e.tapins||(e.tapins={}))}(n=e.processdown||(e.processdown={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){e.processLocalXform=function(e,n,r,i,a){if(0===(e.dirtyFlags&t.DirtyFlags.LocalTransform))return!0;var o=t.mat3.identity(n.localXform),s=e.renderTransform;if(!s)return!0;var c=n.xformOrigin;return t.mat3.translate(o,-c.x,-c.y),t.mat3.apply(o,s.getRaw()),t.mat3.translate(o,c.x,c.y),!0}}(n=e.tapins||(e.tapins={}))}(n=e.processdown||(e.processdown={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){e.processRenderVisibility=function(e,n,r,i,a){return 0===(e.dirtyFlags&t.DirtyFlags.RenderVisibility)?!0:(r.dirtyFlags|=t.DirtyFlags.Bounds,i?(r.totalOpacity=i.totalOpacity*e.opacity,r.totalIsRenderVisible=i.totalIsRenderVisible&&e.visibility===t.Visibility.Visible):(r.totalOpacity=e.opacity,r.totalIsRenderVisible=e.visibility===t.Visibility.Visible),e.totalIsRenderVisible!==r.totalIsRenderVisible&&(r.dirtyFlags|=t.DirtyFlags.NewBounds,n.subtreeDownDirty|=t.DirtyFlags.RenderVisibility),e.totalOpacity!==r.totalOpacity&&(n.subtreeDownDirty|=t.DirtyFlags.RenderVisibility),!0)}}(n=e.tapins||(e.tapins={}))}(n=e.processdown||(e.processdown={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){e.processXform=function(e,n,r,i,a){return 0===(e.dirtyFlags&t.DirtyFlags.Transform)?!0:(t.mat3.equal(e.renderXform,r.renderXform)?t.mat3.equal(e.absoluteXform,r.absoluteXform)||(n.subtreeDownDirty|=t.DirtyFlags.Transform):(r.dirtyFlags|=t.DirtyFlags.NewBounds,n.subtreeDownDirty|=t.DirtyFlags.Transform),r.dirtyFlags|=t.DirtyFlags.Bounds,!0)}}(n=e.tapins||(e.tapins={}))}(n=e.processdown||(e.processdown={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(n){var r;!function(n){n.propagateDirtyToChildren=function(n,r,i,a,o){var s=r.subtreeDownDirty&t.DirtyFlags.PropagateDown;if(0===s)return!0;for(var c=o.walk();c.step();)c.current.assets.dirtyFlags|=s,e.Updater.$$addDownDirty(c.current);return!0}}(r=n.tapins||(n.tapins={}))}(n=e.processdown||(e.processdown={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(n){var r;!function(n){n.calcActualSize=function(n,r,i,a){if(0===(n.dirtyFlags&t.DirtyFlags.Bounds))return!0;var o=r.actualSize;return o.width=n.actualWidth,o.height=n.actualHeight,e.helpers.coerceSize(o,n),isNaN(o.width)&&(o.width=0),isNaN(o.height)&&(o.height=0),!0}}(r=n.tapins||(n.tapins={}))}(n=e.processup||(e.processup={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){e.calcExtents=function(e,n,r,i){if(0===(e.dirtyFlags&t.DirtyFlags.Bounds))return!0;var a=r.extents,o=r.extentsWithChildren;a.x=o.x=0,a.y=o.y=0;var s=n.actualSize;a.width=o.width=s.width,a.height=o.height=s.height;for(var c,u=i.walk();u.step();)c=u.current.assets,c.totalIsRenderVisible&&t.Rect.union(o,c.globalBoundsWithChildren);return!0}}(n=e.tapins||(e.tapins={}))}(n=e.processup||(e.processup={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(n){var r;!function(n){n.calcPaintBounds=function(n,r,i,a){return 0===(n.dirtyFlags&t.DirtyFlags.Bounds)?!0:(e.helpers.intersectBoundsWithClipPath(i.globalBoundsWithChildren,i.extentsWithChildren,n.effectPadding,n.renderXform,n.clip,n.layoutClip),e.helpers.intersectBoundsWithClipPath(i.surfaceBoundsWithChildren,i.extentsWithChildren,n.effectPadding,n.absoluteXform,n.clip,n.layoutClip),!0)}}(r=n.tapins||(n.tapins={}))}(n=e.processup||(e.processup={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){e.processBounds=function(e,n,r,i){if(0===(e.dirtyFlags&t.DirtyFlags.Bounds))return!0;if(n.hasNewBounds=!1,t.Rect.isEqual(e.globalBoundsWithChildren,r.globalBoundsWithChildren))(!t.Rect.isEqual(e.extentsWithChildren,r.extentsWithChildren)||e.forceInvalidate)&&(n.hasNewBounds=!0);else{var a=i.visualOwner;a.updateBounds(),a.invalidate(e.surfaceBoundsWithChildren),n.hasNewBounds=!0}return r.forceInvalidate=!1,!0}}(n=e.tapins||(e.tapins={}))}(n=e.processup||(e.processup={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){e.processInvalidate=function(e,n,r,i){if(0===(e.dirtyFlags&t.DirtyFlags.Invalidate)&&!n.hasInvalidate)return!0;var a=r.dirtyRegion;return i.visualOwner.invalidate(a),a.x=a.y=a.width=a.height=0,!0}}(n=e.tapins||(e.tapins={}))}(n=e.processup||(e.processup={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){e.processNewBounds=function(e,n,r,i){return 0!==(e.dirtyFlags&t.DirtyFlags.NewBounds)||n.hasNewBounds?(r.dirtyFlags|=t.DirtyFlags.Invalidate,n.hasInvalidate=!0,t.Rect.union(r.dirtyRegion,r.surfaceBoundsWithChildren),!0):!0}}(n=e.tapins||(e.tapins={}))}(n=e.processup||(e.processup={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){t.applyClip=function(t,e,n,r,i,a){var o=t.clip;return o&&r.clipGeometry(o),!0}}(e=t.tapins||(t.tapins={}))}(e=t.render||(t.render={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){t.doRender=function(t,e,n,r,i,a){return!0}}(e=t.tapins||(t.tapins={}))}(e=t.render||(t.render={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){t.postRender=function(t,e,n,r,i,a){var o=t.effect;return o?(o.PostRender(r),r.restore(),!0):!0}}(e=t.tapins||(t.tapins={}))}(e=t.render||(t.render={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){t.preRender=function(t,e,n,r,i,a){var o=t.effect;return o?(r.save(),o.PreRender(r),!0):!0}}(e=t.tapins||(t.tapins={}))}(e=t.render||(t.render={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){t.prepareContext=function(t,e,n,r,i,a){return r.save(),r.preapply(t.renderXform),r.raw.globalAlpha=t.totalOpacity,!0}}(e=t.tapins||(t.tapins={}))}(e=t.render||(t.render={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){e.renderChildren=function(e,n,r,i,a,o){for(var s=o.walk(t.WalkDirection.ZForward);s.step();)s.current.render(i,n.renderRegion);return!0}}(n=e.tapins||(e.tapins={}))}(n=e.render||(e.render={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){t.restoreContext=function(t,e,n,r,i,a){return r.restore(),!0}}(e=t.tapins||(t.tapins={}))}(e=t.render||(t.render={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){t.validate=function(t,e,n,r,i,a){return!!t.totalIsRenderVisible&&255*t.totalOpacity>=.5}}(e=t.tapins||(t.tapins={}))}(e=t.render||(t.render={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){e.validateRegion=function(e,n,r,i,a,o){var s=n.renderRegion;return t.Rect.copyTo(e.surfaceBoundsWithChildren,s),t.Rect.roundOut(s),t.Rect.intersection(s,a),s.width>0&&s.height>0}}(n=e.tapins||(e.tapins={}))}(n=e.render||(e.render={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){t.calcUseRender=function(t,e,n,r){return e.useRender=!0,!0}}(e=t.tapins||(t.tapins={}))}(e=t.sizing||(t.sizing={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(n){var r;!function(n){n.computeActual=function(n,r,i,a){var o=i.actualSize;return o.width=o.height=0,n.visibility!==t.Visibility.Visible?!0:r.useRender?(t.Size.copyTo(n.renderSize,o),!0):(e.helpers.coerceSize(o,n),!0)}}(r=n.tapins||(n.tapins={}))}(n=e.sizing||(e.sizing={}))}(e=t.core||(t.core={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a){if(!i.subtree)return!0;var o=n.totalBorder;t.Thickness.copyTo(e.padding,o),t.Thickness.add(o,e.borderThickness);var s=n.childRect;return s.x=s.y=0,t.Size.copyTo(n.finalSize,s),t.Thickness.shrinkRect(o,s),!0}function r(e,n,r,i,a){return i.subtree&&i.subtree.arrange(n.childRect),t.Size.copyTo(n.finalSize,n.arrangedSize),!0}var i=function(e){function i(){e.call(this),this.addTapinBefore("doOverride","preOverride",n).replaceTapin("doOverride",r)}return __extends(i,e),i.prototype.createState=function(){var n=e.prototype.createState.call(this);return n.totalBorder=new t.Thickness,n},i}(t.core.arrange.ArrangePipeDef);e.BorderArrangePipeDef=i,e.preOverride=n,e.doOverride=r}(n=e.arrange||(e.arrange={}))}(n=e.border||(e.border={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(t){function e(){t.call(this),this.replaceTapin("canHitInside",r.canHitInside)}return __extends(e,t),e}(t.core.hittest.HitTestPipeDef);e.BorderHitTestPipeDef=n;var r;!function(t){function e(t,e,n,r){return t.hitChildren?!0:t.assets.background||t.assets.borderBrush?!0:(n.shift(),r.restore(),!1)}t.canHitInside=e}(r=e.tapins||(e.tapins={}))}(n=e.hittest||(e.hittest={}))}(n=e.border||(e.border={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a){var o=n.totalBorder;return t.Thickness.copyTo(e.padding,o),t.Thickness.add(o,e.borderThickness),t.Thickness.shrinkSize(o,n.availableSize),!0}function r(e,n,r,i,a){var o=r.desiredSize;return i.subtree&&(i.subtree.measure(n.availableSize),t.Size.copyTo(i.subtree.assets.desiredSize,o)),!0}function i(e,n,r,i,a){return t.Thickness.growSize(n.totalBorder,r.desiredSize),t.Size.min(r.desiredSize,n.availableSize),!0}var a=function(e){function a(){e.call(this),this.addTapinBefore("doOverride","preOverride",n).replaceTapin("doOverride",r).addTapinAfter("doOverride","postOverride",i)}return __extends(a,e),a.prototype.createState=function(){var n=e.prototype.createState.call(this);return n.totalBorder=new t.Thickness,n},a}(t.core.measure.MeasurePipeDef);e.BorderMeasurePipeDef=a,e.preOverride=n,e.doOverride=r,e.postOverride=i}(n=e.measure||(e.measure={}))}(n=e.border||(e.border={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(n){function r(){n.call(this),this.addTapinBefore("doRender","calcShouldRender",e.tapins.calcShouldRender).addTapinBefore("doRender","calcInnerOuter",e.tapins.calcInnerOuter).replaceTapin("doRender",e.tapins.doRender)}return __extends(r,n),r.prototype.createState=function(){var e=n.prototype.createState.call(this);return e.fillExtents=new t.Rect,e.innerCornerRadius=new t.CornerRadius,e.outerCornerRadius=new t.CornerRadius,e},r}(t.core.render.RenderPipeDef);e.BorderRenderPipeDef=n}(n=e.render||(e.render={}))}(n=e.border||(e.border={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(n){function r(){n.call(this),this.addTapinBefore("doRender","calcBalanced",e.tapins.shim.calcBalanced).addTapinBefore("doRender","invalidatePattern",e.tapins.shim.invalidatePattern).addTapinBefore("doRender","createPattern",e.tapins.shim.createPattern).replaceTapin("doRender",e.tapins.shim.doRender)}return __extends(r,n),r.prototype.createState=function(){var e=n.prototype.createState.call(this);return e.middleCornerRadius=new t.CornerRadius,e.strokeExtents=new t.Rect,e.pattern=null,e.oldMetrics=null,e},r}(e.BorderRenderPipeDef);e.ShimBorderRenderPipeDef=n}(n=e.render||(e.render={}))}(n=e.border||(e.border={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(t){function n(){t.call(this),this.replaceTapin("doOverride",e.tapins.doOverride)}return __extends(n,t),n}(t.core.arrange.ArrangePipeDef);e.PanelArrangePipeDef=n}(n=e.arrange||(e.arrange={}))}(n=e.panel||(e.panel={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(e){var n;!function(e){var n=function(t){function n(){t.call(this),this.replaceTapin("doOverride",e.tapins.doOverride).replaceTapin("buildLayoutClip",e.tapins.buildLayoutClip)}return __extends(n,t),n}(t.panel.arrange.PanelArrangePipeDef);e.CanvasArrangePipeDef=n}(n=e.arrange||(e.arrange={}))}(e=t.canvas||(t.canvas={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){function n(t,e,n,r,i){var a=n.desiredSize;a.width=a.height=0;for(var o=r.walk();o.step();){o.current.measure(e.availableSize);var s=o.current.assets.desiredSize;a.width=Math.max(a.width,s.width),a.height=Math.max(a.height,s.height)}return!0}var r=function(t){function e(){t.call(this),this.replaceTapin("doOverride",n)}return __extends(e,t),e}(t.core.measure.MeasurePipeDef);e.PanelMeasurePipeDef=r}(n=e.measure||(e.measure={}))}(n=e.panel||(e.panel={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(e){var n;!function(e){var n=function(t){function n(){t.call(this),this.replaceTapin("doOverride",e.tapins.doOverride)}return __extends(n,t),n}(t.panel.measure.PanelMeasurePipeDef);e.CanvasMeasurePipeDef=n}(n=e.measure||(e.measure={}))}(e=t.canvas||(t.canvas={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(t){function e(){t.call(this),this.replaceTapin("processLayoutClip",r.processLayoutClip)}return __extends(e,t),e}(t.core.processdown.ProcessDownPipeDef);e.CanvasProcessDownPipeDef=n;var r;!function(e){function n(e,n,r,i,a){if(0===(e.dirtyFlags&t.DirtyFlags.LayoutClip))return!0;var o=e.compositeLayoutClip;return o.x=o.y=o.width=o.height,!0}e.processLayoutClip=n}(r=e.tapins||(e.tapins={}))}(n=e.processdown||(e.processdown={}))}(n=e.canvas||(e.canvas={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(t){function n(){t.call(this),this.replaceTapin("calcPaintBounds",e.tapins.calcPaintBounds)}return __extends(n,t),n}(t.core.processup.ProcessUpPipeDef);e.CanvasProcessUpPipeDef=n}(n=e.processup||(e.processup={}))}(n=e.canvas||(e.canvas={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(t){function e(){t.call(this),this.addTapinBefore("canHit","shouldSkip",r.shouldSkip).replaceTapin("canHitInside",r.canHitInside)}return __extends(e,t),e}(t.core.hittest.HitTestPipeDef);e.ControlHitTestPipeDef=n;var r;!function(t){function e(t,e,n,r){return!!t.assets.isEnabled}function n(t,e,n,r){return t.hitChildren?!0:(n.shift(),r.restore(),!1)}t.shouldSkip=e,t.canHitInside=n}(r=e.tapins||(e.tapins={}))}(n=e.hittest||(e.hittest={}))}(n=e.control||(e.control={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(n){var r;!function(n){var r=function(e){function r(){e.call(this),this.addTapinBefore("doOverride","restoreMeasureResults",n.tapins.restoreMeasureResults).addTapinBefore("doOverride","calcConsumed",n.tapins.calcConsumed).addTapinBefore("doOverride","setActuals",n.tapins.setActuals).replaceTapin("doOverride",n.tapins.doOverride)}return __extends(r,e),r.prototype.createState=function(){var n=e.prototype.createState.call(this);return n.consumed=new t.Size,n},r}(e.panel.arrange.PanelArrangePipeDef);n.GridArrangePipeDef=r}(r=n.arrange||(n.arrange={}))}(n=e.grid||(e.grid={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(e){function n(n,r){for(var i=0;2>i;i++)for(var a=0===i?n:r,o=a.length,s=o-1;s>=0;s--)for(var c=s;c>=0;c--){for(var u=!1,l=s;l>=c;l--)u=u||a[l][l].type===t.GridUnitType.Star;for(var h=a[s][c].desired,p=0,f=s;f>=c;f--)p+=a[f][f].desired;if(h>p){var d=h-p;u?d=e.assignSize(a,c,s,d,t.GridUnitType.Star,!0):(d=e.assignSize(a,c,s,d,t.GridUnitType.Pixel,!0),d=e.assignSize(a,c,s,d,t.GridUnitType.Auto,!0))}}for(var i=0;i<n.length;i++)n[i][i].offered=n[i][i].desired;for(var i=0;i<a.length;i++)r[i][i].offered=r[i][i].desired}e.allocateDesiredSize=n}(e=t.helpers||(t.helpers={}))}(e=t.grid||(t.grid={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(e){function n(e,n,r,i,a,o){for(var s=0,c=!1,u=0,l=n;r>=l;l++){var h=e[l][l];u=o?h.desired:h.offered,u<h.max&&(s+=a===t.GridUnitType.Star?h.stars:1)}do{c=!1;var p=i/s;for(l=n;r>=l;l++)if(h=e[l][l],u=o?h.desired:h.offered,h.type===a&&u<h.max){var f=u;f+=p*(a===t.GridUnitType.Star?h.stars:1),f=Math.min(f,h.max),c=c||f>u,i-=f-u,o?h.desired=f:h.offered=f}}while(c);return i}e.assignSize=n}(e=t.helpers||(t.helpers={}))}(e=t.grid||(t.grid={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(e){function n(n,r,i){for(var a=i.width,o=0;o<n.length;o++){var s=n[o][o];s.type===t.GridUnitType.Star?s.offered=0:a=Math.max(a-s.offered,0)}a=e.assignSize(n,0,n.length-1,a,t.GridUnitType.Star,!1);for(var o=0;o<r.length;o++){var s=n[o][o];s.type===t.GridUnitType.Star&&r[o].setActualWidth(s.offered)}}e.expandStarCols=n}(e=t.helpers||(t.helpers={}))}(e=t.grid||(t.grid={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(e){function n(n,r,i){for(var a=i.height,o=0;o<n.length;o++){var s=n[o][o];s.type===t.GridUnitType.Star?s.offered=0:a=Math.max(a-s.offered,0)}a=e.assignSize(n,0,n.length-1,a,t.GridUnitType.Star,!1);for(var o=0;o<r.length;o++){var s=n[o][o];s.type===t.GridUnitType.Star&&r[o].setActualHeight(s.offered)}}e.expandStarRows=n}(e=t.helpers||(t.helpers={}))}(e=t.grid||(t.grid={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(t,e,n,r){this.matrix=t,this.row=e,this.col=n,this.size=r}return t.row=function(e,n,r){return new t(e,n.row+n.rowspan-1,n.row,r.assets.desiredSize.height)},t.col=function(e,n,r){return new t(e,n.col+n.colspan-1,n.col,r.assets.desiredSize.width)},t}();t.GridChildPlacement=e}(e=t.measure||(t.measure={}))}(e=t.grid||(t.grid={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(e){!function(t){t[t.AutoAuto=0]="AutoAuto",t[t.StarAuto=1]="StarAuto",t[t.AutoStar=2]="AutoStar",t[t.StarAutoAgain=3]="StarAutoAgain",t[t.NonStar=4]="NonStar",t[t.RemainingStar=5]="RemainingStar"}(e.OverridePass||(e.OverridePass={}));var n=e.OverridePass,r=function(){function e(){}return e.prototype.init=function(e,n,r){var i=this.col=Math.min(e.getAttachedValue("Grid.Column"),r.length-1);isNaN(i)&&(this.col=i=0);var a=this.row=Math.min(e.getAttachedValue("Grid.Row"),n.length-1);isNaN(a)&&(this.row=a=0);var o=this.colspan=Math.min(e.getAttachedValue("Grid.ColumnSpan"),r.length-i);isNaN(o)&&(this.colspan=o=1);var s=this.rowspan=Math.min(e.getAttachedValue("Grid.RowSpan"),n.length-a);isNaN(s)&&(this.rowspan=s=1),this.starRow=this.autoRow=this.starCol=this.autoCol=!1;for(var c=a;a+s>c;c++)this.starRow=this.starRow||n[c][c].type===t.GridUnitType.Star,this.autoRow=this.autoRow||n[c][c].type===t.GridUnitType.Auto;for(var c=i;i+o>c;c++)this.starCol=this.starCol||r[c][c].type===t.GridUnitType.Star,this.autoCol=this.autoCol||r[c][c].type===t.GridUnitType.Auto;return this},e.prototype.shouldMeasurePass=function(t,e,r){return e.width=e.height=0,this.autoRow&&this.autoCol&&!this.starRow&&!this.starCol?r!==n.AutoAuto?!1:(e.width=Number.POSITIVE_INFINITY,e.height=Number.POSITIVE_INFINITY,!0):this.starRow&&this.autoCol&&!this.starCol?r!==n.StarAuto&&r!==n.StarAutoAgain?!1:(r===n.AutoAuto&&t.hasAutoStar&&(e.height=Number.POSITIVE_INFINITY),e.width=Number.POSITIVE_INFINITY,!0):this.autoRow&&this.starCol&&!this.starRow?r!==n.AutoStar?!1:(e.height=Number.POSITIVE_INFINITY,!0):!this.autoRow&&!this.autoCol||this.starRow||this.starCol?this.starRow||this.starCol?r===n.RemainingStar:r===n.NonStar:r!==n.NonStar?!1:(this.autoRow&&(e.height=Number.POSITIVE_INFINITY),this.autoCol&&(e.width=Number.POSITIVE_INFINITY),!0)},e.prototype.size=function(t,e,n){for(var r=this.row;r<this.row+this.rowspan;r++)t.height+=e[r][r].offered;for(var r=this.col;r<this.col+this.colspan;r++)t.width+=n[r][r].offered},e}();e.GridChildShape=r}(e=t.measure||(t.measure={}))}(e=t.grid||(t.grid={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(n){var r;!function(n){var r=function(e){function r(){e.call(this),this.addTapinBefore("doOverride","ensureRowMatrix",n.tapins.ensureRowMatrix).addTapinBefore("doOverride","prepareRowMatrix",n.tapins.prepareRowMatrix).addTapinBefore("doOverride","ensureColMatrix",n.tapins.ensureColMatrix).addTapinBefore("doOverride","prepareColMatrix",n.tapins.prepareColMatrix).addTapinBefore("doOverride","buildShape",n.tapins.buildShape).addTapinBefore("doOverride","doOverrideAutoAuto",n.tapins.createDoOverridePass(n.OverridePass.AutoAuto)).addTapinBefore("doOverride","doOverrideStarAuto",n.tapins.createDoOverridePass(n.OverridePass.StarAuto)).addTapinBefore("doOverride","doOverrideAutoStar",n.tapins.createDoOverridePass(n.OverridePass.AutoStar)).addTapinBefore("doOverride","doOverrideStarAutoAgain",n.tapins.createDoOverridePass(n.OverridePass.StarAutoAgain)).addTapinBefore("doOverride","doOverrideNonStar",n.tapins.createDoOverridePass(n.OverridePass.NonStar)).addTapinBefore("doOverride","doOverrideRemainingStar",n.tapins.createDoOverridePass(n.OverridePass.RemainingStar)).replaceTapin("doOverride",n.tapins.doOverride).addTapinAfter("doOverride","saveMeasureResults",n.tapins.saveMeasureResults)}return __extends(r,e),r.prototype.createState=function(){var r=e.prototype.createState.call(this);return r.totalStars=new t.Size,r.gridShape=new n.GridShape,r.childShapes=[],r.childSize=new t.Size,r.placements=[],r.placementIndex=0,r},r}(e.panel.measure.PanelMeasurePipeDef);n.GridMeasurePipeDef=r}(r=n.measure||(n.measure={}))}(n=e.grid||(e.grid={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){this.hasAutoAuto=!1,this.hasStarAuto=!1,this.hasAutoStar=!1}return t.prototype.init=function(t){this.hasAutoAuto=this.hasStarAuto=this.hasAutoStar=!1;for(var e=0;e<t.length;e++){var n=t[e];this.hasAutoAuto=this.hasAutoAuto||n.autoRow&&n.autoCol&&!n.starRow&&!n.starCol,this.hasStarAuto=this.hasStarAuto||n.starRow&&n.autoCol,this.hasAutoStar=this.hasAutoStar||n.autoRow&&n.starCol}},t}();t.GridShape=e}(e=t.measure||(t.measure={}))}(e=t.grid||(t.grid={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(t){function n(){t.call(this),this.addTapinBefore("calcExtents","preCalcExtents",e.tapins.preCalcExtents)}return __extends(n,t),n}(t.core.processup.ProcessUpPipeDef);e.PanelProcessUpPipeDef=n}(n=e.processup||(e.processup={}))}(n=e.panel||(e.panel={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(e){var n;!function(e){var n=function(t){function n(){t.call(this),this.replaceTapin("preCalcExtents",e.tapins.preCalcExtents).replaceTapin("calcExtents",e.tapins.calcExtents)}return __extends(n,t),n}(t.panel.processup.PanelProcessUpPipeDef);e.GridProcessUpPipeDef=n}(n=e.processup||(e.processup={}))}(e=t.grid||(t.grid={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a,o){var s=e.background;if(!s||s.isTransparent())return!0;var c=e.extents;if(t.Rect.isEmpty(c))return!0;i.save(),t.core.helpers.renderLayoutClip(i,e,o);var u=i.raw;return u.beginPath(),u.rect(c.x,c.y,c.width,c.height),i.fillEx(s,c),i.restore(),!0}var r=function(t){function e(){t.call(this),this.replaceTapin("doRender",n)}return __extends(e,t),e}(t.core.render.RenderPipeDef);e.PanelRenderPipeDef=r}(n=e.render||(e.render={}))}(n=e.panel||(e.panel={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(n){var r;!function(n){var r=function(e){function n(){e.call(this),this.addTapinAfter("doRender","renderGridLines",i.renderGridLines)}return __extends(n,e),n.prototype.createState=function(){var n=e.prototype.createState.call(this);return n.framework=new t.Size,n},n}(e.panel.render.PanelRenderPipeDef);n.GridRenderPipeDef=r;var i;!function(e){function n(e,n,r,i,a,o){if(!e.showGridLines)return!0;var s=n.framework;s.width=e.actualWidth,s.height=e.actualHeight,t.core.helpers.coerceSize(s,e);var c=i.raw;c.save();for(var u=e.columnDefinitions,l=0,h=0;l<u.length;l++)h+=u[l].ActualWidth,c.beginPath(),c.setLineDash([5]),c.moveTo(h,0),c.lineTo(h,s.height),c.stroke();for(var p=e.rowDefinitions,l=0,f=0;l<p.length;l++)f+=p[l].ActualHeight,c.beginPath(),c.setLineDash([5]),c.moveTo(0,f),c.lineTo(s.width,f),c.stroke();return c.restore(),!0}e.renderGridLines=n}(i=n.tapins||(n.tapins={}))}(r=n.render||(n.render={}))}(n=e.grid||(e.grid={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(n){function r(){n.call(this),this.addTapinAfter("invalidateFuture","invalidateMetrics",e.tapins.invalidateMetrics).addTapinBefore("doOverride","calcImageBounds",e.tapins.calcImageBounds).addTapinBefore("doOverride","calcStretch",e.tapins.calcStretch).replaceTapin("doOverride",e.tapins.doOverride)}return __extends(r,n),r.prototype.createState=function(){var e=n.prototype.createState.call(this);return e.imageBounds=new t.Rect,e.stretchX=0,e.stretchY=0,e},r}(t.core.arrange.ArrangePipeDef);e.ImageArrangePipeDef=n}(n=e.arrange||(e.arrange={}))}(n=e.image||(e.image={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(n){function r(){n.call(this),this.replaceTapin("insideChildren",e.tapins.insideChildren).replaceTapin("canHitInside",e.tapins.canHitInside).addTapinAfter("insideObject","insideStretch",e.tapins.insideStretch)}return __extends(r,n),r.prototype.prepare=function(e){e.imgRect=e.imgRect||new t.Rect},r}(t.core.hittest.HitTestPipeDef);e.ImageHitTestPipeDef=n}(n=e.hittest||(e.hittest={}));
}(n=e.image||(e.image={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(n){function r(){n.call(this),this.addTapinBefore("doOverride","calcImageBounds",e.tapins.calcImageBounds).addTapinBefore("doOverride","calcStretch",e.tapins.calcStretch).replaceTapin("doOverride",e.tapins.doOverride)}return __extends(r,n),r.prototype.createState=function(){var e=n.prototype.createState.call(this);return e.imageBounds=new t.Rect,e.stretchX=0,e.stretchY=0,e},r}(t.core.measure.MeasurePipeDef);e.ImageMeasurePipeDef=n}(n=e.measure||(e.measure={}))}(n=e.image||(e.image={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(n){function r(){n.call(this),this.addTapinBefore("processLayoutClip","checkNeedImageMetrics",e.tapins.checkNeedImageMetrics).addTapinAfter("checkNeedImageMetrics","prepareImageMetrics",e.tapins.prepareImageMetrics).addTapinAfter("prepareImageMetrics","calcImageTransform",e.tapins.calcImageTransform).addTapinAfter("calcImageTransform","calcOverlap",e.tapins.calcOverlap)}return __extends(r,n),r.prototype.createState=function(){var e=n.prototype.createState.call(this);return e.imgRect=new t.Rect,e.paintRect=new t.Rect,e.calcImageMetrics=!1,e.imgAdjust=!1,e},r.prototype.createOutput=function(){var e=n.prototype.createOutput.call(this);return e.imgXform=t.mat3.identity(),e.overlap=t.RectOverlap.In,e},r.prototype.prepare=function(e,r,i,a,o){n.prototype.prepare.call(this,e,r,i,a,o),i.overlap=e.overlap,t.mat3.copyTo(e.imgXform,i.imgXform)},r.prototype.flush=function(e,r,i,a,o){n.prototype.flush.call(this,e,r,i,a,o),e.overlap=i.overlap,t.mat3.copyTo(i.imgXform,e.imgXform)},r}(t.core.processdown.ProcessDownPipeDef);e.ImageProcessDownPipeDef=n}(n=e.processdown||(e.processdown={}))}(n=e.image||(e.image={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(t){function n(){t.call(this),this.replaceTapin("doRender",e.tapins.doRender)}return __extends(n,t),n}(t.core.render.RenderPipeDef);e.ImageRenderPipeDef=n}(n=e.render||(e.render={}))}(n=e.image||(e.image={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(t){function e(){t.call(this),this.addTapinBefore("canHit","shouldSkip",r.shouldSkip)}return __extends(e,t),e}(t.core.hittest.HitTestPipeDef);e.OverlayHitTestPipeDef=n;var r;!function(t){function e(t,e,n,r){return!!t.assets.isVisible}t.shouldSkip=e}(r=e.tapins||(e.tapins={}))}(n=e.hittest||(e.hittest={}))}(n=e.overlay||(e.overlay={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(t){function e(){t.call(this),this.removeTapin("calcActualSize").removeTapin("calcExtents").removeTapin("calcPaintBounds")}return __extends(e,t),e}(t.core.processup.ProcessUpPipeDef);e.OverlayProcessUpPipeDef=n}(n=e.processup||(e.processup={}))}(n=e.overlay||(e.overlay={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(t){function e(){t.call(this),this.replaceTapin("canHitInside",r.canHitInside)}return __extends(e,t),e}(t.core.hittest.HitTestPipeDef);e.PanelHitTestPipeDef=n;var r;!function(t){function e(t,e,n,r){return t.hitChildren?!0:t.assets.background?!0:(n.shift(),r.restore(),!1)}t.canHitInside=e}(r=e.tapins||(e.tapins={}))}(n=e.hittest||(e.hittest={}))}(n=e.panel||(e.panel={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(t){function e(){t.call(this),this.addTapinBefore("canHit","shouldSkip",r.shouldSkip)}return __extends(e,t),e}(t.core.hittest.HitTestPipeDef);e.PopupHitTestPipeDef=n;var r;!function(t){function e(t,e,n,r){return!!t.assets.isVisible}t.shouldSkip=e}(r=e.tapins||(e.tapins={}))}(n=e.hittest||(e.hittest={}))}(n=e.popup||(e.popup={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(t){function n(){t.call(this),this.addTapinBefore("processXform","preProcessXform",e.tapins.preProcessXform).addTapinAfter("processXform","postProcessXform",e.tapins.postProcessXform)}return __extends(n,t),n}(t.core.processdown.ProcessDownPipeDef);e.PopupProcessDownPipeDef=n}(n=e.processdown||(e.processdown={}))}(n=e.popup||(e.popup={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(t){function e(){t.call(this),this.removeTapin("calcActualSize").removeTapin("calcExtents").removeTapin("calcPaintBounds")}return __extends(e,t),e}(t.core.processup.ProcessUpPipeDef);e.PopupProcessUpPipeDef=n}(n=e.processup||(e.processup={}))}(n=e.popup||(e.popup={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(n){function r(){n.call(this),this.replaceTapin("doOverride",e.tapins.doOverride).addTapinAfter("completeOverride","updateClip",e.tapins.updateClip).addTapinAfter("updateClip","updateExtents",e.tapins.updateExtents)}return __extends(r,n),r.prototype.createOutput=function(){var e=n.prototype.createOutput.call(this);return e.internalClip=new t.Rect,e},r.prototype.prepare=function(e,r,i){t.Rect.copyTo(e.internalClip,i.internalClip),n.prototype.prepare.call(this,e,r,i)},r.prototype.flush=function(e,r,i){n.prototype.flush.call(this,e,r,i),t.Rect.copyTo(i.internalClip,e.internalClip)},r}(t.core.arrange.ArrangePipeDef);e.ScrollContentPresenterArrangePipeDef=n}(n=e.arrange||(e.arrange={}))}(n=e.scrollcontentpresenter||(e.scrollcontentpresenter={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(n){function r(){n.call(this),this.replaceTapin("doOverride",e.tapins.doOverride).addTapinAfter("doOverride","updateExtents",e.tapins.updateExtents).addTapinAfter("updateExtents","finishDoOverride",e.tapins.finishDoOverride)}return __extends(r,n),r.prototype.createState=function(){var e=n.prototype.createState.call(this);return e.idealSize=new t.Size,e},r}(t.core.measure.MeasurePipeDef);e.ScrollContentPresenterMeasurePipeDef=n}(n=e.measure||(e.measure={}))}(n=e.scrollcontentpresenter||(e.scrollcontentpresenter={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(t){function e(){t.call(this),this.addTapinAfter("applyClip","applyInternalClip",r.applyInternalClip)}return __extends(e,t),e}(t.core.render.RenderPipeDef);e.ScrollContentPresenterRenderPipeDef=n;var r;!function(e){function n(e,n,r,i,a,o){return t.Rect.isEmpty(e.internalClip)?!0:(i.clipRect(e.internalClip),!0)}e.applyInternalClip=n}(r=e.tapins||(e.tapins={}))}(n=e.render||(e.render={}))}(n=e.scrollcontentpresenter||(e.scrollcontentpresenter={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(e){var n;!function(e){var n=function(t){function n(){t.call(this),this.replaceTapin("doOverride",e.tapins.doOverride).addTapinAfter("doOverride","doHorizontal",e.tapins.doHorizontal).addTapinAfter("doOverride","doVertical",e.tapins.doVertical)}return __extends(n,t),n}(t.panel.arrange.PanelArrangePipeDef);e.StackPanelArrangePipeDef=n}(n=e.arrange||(e.arrange={}))}(e=t.stackpanel||(t.stackpanel={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(n){var r;!function(n){var r=function(e){function r(){e.call(this),this.replaceTapin("doOverride",n.tapins.doOverride).addTapinAfter("doOverride","doHorizontal",n.tapins.doHorizontal).addTapinAfter("doOverride","doVertical",n.tapins.doVertical)}return __extends(r,e),r.prototype.createState=function(){var n=e.prototype.createState.call(this);return n.childAvailable=new t.Size,n},r}(e.panel.measure.PanelMeasurePipeDef);n.StackPanelMeasurePipeDef=r}(r=n.measure||(n.measure={}))}(n=e.stackpanel||(e.stackpanel={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(t){function e(){t.call(this),this.replaceTapin("doOverride",r.doOverride)}return __extends(e,t),e}(t.core.arrange.ArrangePipeDef);e.TextBlockArrangePipeDef=n;var r;!function(e){function n(e,n,r,i,a){var o=n.finalSize,s=n.arrangedSize;return t.Thickness.shrinkSize(e.padding,o),t.Size.copyTo(i.layout(o,e),s),s.width=Math.max(s.width,o.width),s.height=Math.max(s.height,o.height),i.setAvailableWidth(o.width),t.Thickness.growSize(e.padding,s),!0}e.doOverride=n}(r=e.tapins||(e.tapins={}))}(n=e.arrange||(e.arrange={}))}(n=e.textblock||(e.textblock={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(t){function e(){t.call(this),this.replaceTapin("canHitInside",r.canHitInside)}return __extends(e,t),e}(t.core.hittest.HitTestPipeDef);e.TextBlockHitTestPipeDef=n;var r;!function(t){function e(t,e,n,r){return!0}t.canHitInside=e}(r=e.tapins||(e.tapins={}))}(n=e.hittest||(e.hittest={}))}(n=e.textblock||(e.textblock={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(t){function e(){t.call(this),this.replaceTapin("doOverride",r.doOverride)}return __extends(e,t),e}(t.core.measure.MeasurePipeDef);e.TextBlockMeasurePipeDef=n;var r;!function(e){function n(e,n,r,i,a){var o=r.desiredSize;return t.Thickness.shrinkSize(e.padding,n.availableSize),i.setMaxWidth(n.availableSize.width,e),t.Size.copyTo(i.layout(n.availableSize,e),o),t.Thickness.growSize(e.padding,o),!0}e.doOverride=n}(r=e.tapins||(e.tapins={}))}(n=e.measure||(e.measure={}))}(n=e.textblock||(e.textblock={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(t){function e(){t.call(this),this.replaceTapin("calcActualSize",r.calcActualSize).replaceTapin("calcExtents",r.calcExtents)}return __extends(e,t),e}(t.core.processup.ProcessUpPipeDef);e.TextBlockProcessUpPipeDef=n;var r;!function(e){function n(e,n,r,i){if(0===(e.dirtyFlags&t.DirtyFlags.Bounds))return!0;var a=n.actualSize;return a.width=Number.POSITIVE_INFINITY,a.height=Number.POSITIVE_INFINITY,t.core.helpers.coerceSize(a,e),t.Thickness.shrinkSize(e.padding,a),t.Size.copyTo(i.layout(a,e),a),t.Thickness.growSize(e.padding,a),!0}function r(e,n,r,i){if(0===(e.dirtyFlags&t.DirtyFlags.Bounds))return!0;var a=r.extents;a.x=i.getHorizontalOffset(e),a.y=0,t.Size.copyTo(n.actualSize,a);var o=e.padding;return a.x+=o.left,a.y+=o.top,t.Rect.copyTo(a,r.extentsWithChildren),!0}e.calcActualSize=n,e.calcExtents=r}(r=e.tapins||(e.tapins={}))}(n=e.processup||(e.processup={}))}(n=e.textblock||(e.textblock={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(t){function e(){t.call(this),this.replaceTapin("doRender",r.doRender)}return __extends(e,t),e}(t.core.render.RenderPipeDef);e.TextBlockRenderPipeDef=n;var r;!function(e){function n(e,n,r,i,a,o){i.save(),t.core.helpers.renderLayoutClip(i,e,o);var s=e.padding;return s&&i.translate(s.left,s.top),o.render(i,e),i.restore(),!0}e.doRender=n}(r=e.tapins||(e.tapins={}))}(n=e.render||(e.render={}))}(n=e.textblock||(e.textblock={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(t){function e(){t.call(this),this.replaceTapin("doOverride",r.doOverride)}return __extends(e,t),e}(t.core.arrange.ArrangePipeDef);e.TextBoxViewArrangePipeDef=n;var r;!function(e){function n(e,n,r,i,a){var o=n.finalSize,s=n.arrangedSize;return t.Size.copyTo(i.layout(o,e),s),s.width=Math.max(s.width,o.width),s.height=Math.max(s.height,o.height),i.setAvailableWidth(o.width),!0}e.doOverride=n}(r=e.tapins||(e.tapins={}))}(n=e.arrange||(e.arrange={}))}(n=e.textboxview||(e.textboxview={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(t){function e(){t.call(this),this.replaceTapin("canHitInside",r.canHitInside)}return __extends(e,t),e}(t.core.hittest.HitTestPipeDef);e.TextBoxViewHitTestPipeDef=n;var r;!function(t){function e(t,e,n,r){return!0}t.canHitInside=e}(r=e.tapins||(e.tapins={}))}(n=e.hittest||(e.hittest={}))}(n=e.textboxview||(e.textboxview={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(t){function e(){t.call(this),this.replaceTapin("doOverride",r.doOverride)}return __extends(e,t),e}(t.core.measure.MeasurePipeDef);e.TextBoxViewMeasurePipeDef=n;var r;!function(e){function n(e,n,r,i,a){var o=r.desiredSize,s=n.availableSize;return i.setMaxWidth(s.width,e),t.Size.copyTo(i.layout(s,e),o),isFinite(s.width)||(o.width=Math.max(o.width,11)),o.width=Math.min(o.width,s.width),o.height=Math.min(o.height,s.height),!0}e.doOverride=n}(r=e.tapins||(e.tapins={}))}(n=e.measure||(e.measure={}))}(n=e.textboxview||(e.textboxview={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(t){function e(){t.call(this),this.replaceTapin("calcActualSize",r.calcActualSize).replaceTapin("calcExtents",r.calcExtents)}return __extends(e,t),e}(t.core.processup.ProcessUpPipeDef);e.TextBoxViewProcessUpPipeDef=n;var r;!function(e){function n(e,n,r,i){if(0===(e.dirtyFlags&t.DirtyFlags.Bounds))return!0;var a=n.actualSize;return a.width=Number.POSITIVE_INFINITY,a.height=Number.POSITIVE_INFINITY,t.core.helpers.coerceSize(a,e),t.Size.copyTo(i.layout(a,e),a),!0}function r(e,n,r,i){if(0===(e.dirtyFlags&t.DirtyFlags.Bounds))return!0;var a=r.extents;return a.x=a.y=0,t.Size.copyTo(n.actualSize,a),t.Rect.copyTo(a,r.extentsWithChildren),r.extentsWithChildren.width++,!0}e.calcActualSize=n,e.calcExtents=r}(r=e.tapins||(e.tapins={}))}(n=e.processup||(e.processup={}))}(n=e.textboxview||(e.textboxview={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(e){function n(){e.call(this),this.replaceTapin("doRender",r.doRender).addTapinAfter("doRender","calcCaretRegion",r.calcCaretRegion).addTapinAfter("calcCaretRegion","renderCaret",r.renderCaret)}return __extends(n,e),n.prototype.createOutput=function(){var n=e.prototype.createOutput.call(this);return n.caretRegion=new t.Rect,n},n.prototype.prepare=function(n,r,i){t.Rect.copyTo(n.caretRegion,i.caretRegion),e.prototype.prepare.call(this,n,r,i)},n.prototype.flush=function(n,r,i){e.prototype.flush.call(this,n,r,i),t.Rect.copyTo(i.caretRegion,n.caretRegion)},n}(t.core.render.RenderPipeDef);e.TextBoxViewRenderPipeDef=n;var r;!function(e){function n(e,n,r,i,a,o){return i.save(),t.core.helpers.renderLayoutClip(i,e,o),o.render(i,e),i.restore(),!0}function r(e,n,r,i,a,o){return!t.Rect.isEmpty(r.caretRegion)||e.selectionLength>0?!0:(t.Rect.copyTo(o.getCaretRegion(e),r.caretRegion),!0)}function i(t,e,n,r,i,a){if(!t.isCaretVisible||t.selectionLength>0)return!0;var i=n.caretRegion,o=t.caretBrush,s=r.raw;return s.beginPath(),s.moveTo(i.x+.5,i.y),s.lineTo(i.x+.5,i.y+i.height),s.lineWidth=1,o?(o.setupBrush(s,i),s.strokeStyle=o.toHtml5Object()):s.strokeStyle="#000000",s.stroke(),!0}e.doRender=n,e.calcCaretRegion=r,e.renderCaret=i}(r=e.tapins||(e.tapins={}))}(n=e.render||(e.render={}))}(n=e.textboxview||(e.textboxview={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(n){function r(){n.call(this),this.addTapinBefore("doOverride","preOverride",e.tapins.preOverride).replaceTapin("doOverride",e.tapins.doOverride)}return __extends(r,n),r.prototype.createState=function(){var e=n.prototype.createState.call(this);return e.totalBorder=new t.Thickness,e},r}(t.core.arrange.ArrangePipeDef);e.UserControlArrangePipeDef=n}(n=e.arrange||(e.arrange={}))}(n=e.usercontrol||(e.usercontrol={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(n){function r(){n.call(this),this.addTapinBefore("doOverride","preOverride",e.tapins.preOverride).replaceTapin("doOverride",e.tapins.doOverride).addTapinAfter("doOverride","postOverride",e.tapins.postOverride)}return __extends(r,n),r.prototype.createState=function(){var e=n.prototype.createState.call(this);return e.totalBorder=new t.Thickness,e},r}(t.core.measure.MeasurePipeDef);e.UserControlMeasurePipeDef=n}(n=e.measure||(e.measure={}))}(n=e.usercontrol||(e.usercontrol={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(t){function e(){t.call(this),this.replaceTapin("processLayoutClip",r.processLayoutClip)}return __extends(e,t),e}(t.core.processdown.ProcessDownPipeDef);e.UserControlProcessDownPipeDef=n;var r;!function(e){function n(e,n,r,i,a){if(0===(e.dirtyFlags&t.DirtyFlags.LayoutClip))return!0;var o=e.compositeLayoutClip;return o.x=o.y=o.width=o.height,!0}e.processLayoutClip=n}(r=e.tapins||(e.tapins={}))}(n=e.processdown||(e.processdown={}))}(n=e.usercontrol||(e.usercontrol={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(e){var n;!function(e){var n=function(t){function n(){t.call(this),this.replaceTapin("doOverride",e.tapins.doOverride).addTapinAfter("doOverride","doHorizontal",e.tapins.doHorizontal).addTapinAfter("doOverride","doVertical",e.tapins.doVertical)}return __extends(n,t),n}(t.panel.arrange.PanelArrangePipeDef);e.VirtualizingStackPanelArrangePipeDef=n}(n=e.arrange||(e.arrange={}))}(e=t.virtualizingstackpanel||(t.virtualizingstackpanel={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(n){var r;!function(n){var r=function(e){function r(){e.call(this),this.replaceTapin("doOverride",n.tapins.doOverride).addTapinAfter("doOverride","doHorizontal",n.tapins.doHorizontal).addTapinAfter("doOverride","doVertical",n.tapins.doVertical)}return __extends(r,e),r.prototype.createState=function(){var n=e.prototype.createState.call(this);return n.childAvailable=new t.Size,n},r}(e.panel.measure.PanelMeasurePipeDef);n.VirtualizingStackPanelMeasurePipeDef=r}(r=n.measure||(n.measure={}))}(n=e.virtualizingstackpanel||(e.virtualizingstackpanel={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,n,r,i){var a=r/2,o=i/2,s=e+r,c=n+i,u=e+a,l=n+o;if(t.beginPath(),r===i)return void t.arc(u,l,a,0,2*Math.PI,!1);var h=.5522848,p=a*h,f=o*h;t.moveTo(e,l),t.bezierCurveTo(e,l-f,u-p,n,u,n),t.bezierCurveTo(u+p,n,s,l-f,s,l),t.bezierCurveTo(s,l+f,u+p,c,u,c),t.bezierCurveTo(u-p,c,e,l+f,e,l),t.closePath()}t.draw=e}(e=t.helpers||(t.helpers={}))}(e=t.ellipse||(t.ellipse={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(t){function n(){t.call(this),this.replaceTapin("canHitInside",e.tapins.canHitInside).replaceTapin("insideChildren",e.tapins.insideChildren).addTapinAfter("insideObject","canHitShape",e.tapins.canHitShape).addTapinAfter("canHitShape","prepareShape",e.tapins.prepareShape).addTapinAfter("prepareShape","drawShape",e.tapins.drawShape).addTapinAfter("drawShape","finishShape",e.tapins.finishShape)}return __extends(n,t),n}(t.core.hittest.HitTestPipeDef);e.ShapeHitTestPipeDef=n}(n=e.hittest||(e.hittest={}))}(n=e.shape||(e.shape={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(e){var n;!function(n){var r=function(t){function e(){t.call(this),this.replaceTapin("drawShape",i.drawShape)}return __extends(e,t),e}(t.shape.hittest.ShapeHitTestPipeDef);n.EllipseHitTestPipeDef=r;var i;!function(t){function n(t,n,r,i){var a=t.assets.shapeRect;return e.helpers.draw(i.raw,a.x,a.y,a.width,a.height),!0}t.drawShape=n}(i=n.tapins||(n.tapins={}))}(n=e.hittest||(e.hittest={}))}(e=t.ellipse||(t.ellipse={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(n){function r(){n.call(this),this.addTapinBefore("doOverride","calcNaturalBounds",e.tapins.calcNaturalBounds).replaceTapin("doOverride",e.tapins.doOverride)}return __extends(r,n),r.prototype.createOutput=function(){var e=n.prototype.createOutput.call(this);return e.naturalBounds=new t.Rect,e},r.prototype.prepare=function(e,r,i){t.Rect.copyTo(e.naturalBounds,i.naturalBounds),n.prototype.prepare.call(this,e,r,i)},r.prototype.flush=function(e,r,i){n.prototype.flush.call(this,e,r,i),t.Rect.copyTo(i.naturalBounds,e.naturalBounds)},r}(t.core.measure.MeasurePipeDef);e.ShapeMeasurePipeDef=n}(n=e.measure||(e.measure={}))}(n=e.shape||(e.shape={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(e){var n;!function(e){var n=function(t){function e(){t.call(this),this.addTapinBefore("doOverride","shrinkAvailable",r.shrinkAvailable)}return __extends(e,t),e}(t.shape.measure.ShapeMeasurePipeDef);e.EllipseMeasurePipeDef=n;var r;!function(t){function e(t,e,n,r){var i=e.availableSize;return i.width=i.height=0,!0}t.shrinkAvailable=e}(r=e.tapins||(e.tapins={}))}(n=e.measure||(e.measure={}))}(e=t.ellipse||(t.ellipse={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(t){function n(){t.call(this),this.addTapinBefore("doRender","calcShouldDraw",e.tapins.calcShouldDraw).addTapinBefore("doRender","prepareDraw",e.tapins.prepareDraw).replaceTapin("doRender",e.tapins.doRender).addTapinAfter("doRender","fill",e.tapins.fill).addTapinAfter("fill","finishDraw",e.tapins.finishDraw).addTapinAfter("finishDraw","stroke",e.tapins.stroke)}return __extends(n,t),n.prototype.createState=function(){var e=t.prototype.createState.call(this);return e.shouldDraw=!1,e},n}(t.core.render.RenderPipeDef);e.ShapeRenderPipeDef=n}(n=e.render||(e.render={}))}(n=e.shape||(e.shape={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(e){var n;!function(n){var r=function(t){function e(){t.call(this),this.replaceTapin("doRender",i.doRender)}return __extends(e,t),e}(t.shape.render.ShapeRenderPipeDef);n.EllipseRenderPipeDef=r;var i;!function(t){function n(t,n,r,i,a){if(!n.shouldDraw)return!0;var o=t.shapeRect;return e.helpers.draw(i.raw,o.x,o.y,o.width,o.height),!0}t.doRender=n}(i=n.tapins||(n.tapins={}))}(n=e.render||(e.render={}))}(e=t.ellipse||(t.ellipse={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(n){var r;!function(n){var r=function(t){function e(){t.call(this),this.addTapinBefore("calcNaturalBounds","buildPath",i.buildPath).replaceTapin("calcNaturalBounds",i.calcNaturalBounds)}return __extends(e,t),e}(e.shape.measure.ShapeMeasurePipeDef);n.PathMeasurePipeDef=r;var i;!function(e){function n(t,e,n,r){return!0}function r(e,n,r,i){var a=r.naturalBounds;if(a.x=a.y=a.width=a.height=0,e.data){var o=e.data.GetBounds(e);t.Rect.copyTo(o,a)}return!0}e.buildPath=n,e.calcNaturalBounds=r}(i=n.tapins||(n.tapins={}))}(r=n.measure||(n.measure={}))}(n=e.path||(e.path={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(e){var n;!function(e){var n=function(t){function e(){t.call(this),this.replaceTapin("buildPath",r.buildPath)}return __extends(e,t),e}(t.path.measure.PathMeasurePipeDef);e.LineMeasurePipeDef=n;var r;!function(t){function e(t,e,n,r){if(!t.data.old)return!0;var i=t.data.path;return i.reset(),i.move(t.x1,t.y1),i.line(t.x2,t.y2),t.data.old=!1,!0}t.buildPath=e}(r=e.tapins||(e.tapins={}))}(n=e.measure||(e.measure={}))}(e=t.line||(t.line={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(e){var n;!function(e){var n=function(t){function e(){t.call(this),this.replaceTapin("drawShape",r.drawShape)}return __extends(e,t),e}(t.shape.hittest.ShapeHitTestPipeDef);e.PathHitTestPipeDef=n;var r;!function(t){function e(t,e,n,r){var i=t.assets;return r.preapply(i.stretchXform),i.data.Draw(r),!0}t.drawShape=e}(r=e.tapins||(e.tapins={}))}(n=e.hittest||(e.hittest={}))}(e=t.path||(t.path={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(n){function r(){n.call(this),this.addTapinBefore("calcExtents","calcShapeRect",e.tapins.calcShapeRect).replaceTapin("calcExtents",e.tapins.calcExtents)}return __extends(r,n),r.prototype.createOutput=function(){var e=n.prototype.createOutput.call(this);return e.shapeFlags=t.ShapeFlags.None,e.shapeRect=new t.Rect,e},r.prototype.prepare=function(e,r,i){i.shapeFlags=e.shapeFlags,t.Rect.copyTo(e.shapeRect,i.shapeRect),n.prototype.prepare.call(this,e,r,i)},r.prototype.flush=function(e,r,i){n.prototype.flush.call(this,e,r,i),t.Rect.copyTo(i.shapeRect,e.shapeRect),e.shapeFlags=i.shapeFlags},r}(t.core.processup.ProcessUpPipeDef);e.ShapeProcessUpPipeDef=n}(n=e.processup||(e.processup={}))}(n=e.shape||(e.shape={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(n){var r;!function(n){var r=function(e){function r(){e.call(this),this.replaceTapin("calcActualSize",n.tapins.calcActualSize).replaceTapin("calcShapeRect",n.tapins.calcShapeRect).addTapinBefore("calcExtents","calcStretch",n.tapins.calcStretch).replaceTapin("calcExtents",n.tapins.calcExtents)}return __extends(r,e),r.prototype.createOutput=function(){var n=e.prototype.createOutput.call(this);return n.stretchXform=t.mat3.identity(),n},r.prototype.prepare=function(n,r,i){t.mat3.copyTo(n.stretchXform,i.stretchXform),e.prototype.prepare.call(this,n,r,i)},r.prototype.flush=function(n,r,i){e.prototype.flush.call(this,n,r,i),t.mat3.copyTo(i.stretchXform,n.stretchXform)},r}(e.shape.processup.ShapeProcessUpPipeDef);n.PathProcessUpPipeDef=r}(r=n.processup||(n.processup={}))}(n=e.path||(e.path={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(e){var n;!function(e){var n=function(t){function n(){t.call(this),this.replaceTapin("doRender",e.tapins.doRender).replaceTapin("fill",e.tapins.fill)}return __extends(n,t),n}(t.shape.render.ShapeRenderPipeDef);e.PathRenderPipeDef=n}(n=e.render||(e.render={}))}(e=t.path||(t.path={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(e){var n;!function(e){var n=function(t){function e(){t.call(this),this.replaceTapin("buildPath",r.buildPath)}return __extends(e,t),e}(t.path.measure.PathMeasurePipeDef);e.PolylineMeasurePipeDef=n;var r;!function(t){function e(t,e,r,i){if(!t.data.old)return!0;var a=t.data.path;a.reset();var o=t.points;if(o.length<2)return!0;var s=o[0],c=o[1];if(2===o.length)n(s,c,t.strokeThickness),a.move(s.x,s.y),a.line(c.x,c.y);else{a.move(s.x,s.y);for(var u=1;u<o.length;u++){var c=o[u];a.line(c.x,c.y)}}return t.isClosed&&a.close(),t.data.old=!1,!0}function n(t,e,n){var r=5*n,i=t.x-e.x,a=t.y-e.y;if(0===a)r-=n/2,i>0?(t.x+=r,e.x-=r):(t.x-=r,e.x+=r);else if(0===i)r-=n/2,a>0?(t.y+=r,e.y-=r):(t.y-=r,e.y+=r);else{var o=Math.atan2(a,i),s=Math.abs(Math.sin(o)*r);i>0?(t.x+=s,e.x-=s):(t.x-=s,e.x+=s);var c=Math.abs(Math.sin(Math.PI/2-o))*r;a>0?(t.y+=c,e.y-=c):(t.y-=c,e.y+=c)}}t.buildPath=e}(r=e.tapins||(e.tapins={}))}(n=e.measure||(e.measure={}))}(e=t.polyline||(t.polyline={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,n,r,i,a,o){var s=e+r,c=n+i;a||o||(t.beginPath(),t.rect(e,n,s-e,c-n)),t.beginPath(),t.moveTo(e+a,n),t.lineTo(s-a,n),t.ellipse(s-a,n+o,a,o,0,3*Math.PI/2,2*Math.PI),t.lineTo(s,c-o),t.ellipse(s-a,c-o,a,o,0,0,Math.PI/2),t.lineTo(e+a,c),t.ellipse(e+a,c-o,a,o,0,Math.PI/2,Math.PI),t.lineTo(e,n+o),t.ellipse(e+a,n+o,a,o,0,Math.PI,3*Math.PI/2),t.closePath()}t.draw=e}(e=t.helpers||(t.helpers={}))}(e=t.rectangle||(t.rectangle={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(e){var n;!function(n){var r=function(t){function e(){t.call(this),this.replaceTapin("drawShape",i.drawShape)}return __extends(e,t),e}(t.shape.hittest.ShapeHitTestPipeDef);n.RectangleHitTestPipeDef=r;var i;!function(t){function n(t,n,r,i){var a=t.assets,o=a.shapeRect,s=Math.min(Math.abs(a.radiusX),o.width/2);isNaN(s)&&(s=0);var c=Math.min(Math.abs(a.radiusY),o.height/2);return isNaN(c)&&(c=0),e.helpers.draw(i.raw,o.x,o.y,o.width,o.height,s,c),!0}t.drawShape=n}(i=n.tapins||(n.tapins={}))}(n=e.hittest||(e.hittest={}))}(e=t.rectangle||(t.rectangle={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(e){var n;!function(e){var n=function(t){function e(){t.call(this),this.addTapinBefore("doOverride","shrinkAvailable",r.shrinkAvailable)}return __extends(e,t),e}(t.shape.measure.ShapeMeasurePipeDef);e.RectangleMeasurePipeDef=n;var r;!function(t){function e(t,e,n,r){var i=e.availableSize;return i.width=i.height=0,!0}t.shrinkAvailable=e}(r=e.tapins||(e.tapins={}))}(n=e.measure||(e.measure={}))}(e=t.rectangle||(t.rectangle={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(e){var n;!function(n){var r=function(t){function e(){t.call(this),this.replaceTapin("doRender",i.doRender)}return __extends(e,t),e}(t.shape.render.ShapeRenderPipeDef);n.RectangleRenderPipeDef=r;var i;!function(t){function n(t,n,r,i,a){if(!n.shouldDraw)return!0;var o=t.shapeRect,s=Math.min(Math.max(0,t.radiusX),o.width/2);isNaN(s)&&(s=0);var c=Math.min(Math.max(0,t.radiusY),o.height/2);return isNaN(c)&&(c=0),e.helpers.draw(i.raw,o.x,o.y,o.width,o.height,s,c),!0}t.doRender=n}(i=n.tapins||(n.tapins={}))}(n=e.render||(e.render={}))}(e=t.rectangle||(t.rectangle={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(t){function n(){t.call(this),this.replaceTapin("doOverride",e.tapins.doOverride)}return __extends(n,t),n}(t.core.arrange.ArrangePipeDef);e.ShapeArrangePipeDef=n}(n=e.arrange||(e.arrange={}))}(n=e.shape||(e.shape={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,i){if(!i||t.CornerRadius.isEmpty(i))return void e.rect(n.x,n.y,n.width,n.height);var a=Math.max(i.topLeft+i.topRight-n.width,0)/2,o=Math.max(i.bottomLeft+i.bottomRight-n.width,0)/2,s=Math.max(i.topLeft+i.bottomLeft-n.height,0)/2,c=Math.max(i.topRight+i.bottomRight-n.height,0)/2,u=i.topLeft-a;e.moveTo(n.x+u,n.y);var l=i.topRight-a,h=i.topRight-c;e.lineTo(n.x+n.width-l,n.y),e.bezierCurveTo(n.x+n.width-l+l*r,n.y,n.x+n.width,n.y+h-h*r,n.x+n.width,n.y+h);var p=i.bottomRight-c,f=i.bottomRight-o;
e.lineTo(n.x+n.width,n.y+n.height-p),e.bezierCurveTo(n.x+n.width,n.y+n.height-p+p*r,n.x+n.width+f*r-f,n.y+n.height,n.x+n.width-f,n.y+n.height);var d=i.bottomLeft-o,v=i.bottomLeft-s;e.lineTo(n.x+d,n.y+n.height),e.bezierCurveTo(n.x+d-d*r,n.y+n.height,n.x,n.y+n.height-v+v*r,n.x,n.y+n.height-v);var m=i.topLeft-s;e.lineTo(n.x,n.y+m),e.bezierCurveTo(n.x,n.y+m-m*r,n.x+u-u*r,n.y,n.x+u,n.y)}var r=.55228475;e.drawBorderRect=n}(n=e.helpers||(e.helpers={}))}(n=e.render||(e.render={}))}(n=e.border||(e.border={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a,o){if(!n.shouldRender)return!0;t.Rect.copyTo(e.extents,n.fillExtents);var s=e.borderThickness;t.Thickness.shrinkRect(s,n.fillExtents);var c=n.innerCornerRadius;t.CornerRadius.copyTo(e.cornerRadius,c),t.Thickness.shrinkCornerRadius(s,c);var u=n.outerCornerRadius;return t.CornerRadius.copyTo(e.cornerRadius,u),t.Thickness.growCornerRadius(s,u),!0}e.calcInnerOuter=n}(n=e.tapins||(e.tapins={}))}(n=e.render||(e.render={}))}(n=e.border||(e.border={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a,o){if(n.shouldRender=!1,!e.background&&!e.borderBrush)return!0;if(t.Rect.isEmpty(e.extents))return!0;var s=!e.borderBrush||!e.borderThickness||t.Thickness.isEmpty(e.borderThickness);return s&&!e.background?!0:(n.shouldRender=!0,!0)}e.calcShouldRender=n}(n=e.tapins||(e.tapins={}))}(n=e.render||(e.render={}))}(n=e.border||(e.border={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(n){function r(n,r,i,a,o,s){if(!r.shouldRender)return!0;a.save(),t.core.helpers.renderLayoutClip(a,n,s);var c=n.borderBrush,u=n.extents,l=r.fillExtents,h=a.raw;c&&!t.Rect.isEmpty(u)&&(h.beginPath(),e.helpers.drawBorderRect(h,u,r.outerCornerRadius),e.helpers.drawBorderRect(h,l,r.innerCornerRadius),a.fillEx(c,u,t.FillRule.EvenOdd));var p=n.background;return p&&!t.Rect.isEmpty(l)&&(h.beginPath(),e.helpers.drawBorderRect(h,l,r.innerCornerRadius),a.fillEx(p,l)),a.restore(),!0}n.doRender=r}(n=e.tapins||(e.tapins={}))}(n=e.render||(e.render={}))}(n=e.border||(e.border={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,n,r,i){var a=n.layoutClip;return a.x=a.y=a.width=a.height=0,!0}t.buildLayoutClip=e}(e=t.tapins||(t.tapins={}))}(e=t.arrange||(t.arrange={}))}(e=t.canvas||(t.canvas={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a){for(var o,s=n.childRect,c=i.walk();c.step();)o=c.current,t.Size.copyTo(o.assets.desiredSize,s),s.x=o.getAttachedValue("Canvas.Left")||0,s.y=o.getAttachedValue("Canvas.Top")||0,o.arrange(s);return t.Size.copyTo(n.finalSize,n.arrangedSize),!0}e.doOverride=n}(n=e.tapins||(e.tapins={}))}(n=e.arrange||(e.arrange={}))}(n=e.canvas||(e.canvas={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,n,r,i){var a=e.availableSize;a.width=a.height=Number.POSITIVE_INFINITY;for(var o=r.walk();o.step();)o.current.measure(a);var s=n.desiredSize;return s.width=s.height=0,!0}t.doOverride=e}(e=t.tapins||(t.tapins={}))}(e=t.measure||(t.measure={}))}(e=t.canvas||(t.canvas={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){e.calcPaintBounds=function(e,n,r,i){if(0===(e.dirtyFlags&t.DirtyFlags.Bounds))return!0;t.core.helpers.intersectBoundsWithClipPath(r.globalBoundsWithChildren,r.extentsWithChildren,e.effectPadding,e.renderXform,e.clip,e.layoutClip);var a=r.surfaceBoundsWithChildren,o=i.surface;return o&&i.isTop?(a.x=a.y=0,a.width=o.width,a.height=o.height):t.core.helpers.intersectBoundsWithClipPath(a,r.extentsWithChildren,e.effectPadding,e.absoluteXform,e.clip,e.layoutClip),!0}}(n=e.tapins||(e.tapins={}))}(n=e.processup||(e.processup={}))}(n=e.canvas||(e.canvas={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(e){var n;!function(e){function n(e,n,r,i,a){var o=n.consumed;o.width=o.height=0;for(var s=n.finalSize,c=e.gridState.colMatrix,u=0;u<c.length;u++)o.width+=c[u][u].offered=c[u][u].desired;for(var l=e.gridState.rowMatrix,u=0;u<l.length;u++)o.height+=l[u][u].offered=l[u][u].desired;return o.width!==s.width&&t.helpers.expandStarCols(c,e.columnDefinitions,s),o.height!==s.height&&t.helpers.expandStarRows(l,e.rowDefinitions,s),!0}e.calcConsumed=n}(n=e.tapins||(e.tapins={}))}(e=t.arrange||(t.arrange={}))}(e=t.grid||(t.grid={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a){for(var o=n.childRect,s=e.gridState.rowMatrix,c=e.gridState.colMatrix,u=i.walk();u.step();){var l=u.current,h=Math.min(l.getAttachedValue("Grid.Column"),c.length-1);isNaN(h)&&(h=0);var p=Math.min(l.getAttachedValue("Grid.Row"),s.length-1);isNaN(p)&&(p=0);var f=Math.min(l.getAttachedValue("Grid.ColumnSpan"),c.length-h);isNaN(f)&&(f=1);var d=Math.min(l.getAttachedValue("Grid.RowSpan"),s.length-p);isNaN(d)&&(d=1),o.x=o.y=o.width=o.height=0;for(var v=0;h>v;v++)o.x+=c[v][v].offered;for(var v=h;h+f>v;v++)o.width+=c[v][v].offered;for(var v=0;p>v;v++)o.y+=s[v][v].offered;for(var v=p;p+d>v;v++)o.height+=s[v][v].offered;l.arrange(o)}return t.Size.copyTo(n.finalSize,n.arrangedSize),!0}e.doOverride=n}(n=e.tapins||(e.tapins={}))}(n=e.arrange||(e.arrange={}))}(n=e.grid||(e.grid={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,n,r,i){for(var a=t.gridState.rowMatrix,o=0;o<a.length;o++)for(var s=0;o>=s;s++)a[o][s].offered=a[o][s].original;for(var c=t.gridState.colMatrix,o=0;o<c.length;o++)for(var s=0;o>=s;s++)c[o][s].offered=c[o][s].original;return!0}t.restoreMeasureResults=e}(e=t.tapins||(t.tapins={}))}(e=t.arrange||(t.arrange={}))}(e=t.grid||(t.grid={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,n,r,i){for(var a=t.columnDefinitions,o=t.gridState.colMatrix,s=0;s<a.length;s++)a[s].setActualWidth(o[s][s].offered);for(var c=t.rowDefinitions,u=t.gridState.rowMatrix,s=0;s<c.length;s++)c[s].setActualHeight(u[s][s].offered);return!0}t.setActuals=e}(e=t.tapins||(t.tapins={}))}(e=t.arrange||(t.arrange={}))}(e=t.grid||(t.grid={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(e){function n(e,n,r,i,a){for(var o=n.childShapes,s=e.gridState.colMatrix,c=e.gridState.rowMatrix,u=i.walk(),l=0;u.step();l++)l>o.length?o.push((new t.GridChildShape).init(u.current,c,s)):(o[l]=o[l]||new t.GridChildShape).init(u.current,c,s);return l<o.length&&o.slice(l,o.length-l),n.gridShape.init(n.childShapes),n.placements.length=0,n.placements.push(new t.GridChildPlacement(null,0,0,0)),n.placementIndex=0,!0}e.buildShape=n}(e=t.tapins||(t.tapins={}))}(e=t.measure||(t.measure={}))}(e=t.grid||(t.grid={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(e){var n;!function(n){function r(n){return function(r,i,a,o,s){var c=r.gridState.rowMatrix,u=r.gridState.colMatrix;o.children.length>0&&(t.helpers.expandStarCols(u,r.columnDefinitions,i.availableSize),t.helpers.expandStarRows(c,r.rowDefinitions,i.availableSize));for(var l,h=i.placements,p=h[0],f=i.childShapes,d=i.childSize,v=o.walk(),m=0;v.step();m++){var g=v.current,y=f[m];y.shouldMeasurePass(i.gridShape,d,n)&&(y.size(d,c,u),g.measure(d),n!==e.OverridePass.StarAuto&&(l=e.GridChildPlacement.row(c,y,g),l.row===l.col?h.splice(i.placementIndex+1,0,l):(h.splice(i.placementIndex,0,l),i.placementIndex++)),l=e.GridChildPlacement.col(u,y,g),l.row===l.col?h.splice(i.placementIndex+1,0,l):(h.splice(i.placementIndex,0,l),i.placementIndex++))}for(h.splice(i.placementIndex,1),i.placementIndex=-1;l=h.pop();){var x=l.matrix[l.row][l.col];x.desired=Math.max(x.desired,l.size),t.helpers.allocateDesiredSize(c,u)}return i.placementIndex=h.push(p)-1,!0}}n.createDoOverridePass=r}(n=e.tapins||(e.tapins={}))}(e=t.measure||(t.measure={}))}(e=t.grid||(t.grid={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,n,r,i){var a=n.desiredSize;a.width=a.height=0;for(var o=t.gridState.colMatrix,s=0;s<o.length;s++)a.width+=o[s][s].desired;for(var c=t.gridState.rowMatrix,s=0;s<c.length;s++)a.height+=c[s][s].desired;return!0}t.doOverride=e}(e=t.tapins||(t.tapins={}))}(e=t.measure||(t.measure={}))}(e=t.grid||(t.grid={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(e){var n;!function(e){function n(e,n,r,i,a){var o=e.columnDefinitions.length||1,s=e.gridState.colMatrix;s.length>o&&s.splice(o,s.length-o);for(var c=0;o>c;c++){s.length<=c&&s.push([]);var u=s[c];u.length>c&&u.splice(c,u.length-c);for(var l=0;c>=l;l++)u.length<=l?u.push(new t.Segment):t.Segment.init(u[l])}return!0}e.ensureColMatrix=n}(n=e.tapins||(e.tapins={}))}(e=t.measure||(t.measure={}))}(e=t.grid||(t.grid={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(e){var n;!function(e){function n(e,n,r,i,a){var o=e.rowDefinitions.length||1,s=e.gridState.rowMatrix;s.length>o&&s.splice(o,s.length-o);for(var c=0;o>c;c++){s.length<=c&&s.push([]);var u=s[c];u.length>c+1&&u.splice(c,u.length-c-1);for(var l=0;c>=l;l++)u.length<=l?u.push(new t.Segment):t.Segment.init(u[l])}return!0}e.ensureRowMatrix=n}(n=e.tapins||(e.tapins={}))}(e=t.measure||(t.measure={}))}(e=t.grid||(t.grid={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){!function(t){t[t.Auto=0]="Auto",t[t.Pixel=1]="Pixel",t[t.Star=2]="Star"}(t.GridUnitType||(t.GridUnitType={}));t.GridUnitType}(e=t.grid||(t.grid={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(e){var n;!function(e){function n(e,n,i,a,o){var s=e.columnDefinitions,c=e.gridState.colMatrix,u=n.totalStars;if(u.width=0,0===s.length){var l=c[0][0];return l.type=t.GridUnitType.Star,l.stars=1,u.width+=1,!0}for(var h=0;h<s.length;h++){var p=s[h],f=p.Width||r;p.setActualWidth(Number.POSITIVE_INFINITY);var d=t.Segment.init(c[h][h],0,p.MinWidth,p.MaxWidth,f.Type);f.Type===t.GridUnitType.Pixel?(d.desired=d.offered=d.clamp(f.Value),p.setActualWidth(d.desired)):f.Type===t.GridUnitType.Star?(d.stars=f.Value,u.width+=f.Value):f.Type===t.GridUnitType.Auto&&(d.desired=d.offered=d.clamp(0))}return!0}var r={Value:1,Type:t.GridUnitType.Star};e.prepareColMatrix=n}(n=e.tapins||(e.tapins={}))}(e=t.measure||(t.measure={}))}(e=t.grid||(t.grid={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(e){var n;!function(e){function n(e,n,i,a,o){var s=e.rowDefinitions,c=e.gridState.rowMatrix,u=n.totalStars;if(u.height=0,0===s.length){var l=c[0][0];return l.type=t.GridUnitType.Star,l.stars=1,u.height+=1,!0}for(var h=0;h<s.length;h++){var p=s[h],f=p.Height||r;p.setActualHeight(Number.POSITIVE_INFINITY);var d=t.Segment.init(c[h][h],0,p.MinHeight,p.MaxHeight,f.Type);f.Type===t.GridUnitType.Pixel?(d.desired=d.offered=d.clamp(f.Value),p.setActualHeight(d.desired)):f.Type===t.GridUnitType.Star?(d.stars=f.Value,u.height+=f.Value):f.Type===t.GridUnitType.Auto&&(d.desired=d.offered=d.clamp(0))}return!0}var r={Value:1,Type:t.GridUnitType.Star};e.prepareRowMatrix=n}(n=e.tapins||(e.tapins={}))}(e=t.measure||(t.measure={}))}(e=t.grid||(t.grid={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,n,r,i){for(var a=t.gridState.rowMatrix,o=0;o<a.length;o++)for(var s=0;o>=s;s++)a[o][s].original=a[o][s].offered;for(var c=t.gridState.colMatrix,o=0;o<c.length;o++)for(s=0;o>=s;s++)c[o][s].original=c[o][s].offered;return!0}t.saveMeasureResults=e}(e=t.tapins||(t.tapins={}))}(e=t.measure||(t.measure={}))}(e=t.grid||(t.grid={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i){if(0===(e.dirtyFlags&t.DirtyFlags.Bounds))return!0;var a=r.extents,o=r.extentsWithChildren;a.x=o.x=0,a.y=o.y=0;var s=n.actualSize;if(a.width=o.width=s.width,a.height=o.height=s.height,e.showGridLines)return!0;for(var c,u=i.walk();u.step();)c=u.current.assets,c.totalIsRenderVisible&&t.Rect.union(o,c.globalBoundsWithChildren);return!0}e.calcExtents=n}(n=e.tapins||(e.tapins={}))}(n=e.processup||(e.processup={}))}(n=e.grid||(e.grid={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i){if(0===(e.dirtyFlags&t.DirtyFlags.Bounds))return!0;if(!e.background&&!e.showGridLines){var a=n.actualSize;a.width=a.height=0}return!0}e.preCalcExtents=n}(n=e.tapins||(e.tapins={}))}(n=e.processup||(e.processup={}))}(n=e.grid||(e.grid={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,n,r,i){var a=e.imageBounds;a.x=a.y=a.width=a.height=0,t.source&&(a.width=t.source.pixelWidth,a.height=t.source.pixelHeight);var o=e.finalSize;return 0===a.width&&(a.width=o.width),0===a.height&&(a.height=o.height),!0}t.calcImageBounds=e}(e=t.tapins||(t.tapins={}))}(e=t.arrange||(t.arrange={}))}(e=t.image||(t.image={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a){var o=n.imageBounds,s=1,c=1,u=n.finalSize;switch(o.width!==u.width&&(s=u.width/o.width),o.height!==u.height&&(c=u.height/o.height),e.stretch){case t.Stretch.Uniform:s=c=Math.min(s,c);break;case t.Stretch.UniformToFill:s=c=Math.max(s,c);break;case t.Stretch.None:s=c=1;break;case t.Stretch.Fill:}return n.stretchX=s,n.stretchY=c,!0}e.calcStretch=n}(n=e.tapins||(e.tapins={}))}(n=e.arrange||(e.arrange={}))}(n=e.image||(e.image={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,n,r,i){var a=e.arrangedSize;return a.width=e.imageBounds.width*e.stretchX,a.height=e.imageBounds.height*e.stretchY,!0}t.doOverride=e}(e=t.tapins||(t.tapins={}))}(e=t.arrange||(t.arrange={}))}(e=t.image||(t.image={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a){return r.dirtyFlags|=t.DirtyFlags.ImageMetrics,!0}e.invalidateMetrics=n}(n=e.tapins||(e.tapins={}))}(n=e.arrange||(e.arrange={}))}(n=e.image||(e.image={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,n,r){return!0}t.canHitInside=e}(e=t.tapins||(t.tapins={}))}(e=t.hittest||(t.hittest={}))}(e=t.image||(t.image={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,n,r){return n.unshift(t.updater),t.hitChildren=!1,!0}t.insideChildren=e}(e=t.tapins||(t.tapins={}))}(e=t.hittest||(t.hittest={}))}(e=t.image||(t.image={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i){var a=e.assets.source;if(!a||0===a.pixelWidth||0===a.pixelHeight)return r.shift(),i.restore(),!1;var o=e.assets.stretch;if(o===t.Stretch.Fill||o===t.Stretch.UniformToFill)return!0;var s=e.imgRect;return s.x=s.y=0,s.width=a.pixelWidth,s.height=a.pixelHeight,t.Rect.transform(s,e.assets.imgXform),t.Rect.transform(s,i.currentTransform),t.Rect.containsPoint(s,n)?!0:(r.shift(),i.restore(),!1)}e.insideStretch=n}(n=e.tapins||(e.tapins={}))}(n=e.hittest||(e.hittest={}))}(n=e.image||(e.image={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,n,r,i){var a=e.imageBounds;return a.x=a.y=a.width=a.height=0,t.source?(a.width=t.source.pixelWidth,a.height=t.source.pixelHeight,!0):!0}t.calcImageBounds=e}(e=t.tapins||(t.tapins={}))}(e=t.measure||(t.measure={}))}(e=t.image||(t.image={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a){var o=n.availableSize,s=o.width,c=o.height,u=n.imageBounds;isFinite(s)||(s=u.width),isFinite(c)||(c=u.height);var l=0,h=0;switch(u.width>0&&(l=s/u.width),u.height>0&&(h=c/u.height),isFinite(o.width)||(l=h),isFinite(o.height)||(h=l),e.stretch){default:case t.Stretch.Uniform:l=h=Math.min(l,h);break;case t.Stretch.UniformToFill:l=h=Math.max(l,h);break;case t.Stretch.Fill:isFinite(o.width)||(l=h),isFinite(o.height)||(h=l);break;case t.Stretch.None:l=h=1}return n.stretchX=l,n.stretchY=h,!0}e.calcStretch=n}(n=e.tapins||(e.tapins={}))}(n=e.measure||(e.measure={}))}(n=e.image||(e.image={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,n,r,i){var a=n.desiredSize;return a.width=e.imageBounds.width*e.stretchX,a.height=e.imageBounds.height*e.stretchY,!0}t.doOverride=e}(e=t.tapins||(t.tapins={}))}(e=t.measure||(t.measure={}))}(e=t.image||(t.image={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a){if(!n.calcImageMetrics)return!0;var o=n.paintRect.width,s=n.paintRect.height,c=n.imgRect.width,u=n.imgRect.height,l=o/c,h=s/u;0===o&&(l=1),0===s&&(h=1);var p=r.imgXform;if(e.stretch===t.Stretch.Fill)return t.mat3.createScale(l,h,p),!0;var f=1;switch(e.stretch){case t.Stretch.Uniform:f=h>l?l:h;break;case t.Stretch.UniformToFill:f=h>l?h:l;break;case t.Stretch.None:}var d=(o-f*c)/2,v=(s-f*u)/2;return t.mat3.createScale(f,f,p),t.mat3.translate(p,d,v),!0}e.calcImageTransform=n}(n=e.tapins||(e.tapins={}))}(n=e.processdown||(e.processdown={}))}(n=e.image||(e.image={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a){if(!n.calcImageMetrics)return!0;if(e.stretch===t.Stretch.UniformToFill||n.imgAdjust){var o=n.paintRect;t.Rect.roundOut(o);var s=n.imgRect;t.Rect.transform(s,r.imgXform),t.Rect.roundIn(s),r.overlap=t.Rect.rectIn(o,s)}return!0}e.calcOverlap=n}(n=e.tapins||(e.tapins={}))}(n=e.processdown||(e.processdown={}))}(n=e.image||(e.image={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a){if(n.calcImageMetrics=!1,0===(e.dirtyFlags&t.DirtyFlags.ImageMetrics))return!0;t.mat3.identity(r.imgXform),r.overlap=t.RectOverlap.In;var o=n.imgRect;return o.x=o.y=o.width=o.height=0,n.calcImageMetrics=!!e.source,!0}e.checkNeedImageMetrics=n}(n=e.tapins||(e.tapins={}))}(n=e.processdown||(e.processdown={}))}(n=e.image||(e.image={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a){if(!n.calcImageMetrics)return!0;var o=n.imgRect;o.x=o.y=0;var s=e.source;o.width=s.pixelWidth,o.height=s.pixelHeight;var c=n.paintRect;return c.x=c.y=0,c.width=e.actualWidth,c.height=e.actualHeight,n.imgAdjust=!t.Size.isEqual(c,e.renderSize),e.stretch===t.Stretch.None&&t.Rect.union(c,o),!0}e.prepareImageMetrics=n}(n=e.tapins||(e.tapins={}))}(n=e.processdown||(e.processdown={}))}(n=e.image||(e.image={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a,o){var s=e.source;return s&&0!==s.pixelWidth&&0!==s.pixelHeight?(i.save(),t.core.helpers.renderLayoutClip(i,e,o),i.preapply(e.imgXform),s.draw(i.raw),i.restore(),!0):!0}e.doRender=n}(n=e.tapins||(e.tapins={}))}(n=e.render||(e.render={}))}(n=e.image||(e.image={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a){var o=n.childRect;o.x=o.y=0,t.Size.copyTo(n.finalSize,o);for(var s=i.walk();s.step();)s.current.arrange(o);return t.Size.copyTo(n.finalSize,n.arrangedSize),!0}e.doOverride=n}(n=e.tapins||(e.tapins={}))}(n=e.arrange||(e.arrange={}))}(n=e.panel||(e.panel={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i){if(0===(e.dirtyFlags&t.DirtyFlags.Bounds))return!0;if(!e.background){var a=n.actualSize;a.width=a.height=0}return!0}e.preCalcExtents=n}(n=e.tapins||(e.tapins={}))}(n=e.processup||(e.processup={}))}(n=e.panel||(e.panel={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){e.postProcessXform=function(e,n,r,i,a){if(0===(e.dirtyFlags&t.DirtyFlags.Transform))return!0;var o=a.popupChild;if(!o)return!0;o.assets.dirtyFlags|=t.DirtyFlags.LocalTransform;var s=o.assets.carrierXform;return s||(s=o.assets.carrierXform||t.mat3.create()),t.mat3.copyTo(r.absoluteXform,s),t.mat3.translate(s,e.horizontalOffset,e.verticalOffset),t.core.Updater.$$addDownDirty(o),!0}}(n=e.tapins||(e.tapins={}))}(n=e.processdown||(e.processdown={}))}(n=e.popup||(e.popup={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){e.preProcessXform=function(e,n,r,i,a){if(0===(e.dirtyFlags&t.DirtyFlags.Transform))return!0;var o=a.popupChild;return o&&(o.assets.dirtyFlags|=t.DirtyFlags.LocalTransform,t.core.Updater.$$addDownDirty(o)),!0}}(n=e.tapins||(e.tapins={}))}(n=e.processdown||(e.processdown={}))}(n=e.popup||(e.popup={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(e){var n;!function(e){function n(e,n,r,i,a){var o=n.arrangedSize;if(!i.subtree)return o.width=o.height=0,!0;var s=e.scrollData;t.helpers.clampOffsets(s)&&s.invalidate();var c=i.subtree.assets.desiredSize,u=n.childRect;return u.x=-s.offsetX,u.y=-s.offsetY,u.width=Math.max(n.finalSize.width,c.width),u.height=Math.max(n.finalSize.height,c.height),i.subtree.arrange(u),!0}e.doOverride=n}(n=e.tapins||(e.tapins={}))}(e=t.arrange||(t.arrange={}))}(e=t.scrollcontentpresenter||(t.scrollcontentpresenter={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a){var o=r.internalClip;return o.x=o.y=0,t.Size.copyTo(n.arrangedSize,o),!0}e.updateClip=n}(n=e.tapins||(e.tapins={}))}(n=e.arrange||(e.arrange={}))}(n=e.scrollcontentpresenter||(e.scrollcontentpresenter={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(e){var n;!function(e){function n(e,n,r,i,a){var o=e.scrollData,s=n.finalSize,c=o.viewportWidth!==s.width||o.viewportHeight!==s.height;return o.viewportWidth=s.width,o.viewportHeight=s.height,(t.helpers.clampOffsets(o)||c)&&o.invalidate(),!0}e.updateExtents=n}(n=e.tapins||(e.tapins={}))}(e=t.arrange||(t.arrange={}))}(e=t.scrollcontentpresenter||(t.scrollcontentpresenter={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){t.doOverride=function(t,e,n,r,i){var a=n.desiredSize;if(a.width=a.height=0,!r.subtree)return!0;var o=t.scrollData,s=e.idealSize;return s.width=o.canHorizontallyScroll?Number.POSITIVE_INFINITY:e.availableSize.width,s.height=o.canVerticallyScroll?Number.POSITIVE_INFINITY:e.availableSize.height,r.subtree.measure(s),!0}}(e=t.tapins||(t.tapins={}))}(e=t.measure||(t.measure={}))}(e=t.scrollcontentpresenter||(t.scrollcontentpresenter={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a){var o=r.desiredSize,s=e.scrollData;return t.Size.copyTo(n.availableSize,o),o.width=Math.min(o.width,s.extentWidth),o.height=Math.min(o.height,s.extentHeight),!0}e.finishDoOverride=n}(n=e.tapins||(e.tapins={}))}(n=e.measure||(e.measure={}))}(n=e.scrollcontentpresenter||(e.scrollcontentpresenter={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(e){var n;!function(e){function n(e,n,r,i,a){var o=e.scrollData,s=n.availableSize,c=i.subtree.assets.desiredSize,u=o.viewportWidth!==s.width||o.viewportHeight!==s.height||o.extentWidth!==c.width||o.extentHeight!==c.height;return o.viewportWidth=s.width,o.viewportHeight=s.height,o.extentWidth=c.width,o.extentHeight=c.height,(t.helpers.clampOffsets(o)||u)&&o.invalidate(),!0}e.updateExtents=n}(n=e.tapins||(e.tapins={}))}(e=t.measure||(t.measure={}))}(e=t.scrollcontentpresenter||(t.scrollcontentpresenter={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a){if(e.orientation!==t.Orientation.Horizontal)return!0;var o=n.finalSize,s=n.arrangedSize;s.width=0;for(var c,u,l=n.childRect,h=i.walk();h.step();)c=h.current,u=c.assets.desiredSize,u.height=o.height,t.Size.copyTo(u,l),l.x=s.width,t.Rect.isEmpty(l)&&(l.x=l.y=l.width=l.height=0),c.arrange(l),s.width+=u.width,s.height=Math.max(s.height,u.height);return s.width=Math.max(s.width,n.finalSize.width),!0}e.doHorizontal=n}(n=e.tapins||(e.tapins={}))}(n=e.arrange||(e.arrange={}))}(n=e.stackpanel||(e.stackpanel={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a){var o=n.childRect;return o.x=o.y=0,t.Size.copyTo(n.finalSize,o),t.Size.copyTo(n.finalSize,n.arrangedSize),!0}e.doOverride=n}(n=e.tapins||(e.tapins={}))}(n=e.arrange||(e.arrange={}))}(n=e.stackpanel||(e.stackpanel={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a){if(e.orientation!==t.Orientation.Vertical)return!0;var o=n.finalSize,s=n.arrangedSize;s.height=0;for(var c,u,l=n.childRect,h=i.walk();h.step();)c=h.current,u=c.assets.desiredSize,u.width=o.width,t.Size.copyTo(u,l),l.y=s.height,t.Rect.isEmpty(l)&&(l.x=l.y=l.width=l.height=0),c.arrange(l),s.width=Math.max(s.width,u.width),s.height+=u.height;return s.height=Math.max(s.height,n.finalSize.height),!0}e.doVertical=n}(n=e.tapins||(e.tapins={}))}(n=e.arrange||(e.arrange={}))}(n=e.stackpanel||(e.stackpanel={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a){if(e.orientation!==t.Orientation.Horizontal)return!0;var o=n.childAvailable;o.height=n.availableSize.height;var s=e.height;isNaN(s)||(o.height=s),o.height=Math.max(Math.min(o.height,e.maxHeight),e.minHeight);for(var c,u,l=r.desiredSize,h=i.walk();h.step();)c=h.current,c.measure(o),u=c.assets.desiredSize,l.width+=u.width,l.height=Math.max(l.height,u.height);return!0}e.doHorizontal=n}(n=e.tapins||(e.tapins={}))}(n=e.measure||(e.measure={}))}(n=e.stackpanel||(e.stackpanel={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,n,r,i){var a=e.childAvailable;a.width=a.height=Number.POSITIVE_INFINITY;var o=n.desiredSize;return o.width=o.height=0,!0}t.doOverride=e}(e=t.tapins||(t.tapins={}))}(e=t.measure||(t.measure={}))}(e=t.stackpanel||(t.stackpanel={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a){if(e.orientation!==t.Orientation.Vertical)return!0;var o=n.childAvailable;o.width=n.availableSize.width;var s=e.width;isNaN(s)||(o.width=s),o.width=Math.max(Math.min(o.width,e.maxWidth),e.minWidth);for(var c,u,l=r.desiredSize,h=i.walk();h.step();)c=h.current,c.measure(o),u=c.assets.desiredSize,l.height+=u.height,l.width=Math.max(l.width,u.width);return!0}e.doVertical=n}(n=e.tapins||(e.tapins={}))}(n=e.measure||(e.measure={}))}(n=e.stackpanel||(e.stackpanel={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a){return i.subtree&&i.subtree.arrange(n.childRect),t.Size.copyTo(n.finalSize,n.arrangedSize),!0}e.doOverride=n}(n=e.tapins||(e.tapins={}))}(n=e.arrange||(e.arrange={}))}(n=e.usercontrol||(e.usercontrol={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a){if(!i.subtree)return!0;var o=n.totalBorder;t.Thickness.copyTo(e.padding,o),t.Thickness.add(o,e.borderThickness);var s=n.childRect;return s.x=s.y=0,t.Size.copyTo(n.finalSize,s),t.Thickness.shrinkSize(o,s),!0}e.preOverride=n}(n=e.tapins||(e.tapins={}))}(n=e.arrange||(e.arrange={}))}(n=e.usercontrol||(e.usercontrol={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a){var o=r.desiredSize,s=i.subtree;return s&&(s.measure(n.availableSize),t.Size.copyTo(s.assets.desiredSize,o)),!0}e.doOverride=n}(n=e.tapins||(e.tapins={}))}(n=e.measure||(e.measure={}))}(n=e.usercontrol||(e.usercontrol={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a){return t.Thickness.growSize(n.totalBorder,r.desiredSize),t.Size.min(r.desiredSize,n.availableSize),!0}e.postOverride=n}(n=e.tapins||(e.tapins={}))}(n=e.measure||(e.measure={}))}(n=e.usercontrol||(e.usercontrol={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a){
var o=n.totalBorder;return t.Thickness.copyTo(e.padding,o),t.Thickness.add(o,e.borderThickness),t.Thickness.shrinkSize(o,n.availableSize),!0}e.preOverride=n}(n=e.tapins||(e.tapins={}))}(n=e.measure||(e.measure={}))}(n=e.usercontrol||(e.usercontrol={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a){if(e.orientation!==t.Orientation.Horizontal)return!0;var o=n.finalSize,s=n.arrangedSize;s.width=0;for(var c,u,l=n.childRect,h=e.scrollData,p=i.walk();p.step();)c=p.current,u=c.assets.desiredSize,u.height=o.height,t.Size.copyTo(u,l),l.x=s.width,l.y=-h.offsetY,t.Rect.isEmpty(l)&&(l.x=l.y=l.width=l.height=0),c.arrange(l),s.width+=u.width,s.height=Math.max(s.height,u.height);return s.width=Math.max(s.width,o.width),!0}e.doHorizontal=n}(n=e.tapins||(e.tapins={}))}(n=e.arrange||(e.arrange={}))}(n=e.virtualizingstackpanel||(e.virtualizingstackpanel={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a){var o=n.childRect;return o.x=o.y=0,t.Size.copyTo(n.finalSize,o),t.Size.copyTo(n.finalSize,n.arrangedSize),!0}e.doOverride=n}(n=e.tapins||(e.tapins={}))}(n=e.arrange||(e.arrange={}))}(n=e.virtualizingstackpanel||(e.virtualizingstackpanel={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a){if(e.orientation!==t.Orientation.Vertical)return!0;var o=n.finalSize,s=n.arrangedSize;s.height=0;for(var c,u,l=n.childRect,h=e.scrollData,p=i.walk();p.step();)c=p.current,u=c.assets.desiredSize,u.width=o.width,t.Size.copyTo(u,l),l.x=-h.offsetX,l.y=s.height,t.Rect.isEmpty(l)&&(l.x=l.y=l.width=l.height=0),c.arrange(l),s.width=Math.max(s.width,u.width),s.height+=u.height;return s.height=Math.max(s.height,o.height),!0}e.doVertical=n}(n=e.tapins||(e.tapins={}))}(n=e.arrange||(e.arrange={}))}(n=e.virtualizingstackpanel||(e.virtualizingstackpanel={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a){if(e.orientation!==t.Orientation.Horizontal)return!0;var o=n.childAvailable,s=e.scrollData;s.canVerticallyScroll&&(o.height=Number.POSITIVE_INFINITY);var c=Math.floor(s.offsetX),u=i.containerOwner.itemCount;i.containerOwner.remove(0,c);for(var l=0,h=r.desiredSize,p=i.containerOwner.createGenerator(c,u);p.generate();){l++;var f=p.current;f.measure(o);var d=f.assets.desiredSize;if(h.height=Math.max(h.height,d.height),h.width+=d.width,h.width>o.width)break}i.containerOwner.remove(c+l,u-(c+l));var v=s.extentHeight!==h.height||s.extentWidth!==u||s.viewportHeight!==o.height||s.viewportWidth!==l;return s.extentHeight=h.height,s.extentWidth=u,s.viewportHeight=o.height,s.viewportWidth=l,v&&s.invalidate(),!0}e.doHorizontal=n}(n=e.tapins||(e.tapins={}))}(n=e.measure||(e.measure={}))}(n=e.virtualizingstackpanel||(e.virtualizingstackpanel={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a){var o=n.childAvailable;t.Size.copyTo(n.availableSize,o);var s=r.desiredSize;return s.width=s.height=0,!0}e.doOverride=n}(n=e.tapins||(e.tapins={}))}(n=e.measure||(e.measure={}))}(n=e.virtualizingstackpanel||(e.virtualizingstackpanel={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a){if(e.orientation!==t.Orientation.Vertical)return!0;var o=n.childAvailable,s=e.scrollData;s.canHorizontallyScroll&&(o.width=Number.POSITIVE_INFINITY);var c=Math.floor(s.offsetY),u=i.containerOwner.itemCount;i.containerOwner.remove(0,c);for(var l=0,h=r.desiredSize,p=i.containerOwner.createGenerator(c,u);p.generate();){l++;var f=p.current;f.measure(o);var d=f.assets.desiredSize;if(h.width=Math.max(h.width,d.width),h.height+=d.height,h.height>o.height)break}i.containerOwner.remove(c+l,u-(c+l));var v=s.extentHeight!==u||s.extentWidth!==h.width||s.viewportHeight!==l||s.viewportWidth!==o.width;return s.extentHeight=u,s.extentWidth=h.width,s.viewportHeight=l,s.viewportWidth=o.width,v&&s.invalidate(),!0}e.doVertical=n}(n=e.tapins||(e.tapins={}))}(n=e.measure||(e.measure={}))}(n=e.virtualizingstackpanel||(e.virtualizingstackpanel={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i){if(0===(e.dirtyFlags&t.DirtyFlags.Bounds))return!0;var a=n.actualSize;a.width=e.actualWidth,a.height=e.actualHeight;var o=e.naturalBounds;return o.width<=0||o.height<=0||e.width<=0||e.height<=0?(a.width=0,a.height=0,!0):(i.visualParent instanceof t.controls.canvas.CanvasUpdater&&(a.width=0===a.width?o.width:a.width,a.height=0===a.height?o.height:a.height,isNaN(e.width)||(a.width=e.width),isNaN(e.height)||(a.height=e.height)),!0)}e.calcActualSize=n}(n=e.tapins||(e.tapins={}))}(n=e.processup||(e.processup={}))}(n=e.path||(e.path={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i){return 0===(e.dirtyFlags&t.DirtyFlags.Bounds)?!0:(t.Size.isEmpty(n.actualSize)?t.Rect.clear(r.extents):(t.Rect.copyTo(r.shapeRect,r.extents),t.Rect.transform(r.extents,r.stretchXform)),t.Rect.copyTo(r.extents,r.extentsWithChildren),!0)}e.calcExtents=n}(n=e.tapins||(e.tapins={}))}(n=e.processup||(e.processup={}))}(n=e.path||(e.path={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i){return 0===(e.dirtyFlags&t.DirtyFlags.Bounds)?!0:(t.Rect.copyTo(e.naturalBounds,r.shapeRect),!0)}e.calcShapeRect=n}(n=e.tapins||(e.tapins={}))}(n=e.processup||(e.processup={}))}(n=e.path||(e.path={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i){if(0===(e.dirtyFlags&t.DirtyFlags.Bounds))return!0;var a=t.mat3.identity(r.stretchXform),o=n.actualSize;if(t.Size.isEmpty(o)||e.stretch===t.Stretch.None)return!0;var s=r.shapeRect,c=o.width/s.width,u=o.height/s.height,l=0,h=0;switch(e.stretch){case t.Stretch.Uniform:c=u=Math.min(c,u),l=(o.width-s.width*c)/2,h=(o.height-s.height*u)/2;break;case t.Stretch.UniformToFill:c=u=Math.max(c,u)}return t.mat3.translate(a,-s.x,-s.y),t.mat3.scale(a,c,u),t.mat3.translate(a,l,h),!0}e.calcStretch=n}(n=e.tapins||(e.tapins={}))}(n=e.processup||(e.processup={}))}(n=e.path||(e.path={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,n,r,i){return e.shouldDraw?(r.preapply(t.stretchXform),t.data.Draw(r),!0):!0}t.doRender=e}(e=t.tapins||(t.tapins={}))}(e=t.render||(t.render={}))}(e=t.path||(t.path={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a){return n.shouldDraw?(e.fill&&i.fillEx(e.fill,e.shapeRect,e.data?e.data.fillRule:t.FillRule.EvenOdd),!0):!0}e.fill=n}(n=e.tapins||(e.tapins={}))}(n=e.render||(e.render={}))}(n=e.path||(e.path={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i){var a=n.arrangedSize;t.Size.copyTo(n.finalSize,a);var o=e.naturalBounds;if(e.stretch===t.Stretch.None)return a.width=Math.max(a.width,o.x+o.width),a.height=Math.max(a.height,o.y+o.height),!0;0===o.width&&(o.width=a.width),0===o.height&&(o.height=a.height);var s=1,c=1;switch(o.width!==a.width&&(s=a.width/o.width),o.height!==a.height&&(c=a.height/o.height),e.stretch){case t.Stretch.Uniform:s=c=Math.min(s,c);break;case t.Stretch.UniformToFill:s=c=Math.max(s,c)}return a.width=o.width*s||0,a.height=o.height*c||0,!0}e.doOverride=n}(n=e.tapins||(e.tapins={}))}(n=e.arrange||(e.arrange={}))}(n=e.shape||(e.shape={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,n,r){return t.assets.fill||t.assets.stroke?!0:(n.shift(),r.restore(),!1)}t.canHitInside=e}(e=t.tapins||(t.tapins={}))}(e=t.hittest||(t.hittest={}))}(e=t.shape||(t.shape={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i){return(e.assets.shapeFlags&t.ShapeFlags.Empty)===t.ShapeFlags.Empty?(r.shift(),i.restore(),!1):!0}e.canHitShape=n}(n=e.tapins||(e.tapins={}))}(n=e.hittest||(e.hittest={}))}(n=e.shape||(e.shape={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,n,r){return!0}t.drawShape=e}(e=t.tapins||(t.tapins={}))}(e=t.hittest||(t.hittest={}))}(e=t.shape||(t.shape={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,n,r){var i=t.assets,a=!!i.fill&&r.raw.isPointInPath(e.x,e.y)||!!i.stroke&&r.isPointInStrokeEx(i,e.x,e.y);return r.restore(),a?!0:(n.shift(),r.restore(),!1)}t.finishShape=e}(e=t.tapins||(t.tapins={}))}(e=t.hittest||(t.hittest={}))}(e=t.shape||(t.shape={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,n,r){return n.unshift(t.updater),t.hitChildren=!1,!0}t.insideChildren=e}(e=t.tapins||(t.tapins={}))}(e=t.hittest||(t.hittest={}))}(e=t.shape||(t.shape={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,n,r){return r.save(),!0}t.prepareShape=e}(e=t.tapins||(t.tapins={}))}(e=t.hittest||(t.hittest={}))}(e=t.shape||(t.shape={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,n,r){var i=n.naturalBounds;return i.x=i.y=0,i.width=i.height=1,!0}t.calcNaturalBounds=e}(e=t.tapins||(t.tapins={}))}(e=t.measure||(t.measure={}))}(e=t.shape||(t.shape={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i){var a=r.desiredSize,o=r.naturalBounds;if(e.stretch===t.Stretch.None)return a.width=o.x+o.width,a.height=o.y+o.height,!0;var s=n.availableSize;t.Size.copyTo(s,a),isFinite(s.width)||(a.width=o.width),isFinite(s.height)||(a.height=o.height);var c=0,u=0;switch(o.width>0&&(c=a.width/o.width),o.height>0&&(u=a.height/o.height),isFinite(s.width)||(c=u),isFinite(s.height)||(u=c),e.stretch){case t.Stretch.Uniform:c=u=Math.min(c,u);break;case t.Stretch.UniformToFill:c=u=Math.max(c,u);break;case t.Stretch.Fill:isFinite(s.width)||(c=1),isFinite(s.height)||(u=1)}return a.width=o.width*c,a.height=o.height*u,!0}e.doOverride=n}(n=e.tapins||(e.tapins={}))}(n=e.measure||(e.measure={}))}(n=e.shape||(e.shape={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i){return 0===(e.dirtyFlags&t.DirtyFlags.Bounds)?!0:(r.extents.x=r.extents.y=0,t.Size.copyTo(n.actualSize,r.extents),t.Rect.copyTo(r.extents,r.extentsWithChildren),!0)}e.calcExtents=n}(n=e.tapins||(e.tapins={}))}(n=e.processup||(e.processup={}))}(n=e.shape||(e.shape={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i){if(0===(e.dirtyFlags&t.DirtyFlags.Bounds))return!0;var a=r.shapeRect;if(a.x=a.y=0,t.Size.copyTo(n.actualSize,a),r.shapeFlags=t.ShapeFlags.Empty,t.Rect.isEmpty(a))return!0;var o=e.stroke?e.strokeThickness:0;o>=a.width||o>=a.height?(a.width=Math.max(a.width,o+.001*o),a.height=Math.max(a.height,o+.001*o),r.shapeFlags=t.ShapeFlags.Degenerate):r.shapeFlags=t.ShapeFlags.Normal;var s=o/2;return t.Rect.shrink(a,s,s,s,s),!0}e.calcShapeRect=n}(n=e.tapins||(e.tapins={}))}(n=e.processup||(e.processup={}))}(n=e.shape||(e.shape={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a){return n.shouldDraw=!1,e.shapeFlags===t.ShapeFlags.Empty?!0:e.fill||e.stroke?(n.shouldDraw=!0,!0):!0}e.calcShouldDraw=n}(n=e.tapins||(e.tapins={}))}(n=e.render||(e.render={}))}(n=e.shape||(e.shape={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,n,r,i){return e.shouldDraw?!0:!0}t.doRender=e}(e=t.tapins||(t.tapins={}))}(e=t.render||(t.render={}))}(e=t.shape||(t.shape={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,n,r,i){return e.shouldDraw?(t.fill&&r.fillEx(t.fill,t.shapeRect,t.fillRule),!0):!0}t.fill=e}(e=t.tapins||(t.tapins={}))}(e=t.render||(t.render={}))}(e=t.shape||(t.shape={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,n,r,i){return e.shouldDraw?(r.restore(),!0):!0}t.finishDraw=e}(e=t.tapins||(t.tapins={}))}(e=t.render||(t.render={}))}(e=t.shape||(t.shape={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a,o){return n.shouldDraw?(i.save(),t.core.helpers.renderLayoutClip(i,e,o),!0):!0}e.prepareDraw=n}(n=e.tapins||(e.tapins={}))}(n=e.render||(e.render={}))}(n=e.shape||(e.shape={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,i,a,o){if(!e.shouldDraw)return!0;var s=t.stroke;if(!(s&&t.strokeThickness>0))return!0;var c=a.raw;return c.lineWidth=t.strokeThickness,c.lineCap=n[t.strokeStartLineCap||t.strokeEndLineCap||0]||n[0],c.lineJoin=r[t.strokeLineJoin||0]||r[0],c.miterLimit=t.strokeMiterLimit,s.setupBrush(c,t.shapeRect),c.strokeStyle=s.toHtml5Object(),c.stroke(),!0}var n=["butt","square","round","butt"],r=["miter","bevel","round"];t.stroke=e}(e=t.tapins||(t.tapins={}))}(e=t.render||(t.render={}))}(e=t.shape||(t.shape={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,r,i,a,o){if(!n.shouldRender||t.Thickness.isEmpty(e.borderThickness))return!0;if(t.Thickness.isBalanced(e.borderThickness)){var s=n.innerCornerRadius,c=n.outerCornerRadius,u=n.middleCornerRadius;u.topLeft=(s.topLeft+c.topLeft)/2,u.topRight=(s.topRight+c.topRight)/2,u.bottomRight=(s.bottomRight+c.bottomRight)/2,u.bottomLeft=(s.bottomLeft+c.bottomLeft)/2,t.Rect.copyTo(e.extents,n.strokeExtents);var l=e.borderThickness;t.Rect.shrink(n.strokeExtents,l.left/2,l.top/2,l.right/2,l.bottom/2)}return!0}e.calcBalanced=n}(n=e.shim||(e.shim={}))}(n=e.tapins||(e.tapins={}))}(n=e.render||(e.render={}))}(n=e.border||(e.border={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(n){var r;!function(n){function r(e,n,r,a,o,s){return!n.shouldRender||t.Thickness.isBalanced(e.borderThickness)?!0:(n.pattern||(n.pattern=i(e.borderBrush,e.extents,n.fillExtents,n.outerCornerRadius,n.innerCornerRadius)),!0)}function i(n,r,i,o,s){a=a||new t.core.render.RenderContext(document.createElement("canvas").getContext("2d"));var c=a.raw;return t.Size.copyTo(r,c.canvas),c.beginPath(),e.helpers.drawBorderRect(c,r,o),a.fillEx(n,r),c.globalCompositeOperation="xor",c.beginPath(),e.helpers.drawBorderRect(c,i,s),c.fill(),c.createPattern(c.canvas,"no-repeat")}n.createPattern=r;var a}(r=n.shim||(n.shim={}))}(n=e.tapins||(e.tapins={}))}(n=e.render||(e.render={}))}(n=e.border||(e.border={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(n){var r;!function(n){function r(e,n,r,s,c,u){return n.shouldRender?(s.save(),t.core.helpers.renderLayoutClip(s,e,u),e.background&&a(s,e,n),n.pattern?i(s,e,n):e.borderBrush&&o(s,e,n),s.restore(),!0):!0}function i(t,n,r){var i=t.raw;i.beginPath(),i.fillStyle=r.pattern,e.helpers.drawBorderRect(i,n.extents,r.outerCornerRadius),i.fill()}function a(t,n,r){t.raw.beginPath(),e.helpers.drawBorderRect(t.raw,r.fillExtents,r.innerCornerRadius),t.fillEx(n.background,r.fillExtents)}function o(t,n,r){var i=t.raw;i.beginPath(),e.helpers.drawBorderRect(i,r.strokeExtents,r.middleCornerRadius),i.lineWidth=n.borderThickness.left,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=0,n.borderBrush.setupBrush(i,r.strokeExtents),i.strokeStyle=n.borderBrush.toHtml5Object(),i.stroke()}n.doRender=r}(r=n.shim||(n.shim={}))}(n=e.tapins||(e.tapins={}))}(n=e.render||(e.render={}))}(n=e.border||(e.border={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n,a,o,s,c){return n.shouldRender?t.Thickness.isEmpty(e.borderThickness)?(n.pattern=null,!0):n.oldMetrics?(i(e,n,n.oldMetrics)&&(n.pattern=null),r(e,n,n.oldMetrics),!0):(n.oldMetrics={},r(e,n,n.oldMetrics),n.pattern=null,!0):!0}function r(t,e,n){n.borderBrush=t.borderBrush,n.borderThickness=t.borderThickness,n.extents=t.extents,n.fillExtents=e.fillExtents,n.outerCornerRadius=e.outerCornerRadius,n.innerCornerRadius=e.innerCornerRadius}function i(e,n,r){return!(r.borderBrush===e.borderBrush&&t.Rect.isEqual(r.extents,e.extents)&&t.Rect.isEqual(r.fillExtents,n.fillExtents)&&t.CornerRadius.isEqual(r.outerCornerRadius,n.outerCornerRadius)&&t.CornerRadius.isEqual(r.innerCornerRadius,n.innerCornerRadius))}e.invalidatePattern=n}(n=e.shim||(e.shim={}))}(n=e.tapins||(e.tapins={}))}(n=e.render||(e.render={}))}(n=e.border||(e.border={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),n.prototype.init=function(){this.setMeasurePipe(new e.measure.AnonymousMeasurePipeDef(this)).setArrangePipe(new e.arrange.AnonymousArrangePipeDef(this)),t.prototype.init.call(this)},n.prototype.measureOverride=function(t){return t},n.prototype.arrangeOverride=function(t){return t},n}(t.core.Updater);e.AnonymousUpdater=n}(e=t.anon||(t.anon={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n=null,r=null,i=function(){function i(){this.$$layout=new t.core.draft.DraftPipeDef,this.$$canvas=null,this.$$ctx=null,this.$$layers=[],this.$$prerenderhooks=[],this.$$downDirty=[],this.$$upDirty=[],this.$$dirtyRegion=null,this.$$width=0,this.$$height=0}return Object.defineProperty(i.prototype,"width",{get:function(){return this.$$width},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.$$height},enumerable:!0,configurable:!0}),i.prototype.init=function(e){this.$$canvas=e,this.$$ctx=new t.core.render.RenderContext(e.getContext("2d",{alpha:!1}))},i.prototype.attachLayer=function(t,e){e===!0?this.$$layers.unshift(t):this.$$layers.push(t),t.tree.isTop=!0,t.invalidateMeasure(),t.fullInvalidate(),t.setSurface(this)},i.prototype.detachLayer=function(t){t.tree.isTop=!1,t.setSurface(null);var e=this.$$layers.indexOf(t);e>-1&&this.$$layers.splice(e,1),this.invalidate(t.assets.surfaceBoundsWithChildren)},i.prototype.walkLayers=function(t){var e=this.$$layers,n=-1;return t===!0?(n=e.length,{current:void 0,step:function(){return n--,this.current=e[n],void 0!==this.current}}):{current:void 0,step:function(){return n++,this.current=e[n],void 0!==this.current}}},i.prototype.updateBounds=function(){},i.prototype.invalidate=function(e){e=e||new t.Rect(0,0,this.width,this.height),this.$$dirtyRegion?t.Rect.union(this.$$dirtyRegion,e):this.$$dirtyRegion=new t.Rect(e.x,e.y,e.width,e.height)},i.prototype.render=function(){for(var e=0,n=this.$$prerenderhooks;e<n.length;e++)n[e].preRender();var r=this.$$dirtyRegion;if(r&&!t.Rect.isEmpty(r)){this.$$dirtyRegion=null,t.Rect.roundOut(r);var i=this.$$ctx;i.size.commitResize(),i.save(),i.applyDpiRatio(),i.raw.fillStyle="#ffffff",i.raw.fillRect(r.x,r.y,r.width,r.height),i.clipRect(r);for(var a=this.$$layers,e=0,o=a.length;o>e;e++)a[e].render(i,r);i.restore()}},i.prototype.hookPrerender=function(t){this.$$prerenderhooks.push(t)},i.prototype.unhookPrerender=function(t){var e=this.$$prerenderhooks.indexOf(t);e>-1&&this.$$prerenderhooks.splice(e,1)},i.prototype.addUpDirty=function(t){this.$$upDirty.push(t)},i.prototype.addDownDirty=function(t){this.$$downDirty.push(t)},i.prototype.updateLayout=function(){for(var n={count:0,maxCount:250,updater:null,assets:null,tree:null,flag:t.UIFlags.None,measureList:[],arrangeList:[],sizingList:[],surfaceSize:new t.Size(this.width,this.height),sizingUpdates:[]},r=!1,i=!0;n.count<n.maxCount&&i;)i=e.draft(this.$$layers,this.$$layout,n),r=e.process(this.$$downDirty,this.$$upDirty)||i||r;return n.count>=n.maxCount&&console.error("[MINERVA] Aborting infinite update loop"),r},i.prototype.resize=function(e,n){if(this.$$width!==e||this.$$height!==n){var r=new t.Rect(0,0,this.$$width,this.$$height);t.Rect.union(r,new t.Rect(0,0,e,n)),t.Rect.roundOut(r),this.$$width=e,this.$$height=n,this.$$ctx.size.queueResize(e,n),this.invalidate(r);for(var i=this.$$layers,a=0;a<i.length;a++)i[a].invalidateMeasure()}},i.prototype.hitTest=function(e){if(this.$$layers.length<1)return null;r=r||new t.core.render.RenderContext(document.createElement("canvas").getContext("2d")),r.size.queueResize(this.width,this.height).commitResize();for(var n=[],i=this.$$layers,a=i.length-1;a>=0&&0===n.length;a--)i[a].hitTest(e,n,r,!1);return n},i.prototype.updateDpiRatio=function(){this.$$ctx.size.updateDpiRatio()&&this.invalidate()},i.measureWidth=function(t,e){return n=n||document.createElement("canvas").getContext("2d"),n.font=e.toHtml5Object(),n.measureText(t).width},i}();e.Surface=i}(e=t.engine||(t.engine={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){function n(e,n,r){for(var i=!1,a=0,o=e.length;o>a;a++)if(r.updater=e[a],0!==(r.updater.assets.uiFlags&t.UIFlags.Hints))for(r.tree=r.updater.tree,r.assets=r.updater.assets;r.count<r.maxCount&&n.run(r);)i=!0,r.count++;return i}e.draft=n}(e=t.engine||(t.engine={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){function e(t,e){var i=t.length>0||e.length>0;return n(t),r(e),i}function n(t){for(var e;null!=(e=t[0]);)e.processDown()?t.shift():t.push(t.shift());t.length>0&&console.warn("[MINERVA] Finished DownDirty pass, not empty.")}function r(t){for(var e;null!=(e=t[0]);){var n=e.findChildInList(t);n>-1?t.splice(n+1,0,t.shift()):e.processUp()&&t.shift()}t.length>0&&console.warn("[MINERVA] Finished UpDirty pass, not empty.")}t.process=e}(e=t.engine||(t.engine={}))}(minerva||(minerva={}));var minerva;!function(t){function e(t,e){var n=t[0];if(Math.abs(n)<i)return null;var r=t[3];if(Math.abs(r)<i)return null;e?(e[1]=t[1],e[2]=t[2]):e=t;var a=-t[4],o=-t[5];return Math.abs(n-1)>i&&(n=1/n,a*=n),Math.abs(r-1)>i&&(r=1/r,o*=r),e[0]=n,e[3]=r,e[4]=a,e[5]=o,e}function n(t,e){e||(e=t);var n=t[0],r=t[1],i=t[2],a=t[3],o=n*a-r*i;if(0===o||!isFinite(o))return null;var s=1/o,c=t[4],u=t[5];return e[0]=a*s,e[1]=-r*s,e[2]=-i*s,e[3]=n*s,e[4]=(i*u-a*c)*s,e[5]=(r*c-n*u)*s,e}var r,i=1e-6;r="undefined"!=typeof Float32Array?function(t){return new Float32Array(t)}:function(t){return new Array(t)},t.mat3={create:function(t){var e=r(6);return t?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5]):e[0]=e[1]=e[2]=e[3]=e[4]=e[5]=0,e},copyTo:function(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},init:function(t,e,n,r,i,a,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=o,t},identity:function(e){return e||(e=t.mat3.create()),e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},equal:function(t,e){return t===e||Math.abs(t[0]-e[0])<i&&Math.abs(t[1]-e[1])<i&&Math.abs(t[2]-e[2])<i&&Math.abs(t[3]-e[3])<i&&Math.abs(t[4]-e[4])<i&&Math.abs(t[5]-e[5])<i},multiply:function(t,e,n){n||(n=t);var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],c=t[5],u=e[0],l=e[1],h=e[2],p=e[3],f=e[4],d=e[5];return n[0]=r*u+i*h,n[1]=r*l+i*p,n[2]=a*u+o*h,n[3]=a*l+o*p,n[4]=s*u+c*h+f,n[5]=s*l+c*p+d,n},inverse:function(t,r){return Math.abs(t[1])<i&&Math.abs(t[2])<i?e(t,r):n(t,r)},transformVec2:function(t,e,n){n||(n=e);var r=e[0],i=e[1];return n[0]=t[0]*r+t[2]*i+t[4],n[1]=t[1]*r+t[3]*i+t[5],n},createTranslate:function(e,n,r){return r||(r=t.mat3.create()),r[0]=1,r[1]=0,r[2]=0,r[3]=1,r[4]=e,r[5]=n,r},translate:function(t,e,n){return t[4]+=e,t[5]+=n,t},createScale:function(e,n,r){return r||(r=t.mat3.create()),r[0]=e,r[1]=0,r[2]=0,r[3]=n,r[4]=0,r[5]=0,r},scale:function(t,e,n){return t[0]*=e,t[2]*=e,t[4]*=e,t[1]*=n,t[3]*=n,t[5]*=n,t},createRotate:function(e,n){n||(n=t.mat3.create());var r=Math.cos(e),i=Math.sin(e);return n[0]=r,n[1]=i,n[2]=-i,n[3]=r,n[4]=0,n[5]=0,n},createSkew:function(e,n,r){return r||(r=t.mat3.create()),r[0]=1,r[1]=Math.tan(n),r[2]=Math.tan(e),r[3]=1,r[4]=0,r[5]=0,r},preapply:function(e,n){return t.mat3.multiply(n,e,e)},apply:function(e,n){return t.mat3.multiply(e,n,e)}}}(minerva||(minerva={}));var mat3=minerva.mat3,minerva;!function(t){var e;!function(t){t[t.M11=0]="M11",t[t.M12=1]="M12",t[t.M13=2]="M13",t[t.M14=3]="M14",t[t.M21=4]="M21",t[t.M22=5]="M22",t[t.M23=6]="M23",t[t.M24=7]="M24",t[t.M31=8]="M31",t[t.M32=9]="M32",t[t.M33=10]="M33",t[t.M34=11]="M34",t[t.OffsetX=12]="OffsetX",t[t.OffsetY=13]="OffsetY",t[t.OffsetZ=14]="OffsetZ",t[t.M44=15]="M44"}(e||(e={}));var n,r=1e-6;n="undefined"!=typeof Float32Array?function(t){return new Float32Array(t)}:function(t){return new Array(t)},t.mat4={create:function(t){var r=n(16);return t&&(r[e.M11]=t[e.M11],r[e.M12]=t[e.M12],r[e.M13]=t[e.M13],r[e.M14]=t[e.M14],r[e.M21]=t[e.M21],r[e.M22]=t[e.M22],r[e.M23]=t[e.M23],r[e.M24]=t[e.M24],r[e.M31]=t[e.M31],r[e.M32]=t[e.M32],r[e.M33]=t[e.M33],r[e.M34]=t[e.M34],r[e.OffsetX]=t[e.OffsetX],r[e.OffsetY]=t[e.OffsetY],r[e.OffsetZ]=t[e.OffsetZ],r[e.M44]=t[e.M44]),r},copyTo:function(t,n){return n[e.M11]=t[e.M11],n[e.M12]=t[e.M12],n[e.M13]=t[e.M13],n[e.M14]=t[e.M14],n[e.M21]=t[e.M21],n[e.M22]=t[e.M22],n[e.M23]=t[e.M23],n[e.M24]=t[e.M24],n[e.M31]=t[e.M31],n[e.M32]=t[e.M32],n[e.M33]=t[e.M33],n[e.M34]=t[e.M34],n[e.OffsetX]=t[e.OffsetX],n[e.OffsetY]=t[e.OffsetY],n[e.OffsetZ]=t[e.OffsetZ],n[e.M44]=t[e.M44],n},identity:function(n){return n||(n=t.mat4.create()),n[e.M11]=1,n[e.M12]=0,n[e.M13]=0,n[e.M14]=0,n[e.M21]=0,n[e.M22]=1,n[e.M23]=0,n[e.M24]=0,n[e.M31]=0,n[e.M32]=0,n[e.M33]=1,n[e.M34]=0,n[e.OffsetX]=0,n[e.OffsetY]=0,n[e.OffsetZ]=0,n[e.M44]=1,n},equal:function(t,n){return t===n||Math.abs(t[e.M11]-n[e.M11])<r&&Math.abs(t[e.M12]-n[e.M12])<r&&Math.abs(t[e.M13]-n[e.M13])<r&&Math.abs(t[e.M14]-n[e.M14])<r&&Math.abs(t[e.M21]-n[e.M21])<r&&Math.abs(t[e.M22]-n[e.M22])<r&&Math.abs(t[e.M23]-n[e.M23])<r&&Math.abs(t[e.M24]-n[e.M24])<r&&Math.abs(t[e.M31]-n[e.M31])<r&&Math.abs(t[e.M32]-n[e.M32])<r&&Math.abs(t[e.M33]-n[e.M33])<r&&Math.abs(t[e.M34]-n[e.M34])<r&&Math.abs(t[e.OffsetX]-n[e.OffsetX])<r&&Math.abs(t[e.OffsetY]-n[e.OffsetY])<r&&Math.abs(t[e.OffsetZ]-n[e.OffsetZ])<r&&Math.abs(t[e.M44]-n[e.M44])<r},multiply:function(t,n,r){r||(r=t);var i=t[e.M11],a=t[e.M12],o=t[e.M13],s=t[e.M14],c=t[e.M21],u=t[e.M22],l=t[e.M23],h=t[e.M24],p=t[e.M31],f=t[e.M32],d=t[e.M33],v=t[e.M34],m=t[e.OffsetX],g=t[e.OffsetY],y=t[e.OffsetZ],x=t[e.M44],w=n[e.M11],T=n[e.M12],S=n[e.M13],M=n[e.M14],b=n[e.M21],P=n[e.M22],R=n[e.M23],D=n[e.M24],z=n[e.M31],$=n[e.M32],C=n[e.M33],F=n[e.M34],O=n[e.OffsetX],I=n[e.OffsetY],k=n[e.OffsetZ],A=n[e.M44];return r[e.M11]=i*w+a*b+o*z+s*O,r[e.M12]=i*T+a*P+o*$+s*I,r[e.M13]=i*S+a*R+o*C+s*k,r[e.M14]=i*M+a*D+o*F+s*A,r[e.M21]=c*w+u*b+l*z+h*O,r[e.M22]=c*T+u*P+l*$+h*I,r[e.M23]=c*S+u*R+l*C+h*k,r[e.M24]=c*M+u*D+l*F+h*A,r[e.M31]=p*w+f*b+d*z+v*O,r[e.M32]=p*T+f*P+d*$+v*I,r[e.M33]=p*S+f*R+d*C+v*k,r[e.M34]=p*M+f*D+d*F+v*A,r[e.OffsetX]=m*w+g*b+y*z+x*O,r[e.OffsetY]=m*T+g*P+y*$+x*I,r[e.OffsetZ]=m*S+g*R+y*C+x*k,r[e.M44]=m*M+g*D+y*F+x*A,r},inverse:function(t,n){n||(n=t);var r=t[e.M11],i=t[e.M12],a=t[e.M13],o=t[e.M14],s=t[e.M21],c=t[e.M22],u=t[e.M23],l=t[e.M24],h=t[e.M31],p=t[e.M32],f=t[e.M33],d=t[e.M34],v=t[e.OffsetX],m=t[e.OffsetY],g=t[e.OffsetZ],y=t[e.M44],x=r*c-i*s,w=r*u-a*s,T=r*l-o*s,S=i*u-a*c,M=i*l-o*c,b=a*l-o*u,P=h*m-p*v,R=h*g-f*v,D=h*y-d*v,z=p*g-f*m,$=p*y-d*m,C=f*y-d*g,F=x*C-w*$+T*z+S*D-M*R+b*P;if(!isFinite(F)||!F)return null;var O=1/F;return n[e.M11]=(c*C-u*$+l*z)*O,n[e.M12]=(-i*C+a*$-o*z)*O,n[e.M13]=(m*b-g*M+y*S)*O,n[e.M14]=(-p*b+f*M-d*S)*O,n[e.M21]=(-s*C+u*D-l*R)*O,n[e.M22]=(r*C-a*D+o*R)*O,n[e.M23]=(-v*b+g*T-y*w)*O,n[e.M24]=(h*b-f*T+d*w)*O,n[e.M31]=(s*$-c*D+l*P)*O,n[e.M32]=(-r*$+i*D-o*P)*O,n[e.M33]=(v*M-m*T+y*x)*O,n[e.M34]=(-h*M+p*T-d*x)*O,n[e.OffsetX]=(-s*z+c*R-u*P)*O,n[e.OffsetY]=(r*z-i*R+a*P)*O,n[e.OffsetZ]=(-v*S+m*w-g*x)*O,n[e.M44]=(h*S-p*w+f*x)*O,n},transformVec4:function(t,n,r){r||(r=n);var i=n[0],a=n[1],o=n[2],s=n[3],c=t[e.M11],u=t[e.M12],l=t[e.M13],h=t[e.M14],p=t[e.M21],f=t[e.M22],d=t[e.M23],v=t[e.M24],m=t[e.M31],g=t[e.M32],y=t[e.M33],x=t[e.M34],w=t[e.OffsetX],T=t[e.OffsetY],S=t[e.OffsetZ],M=t[e.M44];return r[0]=c*i+u*a+l*o+h*s,r[1]=p*i+f*a+d*o+v*s,r[2]=m*i+g*a+y*o+x*s,r[3]=w*i+T*a+S*o+M*s,r},createTranslate:function(n,r,i,a){return a||(a=t.mat4.create()),a[e.M11]=1,a[e.M12]=0,a[e.M13]=0,a[e.M14]=0,a[e.M21]=0,a[e.M22]=1,a[e.M23]=0,a[e.M24]=0,a[e.M31]=0,a[e.M32]=0,a[e.M33]=1,a[e.M34]=0,a[e.OffsetX]=n,a[e.OffsetY]=r,a[e.OffsetZ]=i,a[e.M44]=1,a},createScale:function(n,r,i,a){return a||(a=t.mat4.create()),a[e.M11]=n,a[e.M12]=0,a[e.M13]=0,a[e.M14]=0,a[e.M11]=0,a[e.M12]=r,a[e.M13]=0,a[e.M14]=0,a[e.M31]=0,a[e.M32]=0,a[e.M33]=i,a[e.M34]=0,a[e.OffsetX]=0,a[e.OffsetY]=0,a[e.OffsetZ]=0,a[e.M44]=1,a},createRotateX:function(n,r){r||(r=t.mat4.create());var i=Math.sin(n),a=Math.cos(n);return r[e.M11]=1,r[e.M12]=0,r[e.M13]=0,r[e.M14]=0,r[e.M21]=0,r[e.M22]=a,r[e.M23]=i,r[e.M24]=0,r[e.M31]=0,r[e.M32]=-i,r[e.M33]=a,r[e.M34]=0,r[e.OffsetX]=0,r[e.OffsetY]=0,r[e.OffsetZ]=0,r[e.M44]=1,r},createRotateY:function(n,r){r||(r=t.mat4.create());var i=Math.sin(n),a=Math.cos(n);return r[e.M11]=a,r[e.M12]=0,r[e.M13]=-i,r[e.M14]=0,r[e.M21]=0,r[e.M22]=1,r[e.M23]=0,r[e.M24]=0,r[e.M31]=i,r[e.M32]=0,r[e.M33]=a,r[e.M34]=0,r[e.OffsetX]=0,r[e.OffsetY]=0,r[e.OffsetZ]=0,r[e.M44]=1,r},createRotateZ:function(n,r){r||(r=t.mat4.create());var i=Math.sin(n),a=Math.cos(n);return r[e.M11]=a,r[e.M12]=i,r[e.M13]=0,r[e.M14]=0,r[e.M21]=-i,r[e.M22]=a,r[e.M23]=0,r[e.M24]=0,r[e.M31]=0,r[e.M32]=0,r[e.M33]=1,r[e.M34]=0,r[e.OffsetX]=0,r[e.OffsetY]=0,r[e.OffsetZ]=0,r[e.M44]=1,r},createPerspective:function(n,r,i,a,o){o||(o=t.mat4.create());var s=1/Math.tan(n/2),c=s/r,u=i-a;return o[e.M11]=c,o[e.M12]=0,o[e.M13]=0,o[e.M14]=0,o[e.M21]=0,o[e.M22]=s,o[e.M23]=0,o[e.M24]=0,o[e.M31]=0,o[e.M32]=0,o[e.M33]=a/u,o[e.M34]=-1,o[e.OffsetX]=0,o[e.OffsetY]=0,o[e.OffsetZ]=i*a/u,o[e.M44]=0,o},createViewport:function(n,r,i){return i||(i=t.mat4.create()),i[e.M11]=n/2,i[e.M12]=0,
i[e.M13]=0,i[e.M14]=0,i[e.M21]=0,i[e.M22]=-r/2,i[e.M23]=0,i[e.M24]=0,i[e.M31]=0,i[e.M32]=0,i[e.M33]=1,i[e.M34]=0,i[e.OffsetX]=n/2,i[e.OffsetY]=r/2,i[e.OffsetZ]=0,i[e.M44]=1,i}}}(minerva||(minerva={}));var mat4=minerva.mat4,minerva;!function(t){t.Rect.transform4=function(t,e){console.warn("[Rect.transform4] Not implemented")}}(minerva||(minerva={}));var minerva;!function(t){var e;e="undefined"!=typeof Float32Array?function(t){return new Float32Array(t)}:function(t){return new Array(t)},t.vec4={create:function(t,n,r,i){var a=e(4);return a[0]=t,a[1]=n,a[2]=r,a[3]=i,a},init:function(t,n,r,i,a){return a||(a=e(4)),a[0]=t,a[1]=n,a[2]=r,a[3]=i,a}}}(minerva||(minerva={}));var vec4=minerva.vec4,minerva;!function(t){var e;!function(e){function n(e,n,r){var i,a=r.strokeThickness/2,o=r.strokeStartLineCap||r.strokeEndLineCap||0;switch(o){case t.PenLineCap.Round:e.l=Math.min(e.l,n.sx-a),e.r=Math.max(e.r,n.sx+a),e.t=Math.min(e.t,n.sy-a),e.b=Math.max(e.b,n.sy+a);break;case t.PenLineCap.Square:if(!(i=n.getStartVector()))return;if(!i[0]||!i[1])return;var s=t.Vector.reverse(t.Vector.normalize(i.slice(0))),c=t.Vector.orthogonal(s.slice(0)),u=n.sx+a*(s[0]+c[0]),l=n.sx+a*(s[0]-c[0]),h=n.sy+a*(s[1]+c[1]),p=n.sy+a*(s[1]-c[1]);e.l=Math.min(e.l,u,l),e.r=Math.max(e.r,u,l),e.t=Math.min(e.t,h,p),e.b=Math.max(e.b,h,p);break;case t.PenLineCap.Flat:default:if(!(i=n.getStartVector()))return;if(!i[0]||!i[1])return;var c=t.Vector.orthogonal(t.Vector.normalize(i.slice(0))),u=n.sx+a*c[0],l=n.sx+a*-c[0],h=n.sy+a*c[1],p=n.sy+a*-c[1];e.l=Math.min(e.l,u,l),e.r=Math.max(e.r,u,l),e.t=Math.min(e.t,h,p),e.b=Math.max(e.b,h,p)}}function r(e,n,r){var i,a=n.ex,o=n.ey,s=r.strokeThickness/2,c=r.strokeStartLineCap||r.strokeEndLineCap||0;switch(c){case t.PenLineCap.Round:e.l=Math.min(e.l,a-s),e.r=Math.max(e.r,a+s),e.t=Math.min(e.t,o-s),e.b=Math.max(e.b,o+s);break;case t.PenLineCap.Square:if(!(i=n.getEndVector()))return;var u=t.Vector.normalize(i.slice(0)),l=t.Vector.orthogonal(u.slice(0)),h=a+s*(u[0]+l[0]),p=a+s*(u[0]-l[0]),f=o+s*(u[1]+l[1]),d=o+s*(u[1]-l[1]);e.l=Math.min(e.l,h,p),e.r=Math.max(e.r,h,p),e.t=Math.min(e.t,f,d),e.b=Math.max(e.b,f,d);break;case t.PenLineCap.Flat:default:if(!(i=n.getEndVector()))return;var l=t.Vector.orthogonal(t.Vector.normalize(i.slice(0))),h=a+s*l[0],p=a+s*-l[0],f=o+s*l[1],d=o+s*-l[1];e.l=Math.min(e.l,h,p),e.r=Math.max(e.r,h,p),e.t=Math.min(e.t,f,d),e.b=Math.max(e.b,f,d)}}function i(e,n,r,i){var a=i.strokeThickness/2;i.strokeLineJoin===t.PenLineJoin.Round&&(e.l=Math.min(e.l,r.sx-a),e.r=Math.max(e.r,r.sx+a),e.t=Math.min(e.t,r.sy-a),e.b=Math.max(e.b,r.sy+a));var c=i.strokeLineJoin===t.PenLineJoin.Miter?o(n,r,a,i.strokeMiterLimit):s(n,r,a);if(c){var u=c[0].x,l=c[1].x,h=c[0].y,p=c[1].y;e.l=Math.min(e.l,u,l),e.r=Math.max(e.r,u,l),e.t=Math.min(e.t,h,p),e.b=Math.max(e.b,h,p)}}function a(t,e,a){function o(e,r){e.sx=u,e.sy=l,e.isSingle||(!e.isMove&&f&&(h=e.sx,p=e.sy,n(t,e,a)),!f&&r>0&&i(t,c,e,a)),e.extendStrokeBox(t,a),u=e.ex||0,l=e.ey||0,f=!!e.isMove,c=e}for(var s=e.length,c=null,u=null,l=null,h=null,p=null,f=!1,d=0;s>d;d++)o(e[d],d);var v=e[s-1];v&&!v.isSingle&&r(t,v,a)}function o(e,n,r,i){var a=n.sx,o=n.sy,c=e.getEndVector(),u=n.getStartVector();if(!c||!u)return null;t.Vector.reverse(c);var l=t.Vector.angleBetween(c,u)/2;if(isNaN(l))return null;var h=1/Math.sin(l);if(h>i)return s(e,n,r);var p=t.Vector.isClockwiseTo(c,u)?c.slice(0):u.slice(0);t.Vector.normalize(t.Vector.reverse(t.Vector.rotate(p,l)));var f=r*h,d={x:a+f*p[0],y:o+f*p[1]};return[d,d]}function s(e,n,r){var i=n.sx,a=n.sy,o=e.getEndVector(),s=n.getStartVector();if(o&&s){t.Vector.normalize(t.Vector.reverse(o)),t.Vector.normalize(s);var c,u;return t.Vector.isClockwiseTo(o,s)?(c=t.Vector.orthogonal(o.slice(0)),u=t.Vector.reverse(t.Vector.orthogonal(s.slice(0)))):(c=t.Vector.reverse(t.Vector.orthogonal(o.slice(0))),u=t.Vector.orthogonal(s.slice(0))),[{x:i-r*c[0],y:a-r*c[1]},{x:i-r*u[0],y:a-r*u[1]}]}}var c=function(){function n(){this.$$entries=[],this.$$endX=0,this.$$endY=0}return Object.defineProperty(n.prototype,"endX",{get:function(){return this.$$endX},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"endY",{get:function(){return this.$$endY},enumerable:!0,configurable:!0}),n.prototype.reset=function(){this.$$entries.length=0,this.$$endX=0,this.$$endY=0},n.prototype.move=function(t,n){this.$$entries.push(e.segments.move(t,n)),this.$$endX=t,this.$$endY=n},n.prototype.line=function(t,n){this.$$entries.push(e.segments.line(t,n)),this.$$endX=t,this.$$endY=n},n.prototype.quadraticBezier=function(t,n,r,i){this.$$entries.push(e.segments.quadraticBezier(t,n,r,i)),this.$$endX=r,this.$$endY=i},n.prototype.cubicBezier=function(t,n,r,i,a,o){this.$$entries.push(e.segments.cubicBezier(t,n,r,i,a,o)),this.$$endX=a,this.$$endY=o},n.prototype.ellipse=function(t,n,r,i){this.$$entries.push(e.segments.ellipse(t,n,r,i)),this.$$endX=t,this.$$endY=n},n.prototype.ellipticalArc=function(t,n,r,i,a,o,s){this.$$entries.push(e.segments.ellipticalArc(t,n,r,i,a,o,s)),this.$$endX=o,this.$$endY=s},n.prototype.arc=function(t,n,r,i,a,o){this.$$entries.push(e.segments.arc(t,n,r,i,a,o))},n.prototype.arcTo=function(t,n,r,i,a){var o=e.segments.arcTo(t,n,r,i,a);this.$$entries.push(o),this.$$endX=o.ex,this.$$endY=o.ey},n.prototype.rect=function(t,n,r,i){this.$$entries.push(e.segments.rect(t,n,r,i))},n.prototype.roundedRect=function(t,n,r,i,a,o){this.$$entries.push(e.segments.roundedRect(t,n,r,i,a,o)),this.$$endX=t,this.$$endY=n},n.prototype.close=function(){this.$$entries.push(e.segments.close())},n.prototype.draw=function(t){t.beginPath();for(var e=this.$$entries,n=e.length,r=0;n>r;r++)e[r].draw(t)},n.prototype.calcBounds=function(e){if(this.$$entries.length<=0)return new t.Rect;var n=e&&e.strokeThickness>1?this.$$calcStrokeBox(e):this.$$calcFillBox();return new t.Rect(n.l,n.t,Math.max(0,n.r-n.l),Math.max(0,n.b-n.t))},n.prototype.$$calcFillBox=function(){for(var t,e=this.$$entries,n=e.length,r={l:Number.POSITIVE_INFINITY,r:Number.NEGATIVE_INFINITY,t:Number.POSITIVE_INFINITY,b:Number.NEGATIVE_INFINITY},i=null,a=null,o=0;n>o;o++)t=e[o],t.sx=i,t.sy=a,t.extendFillBox(r),i=t.ex||0,a=t.ey||0;return r},n.prototype.$$calcStrokeBox=function(t){var e={l:Number.POSITIVE_INFINITY,r:Number.NEGATIVE_INFINITY,t:Number.POSITIVE_INFINITY,b:Number.NEGATIVE_INFINITY};return a(e,this.$$entries,t),e},n.Merge=function(t,e){t.$$entries.push.apply(t.$$entries,e.$$entries),t.$$endX+=e.$$endX,t.$$endY+=e.$$endY},n.prototype.Serialize=function(){for(var t=this.$$entries,e=t.length,n="",r=0;e>r;r++)r>0&&(n+=" "),n+=t[r].toString();return n},n}();e.Path=c,e.findMiterTips=o,e.findBevelTips=s}(e=t.path||(t.path={}))}(minerva||(minerva={})),function(t){t.perfex||(t.perfex={}),t.perfex.timer||(t.perfex.timer={all:[],reset:function(){},start:function(t){},stop:function(){}}),t.perfex.phases||(t.perfex.phases={current:null,all:[],start:function(t){}})}(window);var minerva;!function(t){var e;!function(e){function n(t){return isFinite(t.availableWidth)?t.availableWidth:isFinite(t.maxWidth)?Math.min(t.actualWidth,t.maxWidth):t.actualWidth}var r=function(){function r(){}return r.prototype.createAssets=function(){return{availableWidth:Number.POSITIVE_INFINITY,actualWidth:NaN,actualHeight:NaN,maxWidth:Number.POSITIVE_INFINITY,maxHeight:Number.POSITIVE_INFINITY,lines:[],selCached:!1}},r.prototype.setMaxWidth=function(t,e,n){return e.maxWidth===n?!1:(e.maxWidth=n,e.actualWidth=NaN,e.actualHeight=NaN,!0)},r.prototype.layout=function(t,e,n,r){if(!isNaN(e.actualWidth))return!1;e.maxWidth=n.width,e.actualWidth=0,e.actualHeight=0,e.lines=[];for(var i=0;r.step();)i+=r.current.layout(t,e);return!0},r.prototype.render=function(t,n,r){var i=this;this.splitSelection(n,r),t.save(),r.lines.forEach(function(a){var o=i.getHorizontalAlignmentX(n,r,a.width);t.translate(o,0),a.runs.forEach(function(n){n.pre&&(e.layout.Cluster.render(n.pre,n.attrs,t),t.translate(n.pre.width,0)),n.sel&&(e.layout.Cluster.render(n.sel,n.attrs,t),t.translate(n.sel.width,0)),n.post&&(e.layout.Cluster.render(n.post,n.attrs,t),t.translate(n.post.width,0))}),t.translate(-a.width-o,a.height)}),t.restore()},r.prototype.getCursorFromPoint=function(t,e,n){var r=n.lines[0];if(!r)return 0;var i=0;if(t.y>0)for(var a=0,o=n.lines,s=0,c=o.length;c>s&&(r=o[s],!(t.y<=a+r.height));s++)i+=r.runs.reduce(function(t,e){return t+e.length},0),a+=r.height;var u=t.x-this.getHorizontalAlignmentX(e,n,r.width);if(0>u)return i;for(var l=0,s=0,h=r.runs,c=h.length;c>s;s++){var p=h[s];if(u<=l+p.width)break;i+=p.length,l+=p.width}var p=h[s];if(!p)return i;for(var f,d=Math.max(0,Math.min(p.text.length,Math.ceil((u-l)/p.width*p.text.length))),v=p.text.substr(0,d);d>0&&(f=this.measureTextWidth(v,p.attrs.font))>u;)d--,v=p.text.substr(0,d);for(var m=d;d<p.text.length&&(f=this.measureTextWidth(v,p.attrs.font))<u;)m=d,d++,v=p.text.substr(0,d);return i+m},r.prototype.getCaretFromCursor=function(e,n){for(var r=e.selectionStart,i=0,a=new t.Rect(0,0,1,0),o=0,s=n.lines,c=0,u=s.length;u>c;c++){var l=s[c];a.x=this.getHorizontalAlignmentX(e,n,l.width),a.height=l.height;for(var h=l.runs,p=0,f=h.length;f>p;p++){var d=h[p];if(i+d.length>r)return a.x+=this.measureTextWidth(d.text.substr(0,r-i),d.attrs.font),a;i+=d.length,a.x+=l.width}a.y+=l.height,o=l.height}return a.y-=o,a},r.prototype.splitSelection=function(t,n){var r=this;if(!n.selCached){var i=t.selectionStart;n.lines.forEach(function(n){return n.runs.forEach(function(n){e.layout.Run.splitSelection(n,i,i+t.selectionLength,function(t,e){return r.measureTextWidth(t,e.font)}),i-=n.length})}),n.selCached=!0}},r.prototype.getHorizontalAlignmentX=function(e,r,i){if(e.textAlignment===t.TextAlignment.Left||e.textAlignment===t.TextAlignment.Justify||e.textWrapping===t.TextWrapping.NoWrap&&e.textTrimming!==t.TextTrimming.None)return 0;var a=n(r);return i>=a?0:e.textAlignment===t.TextAlignment.Center?(a-i)/2:a-i},r.prototype.measureTextWidth=function(e,n){return t.engine.Surface.measureWidth(e,n)},r}();e.DocumentLayoutDef=r}(e=t.text||(t.text={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){function e(t){return{def:t,assets:t.createAssets()}}t.createDocumentLayout=e}(e=t.text||(t.text={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n=function(){function n(){this.assets={fontFamily:t.Font.DEFAULT_FAMILY,fontSize:t.Font.DEFAULT_SIZE,fontStretch:t.Font.DEFAULT_STRETCH,fontStyle:t.Font.DEFAULT_STYLE,fontWeight:t.Font.DEFAULT_WEIGHT,textDecorations:t.TextDecorations.None,language:"",background:null,selectionBackground:null,foreground:null,selectionForeground:null,isUnderlined:!1,font:new t.Font,text:""},this.init()}return n.prototype.init=function(){this.setTextLayout()},n.prototype.setTextLayout=function(t){return this.$$textlayout?this:(this.$$textlayout=t||new e.run.RunLayoutDef,this)},n.prototype.layout=function(t,e){return this.$$textlayout.layout(t,e,this.assets),this.assets.text.length},n.prototype.invalidateFont=function(){var e=this.assets;return t.Font.mergeInto(e.font,e.fontFamily,e.fontSize,e.fontStretch,e.fontStyle,e.fontWeight)},n}();e.TextUpdater=n}(e=t.text||(t.text={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n=function(e){function n(n){e.call(this),this.replaceTapin("doOverride",function(e,r,i,a,o){var s=new t.Size;t.Size.copyTo(r.finalSize,s);var c=n.arrangeOverride(s);return t.Size.copyTo(c,r.arrangedSize),!0})}return __extends(n,e),n}(t.core.arrange.ArrangePipeDef);e.AnonymousArrangePipeDef=n}(n=e.arrange||(e.arrange={}))}(e=t.anon||(t.anon={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n=function(e){function n(n){e.call(this),this.replaceTapin("doOverride",function(e,r,i,a,o){var o=new t.Size;t.Size.copyTo(r.availableSize,o);var s=n.measureOverride(o);return t.Size.copyTo(s,i.desiredSize),!0})}return __extends(n,e),n}(t.core.measure.MeasurePipeDef);e.AnonymousMeasurePipeDef=n}(n=e.measure||(e.measure={}))}(e=t.anon||(t.anon={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n=function(n){function r(){n.apply(this,arguments)}return __extends(r,n),r.prototype.init=function(){this.setTree(new e.BorderUpdaterTree).setMeasurePipe(t.singleton(e.measure.BorderMeasurePipeDef)).setArrangePipe(t.singleton(e.arrange.BorderArrangePipeDef)).setRenderPipe(t.singleton(t.core.render.RenderContext.hasFillRule?e.render.BorderRenderPipeDef:e.render.ShimBorderRenderPipeDef)).setHitTestPipe(t.singleton(e.hittest.BorderHitTestPipeDef));var r=this.assets;r.padding=new t.Thickness,r.borderThickness=new t.Thickness,r.cornerRadius=new t.CornerRadius,n.prototype.init.call(this)},r}(t.core.Updater);e.BorderUpdater=n}(n=e.border||(e.border={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n=function(t){function e(){t.apply(this,arguments),this.isLayoutContainer=!0,this.isContainer=!0}return __extends(e,t),e.prototype.walk=function(t){var e=!1,n=this;return{current:void 0,step:function(){return this.current=e?void 0:n.subtree,e=!0,null!=this.current}}},e}(t.core.UpdaterTree);e.BorderUpdaterTree=n}(n=e.border||(e.border={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n=function(n){function r(){n.apply(this,arguments)}return __extends(r,n),r.prototype.init=function(){var r=this.assets;r.background=null,this.setTree(new e.PanelUpdaterTree).setMeasurePipe(t.singleton(e.measure.PanelMeasurePipeDef)).setArrangePipe(t.singleton(e.arrange.PanelArrangePipeDef)).setProcessUpPipe(t.singleton(e.processup.PanelProcessUpPipeDef)).setRenderPipe(t.singleton(e.render.PanelRenderPipeDef)).setHitTestPipe(t.singleton(e.hittest.PanelHitTestPipeDef)),n.prototype.init.call(this)},r.prototype.setChildren=function(t){return this.tree.children=t,this},r}(t.core.Updater);e.PanelUpdater=n;var r;!function(t){function e(t,e,n){var r=t.tree.visualParent;r&&(r.tree.zSorted=null)}t.zIndex=e}(r=e.reactTo||(e.reactTo={}))}(n=e.panel||(e.panel={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(n){var r=function(e){function r(){e.apply(this,arguments)}return __extends(r,e),r.prototype.init=function(){this.setMeasurePipe(t.singleton(n.measure.CanvasMeasurePipeDef)).setArrangePipe(t.singleton(n.arrange.CanvasArrangePipeDef)).setProcessDownPipe(t.singleton(n.processdown.CanvasProcessDownPipeDef)).setProcessUpPipe(t.singleton(n.processup.CanvasProcessUpPipeDef));var r=this.assets;r.breakLayoutClip=!0,e.prototype.init.call(this)},r}(e.panel.PanelUpdater);n.CanvasUpdater=r;var i;!function(e){function n(t,e,n){a(t)}function i(t,e,n){a(t)}function a(e){var n=e.tree.visualParent;if(e instanceof r&&!n&&(e.assets.dirtyFlags|=t.DirtyFlags.LocalTransform,t.core.Updater.$$addDownDirty(e),e.invalidateArrange()),n instanceof r){var i=e.assets.layoutSlot;t.Size.copyTo(e.assets.desiredSize,i),i.x=e.getAttachedValue("Canvas.Left"),i.y=e.getAttachedValue("Canvas.Top"),e.assets.useLayoutRounding&&(i.x=Math.round(i.x),i.y=Math.round(i.y),i.width=Math.round(i.width),i.height=Math.round(i.height)),e.invalidateArrange()}}e.left=n,e.top=i}(i=n.reactTo||(n.reactTo={}))}(n=e.canvas||(e.canvas={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n=function(n){function r(){n.apply(this,arguments)}return __extends(r,n),r.prototype.init=function(){this.setTree(new e.ControlUpdaterTree).setHitTestPipe(t.singleton(e.hittest.ControlHitTestPipeDef)),this.assets.isEnabled=!0,n.prototype.init.call(this)},r}(t.core.Updater);e.ControlUpdater=n}(n=e.control||(e.control={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n=function(t){function e(){t.call(this),this.isContainer=!0,this.isLayoutContainer=!0}return __extends(e,t),e}(t.core.UpdaterTree);e.ControlUpdaterTree=n}(n=e.control||(e.control={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(n){var r=function(e){function r(){e.apply(this,arguments)}return __extends(r,e),r.prototype.init=function(){this.setMeasurePipe(t.singleton(n.measure.GridMeasurePipeDef)).setArrangePipe(t.singleton(n.arrange.GridArrangePipeDef)).setProcessUpPipe(t.singleton(n.processup.GridProcessUpPipeDef)).setRenderPipe(t.singleton(n.render.GridRenderPipeDef));var r=this.assets;r.showGridLines=!1,r.columnDefinitions=[],r.rowDefinitions=[],r.gridState=n.createGridState(),e.prototype.init.call(this)},r}(e.panel.PanelUpdater);n.GridUpdater=r;var i;!function(t){function e(t){var e=t.tree.visualParent;e instanceof r&&e.invalidateMeasure(),t.invalidateMeasure()}function n(t,e,n){t.invalidateMeasure(),t.invalidate()}function i(t,n,r){e(t)}function a(t,n,r){e(t)}function o(t,n,r){e(t)}function s(t,n,r){e(t)}t.showGridLines=n,t.column=i,t.columnSpan=a,t.row=o,t.rowSpan=s}(i=n.reactTo||(n.reactTo={}))}(n=e.grid||(e.grid={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){function e(){return{rowMatrix:[],colMatrix:[]}}t.createGridState=e}(e=t.grid||(t.grid={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e=function(){function e(){this.desired=0,this.offered=0,this.original=0,this.min=0,this.max=Number.POSITIVE_INFINITY,this.stars=0,this.type=t.GridUnitType.Pixel}return e.prototype.clamp=function(t){return t<this.min?this.min:t>this.max?this.max:t},e.init=function(e,n,r,i,a){return e.desired=0,e.stars=0,e.offered=n||0,e.min=r||0,e.max=null!=i?i:Number.POSITIVE_INFINITY,e.type=null!=a?a:t.GridUnitType.Pixel,e.offered<r?e.offered=r:e.offered>i&&(e.offered=i),e},e}();t.Segment=e}(e=t.grid||(t.grid={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n=function(n){function r(){n.apply(this,arguments)}return __extends(r,n),r.prototype.init=function(){this.setMeasurePipe(t.singleton(e.measure.ImageMeasurePipeDef)).setArrangePipe(t.singleton(e.arrange.ImageArrangePipeDef)).setProcessDownPipe(t.singleton(e.processdown.ImageProcessDownPipeDef)).setRenderPipe(t.singleton(e.render.ImageRenderPipeDef)).setHitTestPipe(t.singleton(e.hittest.ImageHitTestPipeDef));var r=this.assets;r.source=null,r.stretch=t.Stretch.Uniform,r.overlap=t.RectOverlap.In,r.imgXform=t.mat3.identity(),n.prototype.init.call(this)},r.prototype.invalidateMetrics=function(){return this.assets.dirtyFlags|=t.DirtyFlags.ImageMetrics,t.core.Updater.$$addDownDirty(this),this},r}(t.core.Updater);e.ImageUpdater=n}(n=e.image||(e.image={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n=function(n){function r(){n.apply(this,arguments)}return __extends(r,n),r.prototype.init=function(){this.setTree(new e.OverlayUpdaterTree).setProcessUpPipe(t.singleton(e.processup.OverlayProcessUpPipeDef)).setHitTestPipe(t.singleton(e.hittest.OverlayHitTestPipeDef));var r=this.assets;r.isVisible=!1,r.isOpen=!1,n.prototype.init.call(this)},r.prototype.setInitiator=function(t){this.tree.initiatorSurface=t.tree.surface},r.prototype.setLayer=function(t){this.hide(),this.tree.layer=t,this.assets.isOpen&&this.show()},r.prototype.hide=function(){var t=this.tree.layer;if(!this.assets.isVisible||!t)return!1;this.assets.isVisible=!1;var e=this.tree.initiatorSurface;return e?(e.detachLayer(t),!0):!1},r.prototype.show=function(){var t=this.tree.layer;if(this.assets.isVisible||!t)return!1;this.assets.isVisible=!0;var e=this.tree.initiatorSurface;return e?(e.attachLayer(t),!0):!1},r}(t.core.Updater);e.OverlayUpdater=n;var r;!function(t){function e(t,e,n){n===!0?t.show():t.hide()}t.isOpen=e}(r=e.reactTo||(e.reactTo={}))}(n=e.overlay||(e.overlay={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n=function(t){function e(){t.apply(this,arguments),this.layer=void 0,this.initiatorSurface=void 0}return __extends(e,t),e}(t.core.UpdaterTree);e.OverlayUpdaterTree=n}(n=e.overlay||(e.overlay={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){function n(t,e){var n,r=t.length,i={step:void 0,current:void 0};return e?(n=r,i.step=function(){return n--,0>n?(i.current=void 0,!1):(i.current=t[n],!0)}):(n=-1,i.step=function(){return n++,n>=r?(i.current=void 0,!1):(i.current=t[n],!0)}),i}function r(t,e){var n=t.getAttachedValue("Panel.ZIndex"),r=e.getAttachedValue("Panel.ZIndex");if(null==n&&null==r)n=t.getAttachedValue("Panel.Index"),r=e.getAttachedValue("Panel.Index");else{if(null==n)return r>0?-1:1;if(null==r)return n>0?1:-1}return n===r?0:r>n?-1:1}var i=function(e){function i(){e.call(this),this.children=null,this.zSorted=null,this.isContainer=!0,this.isLayoutContainer=!0}return __extends(i,e),i.prototype.walk=function(e){return e===t.WalkDirection.ZForward||e===t.WalkDirection.ZReverse?(this.zSort(),n(this.zSorted,e===t.WalkDirection.ZReverse)):n(this.children,e===t.WalkDirection.Reverse)},i.prototype.zSort=function(){var t=this.zSorted;if(!t){t=this.zSorted=[];for(var e=0,n=this.walk();n.step();e++){var i=n.current;i.setAttachedValue("Panel.Index",e),t.push(i)}t.sort(r)}},i.prototype.onChildAttached=function(t){this.zSorted=null},i.prototype.onChildDetached=function(t){this.zSorted=null},i}(t.core.UpdaterTree);e.PanelUpdaterTree=i}(n=e.panel||(e.panel={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n=function(n){function r(){n.apply(this,arguments)}return __extends(r,n),r.prototype.init=function(){this.setTree(new e.PopupUpdaterTree).setProcessDownPipe(t.singleton(e.processdown.PopupProcessDownPipeDef)).setProcessUpPipe(t.singleton(e.processup.PopupProcessUpPipeDef)).setHitTestPipe(t.singleton(e.hittest.PopupHitTestPipeDef));var r=this.assets;r.horizontalOffset=0,r.verticalOffset=0,r.isVisible=!1,r.isOpen=!1,n.prototype.init.call(this)},r.prototype.setInitiator=function(t){this.tree.initiatorSurface=t.tree.surface},r.prototype.setChild=function(e){var n=this.tree.popupChild;n&&(n.assets.carrierXform=null),this.tree.popupChild=e,e&&(e.assets.carrierXform=t.mat3.identity())},r.prototype.setLayer=function(t){this.hide(),this.tree.layer=t,this.assets.isOpen&&this.show()},r.prototype.hide=function(){var t=this.tree.layer;if(!this.assets.isVisible||!t)return!1;this.assets.isVisible=!1;var e=this.tree.initiatorSurface;return e?(e.detachLayer(t),!0):!1},r.prototype.show=function(){var t=this.tree.layer;if(this.assets.isVisible||!t)return!1;this.assets.isVisible=!0;var e=this.tree.initiatorSurface;return e?(e.attachLayer(t),!0):!1},r}(t.core.Updater);e.PopupUpdater=n;var r;!function(e){function n(t,e,n){n===!0?t.show():t.hide()}function r(t,e,n){var r=t.tree,i=r.popupChild;if(i){var o=n-e;0!==o&&(a(i,o,0),r.layer&&r.layer.invalidateMeasure())}}function i(t,e,n){var r=t.tree,i=r.popupChild;if(i){var o=n-e;0!==o&&(a(i,0,o),r.layer&&r.layer.invalidateMeasure())}}function a(e,n,r){e.assets.carrierXform&&t.mat3.translate(e.assets.carrierXform,n,r)}e.isOpen=n,e.horizontalOffset=r,e.verticalOffset=i}(r=e.reactTo||(e.reactTo={}))}(n=e.popup||(e.popup={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n=function(t){function e(){t.apply(this,arguments),this.popupChild=void 0,this.layer=void 0,this.initiatorSurface=void 0}return __extends(e,t),e}(t.core.UpdaterTree);e.PopupUpdaterTree=n}(n=e.popup||(e.popup={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n=function(n){function r(){n.apply(this,arguments)}return __extends(r,n),r.prototype.init=function(){this.setMeasurePipe(t.singleton(e.measure.ScrollContentPresenterMeasurePipeDef)).setArrangePipe(t.singleton(e.arrange.ScrollContentPresenterArrangePipeDef)).setRenderPipe(t.singleton(e.render.ScrollContentPresenterRenderPipeDef));var r=this.assets;r.internalClip=new t.Rect,r.scrollData={canHorizontallyScroll:!1,canVerticallyScroll:!1,offsetX:0,offsetY:0,cachedOffsetX:0,cachedOffsetY:0,viewportWidth:0,viewportHeight:0,extentWidth:0,extentHeight:0,maxDesiredWidth:0,maxDesiredHeight:0,invalidate:function(){}},n.prototype.init.call(this)},r}(t.core.Updater);e.ScrollContentPresenterUpdater=n}(n=e.scrollcontentpresenter||(e.scrollcontentpresenter={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t){var e=!1,a=n(t,t.cachedOffsetX);i(a,t.offsetX)||(t.offsetX=a,e=!0);var o=r(t,t.cachedOffsetY);return i(o,t.offsetY)||(t.offsetY=o,e=!0),e}function n(t,e){return t.canHorizontallyScroll?Math.max(0,Math.min(e,t.extentWidth-t.viewportWidth)):0}function r(t,e){return t.canVerticallyScroll?Math.max(0,Math.min(e,t.extentHeight-t.viewportHeight)):0}function i(t,e){if(t===e)return!0;var n=(Math.abs(t)+Math.abs(e)+o)*a,r=t-e;return r>-n&&n>r}t.clampOffsets=e;var a=1.192093e-7,o=10}(e=t.helpers||(t.helpers={}))}(e=t.scrollcontentpresenter||(t.scrollcontentpresenter={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(n){var r=function(e){function r(){e.apply(this,arguments)}return __extends(r,e),r.prototype.init=function(){this.setMeasurePipe(t.singleton(n.measure.StackPanelMeasurePipeDef)).setArrangePipe(t.singleton(n.arrange.StackPanelArrangePipeDef)),this.assets.orientation=t.Orientation.Vertical,e.prototype.init.call(this)},r}(e.panel.PanelUpdater);n.StackPanelUpdater=r}(n=e.stackpanel||(e.stackpanel={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n=function(n){function r(){n.apply(this,arguments)}return __extends(r,n),r.prototype.init=function(){this.setTree(new e.TextBlockUpdaterTree).setMeasurePipe(t.singleton(e.measure.TextBlockMeasurePipeDef)).setArrangePipe(t.singleton(e.arrange.TextBlockArrangePipeDef)).setProcessUpPipe(t.singleton(e.processup.TextBlockProcessUpPipeDef)).setRenderPipe(t.singleton(e.render.TextBlockRenderPipeDef)).setHitTestPipe(t.singleton(e.hittest.TextBlockHitTestPipeDef)),this.setDocument();var r=this.assets;r.padding=new t.Thickness,r.selectionStart=0,r.selectionLength=0,r.textWrapping=t.TextWrapping.NoWrap,r.textAlignment=t.TextAlignment.Left,r.textTrimming=t.TextTrimming.None,r.lineStackingStrategy=t.LineStackingStrategy.MaxHeight,r.lineHeight=NaN,n.prototype.init.call(this)},r.prototype.setDocument=function(e){return this.tree.doc?this:(this.tree.doc=t.text.createDocumentLayout(e||new t.text.DocumentLayoutDef),this)},r.prototype.invalidateFont=function(t){t===!0&&(this.invalidateMeasure(),this.invalidateArrange(),this.updateBounds(!0)),this.invalidate()},r.prototype.invalidateTextMetrics=function(){this.invalidateMeasure(),this.invalidateArrange(),this.updateBounds(!0),this.invalidate();var t=this.tree.doc.assets;t.actualWidth=NaN,t.actualHeight=NaN},r}(t.core.Updater);e.TextBlockUpdater=n}(n=e.textblock||(e.textblock={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n=function(e){function n(){e.apply(this,arguments),this.children=[]}return __extends(n,e),n.prototype.setMaxWidth=function(t,e){return this.doc.def.setMaxWidth(e,this.doc.assets,t)},n.prototype.layout=function(e,n){var r=this.doc;return r.def.layout(n,r.assets,e,this.walkText()),new t.Size(r.assets.actualWidth,r.assets.actualHeight)},n.prototype.render=function(t,e){var n=this.doc;n.def.render(t,e,n.assets)},n.prototype.setAvailableWidth=function(t){this.doc.assets.availableWidth=t},n.prototype.getHorizontalOffset=function(t){var e=this.doc;return e.def.getHorizontalAlignmentX(t,e.assets,e.assets.actualWidth)},n.prototype.clearText=function(){this.children.length=0},n.prototype.walkText=function(){var t=-1,e=this.children;return{current:void 0,step:function(){return t++,this.current=e[t],void 0!==this.current}}},n.prototype.onTextAttached=function(t,e){null==e||0>e||e>=this.children.length?this.children.push(t):this.children.splice(e,0,t)},n.prototype.onTextDetached=function(t){var e=this.children.indexOf(t);e>-1&&this.children.splice(e,1)},n}(t.core.UpdaterTree);e.TextBlockUpdaterTree=n}(n=e.textblock||(e.textblock={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){var e=3,n=2,r=3,i=4,a=900,o=function(){function t(t){this.isEnabled=!0,this.isVisible=!1,this.$$blink_delay=a,this.$$timeout=0,this.$$onChange=t}return t.prototype.delay=function(){this.$disconnect(),this.$connect(r),this.$show()},t.prototype.begin=function(){0===this.$$timeout&&(this.$connect(i),this.$show())},t.prototype.end=function(){this.$disconnect(),this.$hide()},t.prototype.$connect=function(t){var n=this,r=this.$$blink_delay*t/e;this.$$timeout=window.setTimeout(function(){return n.$blink()},r)},t.prototype.$disconnect=function(){0!==this.$$timeout&&(window.clearTimeout(this.$$timeout),this.$$timeout=0)},t.prototype.$blink=function(){this.isVisible?(this.$hide(),this.$connect(n)):(this.$show(),this.$connect(i))},t.prototype.$show=function(){this.isVisible||(this.isVisible=!0,this.$$onChange&&this.$$onChange(!0))},t.prototype.$hide=function(){this.isVisible&&(this.isVisible=!1,this.$$onChange&&this.$$onChange(!1))},t}();t.Blinker=o}(e=t.textboxview||(t.textboxview={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n=function(n){function r(){n.apply(this,arguments)}return __extends(r,n),r.prototype.init=function(){var r=this;this.setTree(new e.TextBoxViewUpdaterTree).setMeasurePipe(t.singleton(e.measure.TextBoxViewMeasurePipeDef)).setArrangePipe(t.singleton(e.arrange.TextBoxViewArrangePipeDef)).setProcessUpPipe(t.singleton(e.processup.TextBoxViewProcessUpPipeDef)).setRenderPipe(t.singleton(e.render.TextBoxViewRenderPipeDef)).setHitTestPipe(t.singleton(e.hittest.TextBoxViewHitTestPipeDef)),this.setDocument();var i=this.assets;i.selectionStart=0,i.selectionLength=0,i.textWrapping=t.TextWrapping.NoWrap,i.textAlignment=t.TextAlignment.Left,i.lineStackingStrategy=t.LineStackingStrategy.MaxHeight,i.lineHeight=NaN,i.isCaretVisible=!1,i.caretBrush=null,i.caretRegion=new t.Rect,i.isReadOnly=!1,this.blinker=new e.Blinker(function(t){r.assets.isCaretVisible=t,r.invalidateCaret()}),n.prototype.init.call(this)},r.prototype.setDocument=function(e){return this.tree.doc?this:(this.tree.doc=t.text.createDocumentLayout(e||new t.text.DocumentLayoutDef),this)},r.prototype.getCursorFromPoint=function(t){var e=this.tree.doc;return e.def.getCursorFromPoint(t,this.assets,e.assets)},r.prototype.invalidateFont=function(t){t===!0&&(this.invalidateMeasure(),this.invalidateArrange(),this.updateBounds(!0)),this.invalidate()},r.prototype.invalidateTextMetrics=function(){return this.invalidateMeasure().invalidateArrange().updateBounds(!0).invalidate(),this},r.prototype.invalidateMeasure=function(){n.prototype.invalidateMeasure.call(this);var t=this.tree.doc.assets;return t.actualWidth=NaN,t.actualHeight=NaN,this},r.prototype.invalidateCaret=function(){var e=this.assets,n=new t.Rect;t.Rect.copyTo(e.caretRegion,n),t.Rect.transform(n,e.absoluteXform),this.invalidate(n)},r.prototype.invalidateSelectionStart=function(){this.tree.doc.assets.selCached=!1,this.invalidateCaretRegion(),this.resetCaretBlinker(!0)},r.prototype.invalidateSelectionLength=function(t){this.tree.doc.assets.selCached=!1,this.invalidate(),this.resetCaretBlinker(t),t&&this.invalidateCaretRegion()},r.prototype.invalidateCaretRegion=function(){this.invalidateCaret();var t=this.assets.caretRegion;t.x=t.y=t.width=t.height=0},r.prototype.resetCaretBlinker=function(t){
var e=this.assets,n=this.blinker;return e.selectionLength>0||e.isReadOnly||!e.isFocused?n.end():t?n.delay():n.begin()},r}(t.core.Updater);e.TextBoxViewUpdater=n}(n=e.textboxview||(e.textboxview={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n=function(e){function n(){e.apply(this,arguments),this.children=[]}return __extends(n,e),n.prototype.setMaxWidth=function(t,e){return this.doc.def.setMaxWidth(e,this.doc.assets,t)},n.prototype.layout=function(e,n){var r=this.doc;return r.def.layout(n,r.assets,e,this.walkText()),new t.Size(r.assets.actualWidth,r.assets.actualHeight)},n.prototype.render=function(t,e){var n=this.doc;n.def.render(t,e,n.assets)},n.prototype.setAvailableWidth=function(t){this.doc.assets.availableWidth=t},n.prototype.getHorizontalOffset=function(t){var e=this.doc;return e.def.getHorizontalAlignmentX(t,e.assets,e.assets.actualWidth)},n.prototype.getCaretRegion=function(t){var e=this.doc;return e.def.getCaretFromCursor(t,e.assets)},n.prototype.clearText=function(){this.children.length=0},n.prototype.walkText=function(){var t=-1,e=this.children;return{current:void 0,step:function(){return t++,this.current=e[t],void 0!==this.current}}},n.prototype.onTextAttached=function(t,e){null==e||0>e||e>=this.children.length?this.children.push(t):this.children.splice(e,0,t)},n.prototype.onTextDetached=function(t){var e=this.children.indexOf(t);e>-1&&this.children.splice(e,1)},n}(t.core.UpdaterTree);e.TextBoxViewUpdaterTree=n}(n=e.textboxview||(e.textboxview={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(n){var r=function(e){function r(){e.apply(this,arguments)}return __extends(r,e),r.prototype.init=function(){this.setMeasurePipe(t.singleton(n.measure.UserControlMeasurePipeDef)).setArrangePipe(t.singleton(n.arrange.UserControlArrangePipeDef)).setProcessDownPipe(t.singleton(n.processdown.UserControlProcessDownPipeDef));var r=this.assets;r.breakLayoutClip=!0,r.padding=new t.Thickness,r.borderThickness=new t.Thickness,e.prototype.init.call(this)},r}(e.control.ControlUpdater);n.UserControlUpdater=r}(n=e.usercontrol||(e.usercontrol={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(e){var n=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.onSurfaceChanged=function(t,e){t&&t.unhookPrerender(this),e&&e.hookPrerender(this)},e.prototype.preRender=function(){var t=this.assets;t.source&&t.source.getIsPlaying()&&this.invalidate()},e}(t.image.ImageUpdater);e.VideoUpdater=n}(e=t.video||(t.video={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(e){var n=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),n.prototype.init=function(){this.setTree(new e.VirtualizingPanelUpdaterTree),t.prototype.init.call(this)},n}(t.panel.PanelUpdater);e.VirtualizingPanelUpdater=n}(e=t.virtualizingpanel||(t.virtualizingpanel={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(e){e.NO_CONTAINER_OWNER={itemCount:0,createGenerator:function(){return{current:void 0,generate:function(){return!1}}},remove:function(t,e){}};var n=function(t){function n(){t.apply(this,arguments),this.containerOwner=e.NO_CONTAINER_OWNER}return __extends(n,t),n}(t.panel.PanelUpdaterTree);e.VirtualizingPanelUpdaterTree=n}(e=t.virtualizingpanel||(t.virtualizingpanel={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(n){var r=function(e){function r(){e.apply(this,arguments)}return __extends(r,e),r.prototype.init=function(){this.setMeasurePipe(t.singleton(n.measure.VirtualizingStackPanelMeasurePipeDef)).setArrangePipe(t.singleton(n.arrange.VirtualizingStackPanelArrangePipeDef));var r=this.assets;r.orientation=t.Orientation.Vertical,r.scrollData={canHorizontallyScroll:!1,canVerticallyScroll:!1,offsetX:0,offsetY:0,cachedOffsetX:0,cachedOffsetY:0,viewportWidth:0,viewportHeight:0,extentWidth:0,extentHeight:0,maxDesiredWidth:0,maxDesiredHeight:0,invalidate:function(){}},e.prototype.init.call(this)},r}(e.virtualizingpanel.VirtualizingPanelUpdater);n.VirtualizingStackPanelUpdater=r}(n=e.virtualizingstackpanel||(e.virtualizingstackpanel={}))}(e=t.controls||(t.controls={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){function n(t,e,n,a,o,s){function c(){T||(u=t+n*Math.cos(a),l=e+n*Math.sin(a),h=t+n*Math.cos(o),p=e+n*Math.sin(o),f=t-n,g=r(u,l,h,p,f,e,s),d=t+n,y=r(u,l,h,p,d,e,s),v=e-n,x=r(u,l,h,p,t,v,s),m=e+n,w=r(u,l,h,p,t,m,s),T=!0)}var u,l,h,p,f,d,v,m,g,y,x,w,T=!1;return{sx:null,sy:null,isSingle:!0,x:t,y:e,ex:t,ey:e,radius:n,sAngle:a,eAngle:o,aClockwise:s,draw:function(r){r.arc(t,e,n,a,o,s)},extendFillBox:function(t){o!==a&&(c(),this.ex=h,this.ey=p,t.l=Math.min(t.l,u,h),t.r=Math.max(t.r,u,h),t.t=Math.min(t.t,l,p),t.b=Math.max(t.b,l,p),g&&(t.l=Math.min(t.l,f)),y&&(t.r=Math.max(t.r,d)),x&&(t.t=Math.min(t.t,v)),w&&(t.b=Math.max(t.b,m)))},extendStrokeBox:function(t,e){if(o!==a){c(),this.ex=h,this.ey=p,t.l=Math.min(t.l,u,h),t.r=Math.max(t.r,u,h),t.t=Math.min(t.t,l,p),t.b=Math.max(t.b,l,p);var n=e.strokeThickness/2;g&&(t.l=Math.min(t.l,f-n)),y&&(t.r=Math.max(t.r,d+n)),x&&(t.t=Math.min(t.t,v-n)),w&&(t.b=Math.max(t.b,m+n));var r=e.strokeStartLineCap||e.strokeEndLineCap||0,s=this.getStartVector();s[0]=-s[0],s[1]=-s[1];var T=i(u,l,e.strokeThickness,r,s),S=this.getEndVector(),M=i(h,p,e.strokeThickness,r,S);t.l=Math.min(t.l,T.x1,T.x2,M.x1,M.x2),t.r=Math.max(t.r,T.x1,T.x2,M.x1,M.x2),t.t=Math.min(t.t,T.y1,T.y2,M.y1,M.y2),t.b=Math.max(t.b,T.y1,T.y2,M.y1,M.y2)}},toString:function(){return""},getStartVector:function(){var n=[u-t,l-e];return s?[n[1],-n[0]]:[-n[1],n[0]]},getEndVector:function(){var n=[h-t,p-e];return s?[n[1],-n[0]]:[-n[1],n[0]]}}}function r(t,e,n,r,i,a,o){var s=(n-t)*(a-e)-(i-t)*(r-e);return 0===s?!0:s>0&&o?!0:0>s&&!o?!0:!1}function i(e,n,r,i,s){var c=r/2;switch(i){case t.PenLineCap.Round:return{x1:e-c,x2:e+c,y1:n-c,y2:n+c};case t.PenLineCap.Square:var u=a(s),l=o(u);return{x1:e+c*(u[0]+l[0]),x2:e+c*(u[0]-l[0]),y1:n+c*(u[1]+l[1]),y2:n+c*(u[1]-l[1])};case t.PenLineCap.Flat:default:var u=a(s),l=o(u);return{x1:e+c*l[0],x2:e+c*-l[0],y1:n+c*l[1],y2:n+c*-l[1]}}}function a(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]);return[t[0]/e,t[1]/e]}function o(t){return[-t[1],t[0]]}e.arc=n}(n=e.segments||(e.segments={}))}(e=t.path||(t.path={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){function n(n,a,o,s,c){function u(u,f){if(!p){if(l&&h)return h;var d=[n-u,a-f],v=[o-n,s-a],m=Math.PI-t.Vector.angleBetween(d,v),g=r(m,c,[u,f],d,!0),y=r(m,c,[n,a],v,!1),x=i(g,d,y,v),w=!t.Vector.isClockwiseTo(d,v),T=Math.atan2(g[1]-x[1],g[0]-x[0]);0>T&&(T=2*Math.PI+T);var S=Math.atan2(y[1]-x[1],y[0]-x[0]);0>S&&(S=2*Math.PI+S),l=e.line(g[0],g[1]),l.sx=u,l.sy=f,h=e.arc(x[0],x[1],c,T,S,w),p=!0}}var l,h,p=!1;return{sx:null,sy:null,isSingle:!1,cpx:n,cpy:a,x:o,y:s,ex:o,ey:s,radius:c,draw:function(t){t.arcTo(n,a,o,s,c)},extendFillBox:function(t){u(this.sx,this.sy),this.ex=h.ex,this.ey=h.ey,t.l=Math.min(t.l,this.sx),t.r=Math.max(t.r,this.sx),t.t=Math.min(t.t,this.sy),t.b=Math.max(t.b,this.sy),l.extendFillBox(t),h.extendFillBox(t)},extendStrokeBox:function(t,e){u(this.sx,this.sy),this.ex=h.ex,this.ey=h.ey;var n=e.strokeThickness/2;t.l=Math.min(t.l,this.sx-n),t.r=Math.max(t.r,this.sx+n),t.t=Math.min(t.t,this.sy-n),t.b=Math.max(t.b,this.sy+n),l.extendStrokeBox(t,e),h.extendStrokeBox(t,e)},toString:function(){return""},getStartVector:function(){return u(this.sx,this.sy),l.getStartVector()},getEndVector:function(){return h.getEndVector()}}}function r(t,e,n,r,i){var a=Math.sqrt(r[0]*r[0]+r[1]*r[1]),o=e/Math.tan(t/2),s=o/a;return i&&(s=1-s),[n[0]+s*r[0],n[1]+s*r[1]]}function i(e,n,r,i){return t.Vector.intersection(e,t.Vector.orthogonal(n.slice(0)),r,t.Vector.orthogonal(i.slice(0)))}e.arcTo=n}(n=e.segments||(e.segments={}))}(e=t.path||(t.path={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){function e(){return{sx:null,sy:null,ex:null,ey:null,isSingle:!1,isClose:!0,draw:function(t){t.closePath()},extendFillBox:function(t){},extendStrokeBox:function(t,e){},toString:function(){return"Z"},getStartVector:function(){return null},getEndVector:function(){return null}}}t.close=e}(e=t.segments||(t.segments={}))}(e=t.path||(t.path={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){function e(t,e,r,i,a,o){return{sx:null,sy:null,ex:a,ey:o,isSingle:!1,cp1x:t,cp1y:e,cp2x:r,cp2y:i,x:a,y:o,draw:function(n){n.bezierCurveTo(t,e,r,i,a,o)},extendFillBox:function(s){var c=n(this.sx,t,r,a,this.sy,e,i,o);null!=c.x[0]&&(s.l=Math.min(s.l,c.x[0]),s.r=Math.max(s.r,c.x[0])),null!=c.x[1]&&(s.l=Math.min(s.l,c.x[1]),s.r=Math.max(s.r,c.x[1])),null!=c.y[0]&&(s.t=Math.min(s.t,c.y[0]),s.b=Math.max(s.b,c.y[0])),null!=c.y[1]&&(s.t=Math.min(s.t,c.y[1]),s.b=Math.max(s.b,c.y[1])),s.l=Math.min(s.l,a),s.r=Math.max(s.r,a),s.t=Math.min(s.t,o),s.b=Math.max(s.b,o)},extendStrokeBox:function(s,c){var u=c.strokeThickness/2,l=n(this.sx,t,r,a,this.sy,e,i,o);null!=l.x[0]&&(s.l=Math.min(s.l,l.x[0]-u),s.r=Math.max(s.r,l.x[0]+u)),null!=l.x[1]&&(s.l=Math.min(s.l,l.x[1]-u),s.r=Math.max(s.r,l.x[1]+u)),null!=l.y[0]&&(s.t=Math.min(s.t,l.y[0]-u),s.b=Math.max(s.b,l.y[0]+u)),null!=l.y[1]&&(s.t=Math.min(s.t,l.y[1]-u),s.b=Math.max(s.b,l.y[1]+u)),s.l=Math.min(s.l,a),s.r=Math.max(s.r,a),s.t=Math.min(s.t,o),s.b=Math.max(s.b,o)},toString:function(){return"C"+t.toString()+","+e.toString()+" "+r.toString()+","+i.toString()+" "+a.toString()+","+o.toString()},getStartVector:function(){return[3*(t-this.sx),3*(e-this.sy)]},getEndVector:function(){return[3*(a-r),3*(o-i)]}}}function n(t,e,n,i,a,o,s,c){return{x:r(t,e,n,i),y:r(a,o,s,c)}}function r(t,e,n,r){var i=2*t-4*e+2*n,a=e-t,o=-t+3*e+r-3*n,s=Math.sqrt(i*i-4*a*o),c=[null,null];if(isNaN(s))return c;var u,l;return u=(-i+s)/(2*o),u>=0&&1>=u&&(l=1-u,c[0]=t*l*l*l+3*e*u*l*l+3*n*l*u*u+r*u*u*u),u=(-i-s)/(2*o),u>=0&&1>=u&&(l=1-u,c[1]=t*l*l*l+3*e*u*l*l+3*n*l*u*u+r*u*u*u),c}t.cubicBezier=e}(e=t.segments||(t.segments={}))}(e=t.path||(t.path={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){function e(t,e,n,r){var i=n/2,a=r/2,o=t+n,s=e+r,c=t+i,u=e+a;return{sx:null,sy:null,ex:t,ey:e,isSingle:!0,x:t,y:e,width:n,height:r,draw:function(l){if(l.beginPath(),n===r)return void l.arc(c,u,i,0,2*Math.PI,!1);var h=.5522848,p=i*h,f=a*h;l.moveTo(t,u),l.bezierCurveTo(t,u-f,c-p,e,c,e),l.bezierCurveTo(c+p,e,o,u-f,o,u),l.bezierCurveTo(o,u+f,c+p,s,c,s),l.bezierCurveTo(c-p,s,t,u+f,t,u),l.closePath()},extendFillBox:function(i){i.l=Math.min(i.l,t),i.r=Math.max(i.r,t+n),i.t=Math.min(i.t,e),i.b=Math.max(i.b,e+r)},extendStrokeBox:function(i,a){var o=a.strokeThickness/2;i.l=Math.min(i.l,t-o),i.r=Math.max(i.r,t+n+o),i.t=Math.min(i.t,e-o),i.b=Math.max(i.b,e+r+o)},getStartVector:function(){return null},getEndVector:function(){return null}}}t.ellipse=e}(e=t.segments||(t.segments={}))}(e=t.path||(t.path={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){function n(t,e,n,i,a,o,s){return{sx:null,sy:null,isSingle:!1,rx:t,ry:e,rotationAngle:n,isLargeArcFlag:i,sweepDirectionFlag:a,ex:o,ey:s,sub:null,draw:function(t){this.sub=this.sub||r(this);for(var e=0,n=this.sub,i=n.length;i>e;e++)n[e].draw(t)},extendFillBox:function(t){this.sub=this.sub||r(this);for(var e=0,n=this.sub,i=n.length;i>e;e++)n[e].extendFillBox(t)},extendStrokeBox:function(t,e){this.sub=this.sub||r(this);for(var n=0,i=this.sub,a=i.length;a>n;n++)i[n].extendStrokeBox(t,e)},toString:function(){return"A"+t.toString()+","+e.toString()+" "+n.toString()+" "+i.toString()+" "+a.toString()+" "+o.toString()+","+s.toString()},getStartVector:function(){this.sub=this.sub||r(this);var t=this.sub[0];return t?t.getStartVector():[0,0]},getEndVector:function(){this.sub=this.sub||r(this);var t=this.sub[this.sub.length-1];return t?t.getEndVector():[0,0]}}}function r(n){var r=[],s=n.sx,c=n.sy,u=n.ex,l=n.ey,h=n.rx,p=n.ry;if(Math.abs(u-s)<i&&Math.abs(l-c)<i)return r;if(Math.abs(h)<a||Math.abs(p)<a)return r.push(e.line(u,l)),r;if(Math.abs(h)<o||Math.abs(p)<o)return r;h=Math.abs(h),p=Math.abs(p);var f=n.rotationAngle*Math.PI/180,d=Math.cos(f),v=Math.sin(f),m=(s-u)/2,g=(c-l)/2,y=d*m+v*g,x=d*g-v*m,w=y*y,T=x*x,S=h*h,M=p*p,b=w/S+T/M;if(b>1){var P=Math.sqrt(b);h*=P,p*=P,S=h*h,M=p*p}var R,D,z,$,C=S*M-S*T-M*w,F=n.isLargeArcFlag===!0,O=n.sweepDirectionFlag===t.SweepDirection.Clockwise;if(0>C){var I=Math.sqrt(1-C/(S*M));h*=I,p*=I,S=h*h,M=p*p,R=0,D=0,z=0,$=0}else C=Math.sqrt(C/(S*T+M*w)),F===O&&(C=-C),R=C*(h*x/p),D=C*(-p*y/h),z=d*R-v*D,$=v*R+d*D;z+=(s+u)/2,$+=(c+l)/2;var k=Math.atan2((x-D)/p,(y-R)/h),A=0>k?2*Math.PI+k:k,B=Math.atan2((-x-D)/p,(-y-R)/h),N=k>B?2*Math.PI-k+B:B-k;O?0>N&&(N+=2*Math.PI):N>0&&(N-=2*Math.PI);for(var U=Math.floor(Math.abs(N/(Math.PI/2)))+1,V=N/U,H=4/3*(1-Math.cos(V/2))/Math.sin(V/2),L=d*h,E=d*p,_=v*h,W=v*p,X=Math.cos(A),Y=Math.sin(A),G=0;U>G;++G){var q=A+V,Z=Math.cos(q),j=Math.sin(q),J=s-H*(L*Y+W*X),Q=c+H*(E*X-_*Y),K=z+(L*Z-W*j),tt=$+(_*Z+E*j),et=K+H*(L*j+W*Z),nt=tt+H*(_*j-E*Z);r.push(e.cubicBezier(J,Q,et,nt,K,tt)),s=K,c=tt,A=q,X=Z,Y=j}return r}e.ellipticalArc=n;var i=2e-6,a=19e-6,o=117e-6}(n=e.segments||(e.segments={}))}(e=t.path||(t.path={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){function e(t,e){return{isSingle:!1,sx:null,sy:null,x:t,y:e,ex:t,ey:e,draw:function(n){n.lineTo(t,e)},extendFillBox:function(n){n.l=Math.min(n.l,t),n.r=Math.max(n.r,t),n.t=Math.min(n.t,e),n.b=Math.max(n.b,e)},extendStrokeBox:function(t,e){this.extendFillBox(t)},toString:function(){return"L"+t.toString()+","+e.toString()},getStartVector:function(){return[t-this.sx,e-this.sy]},getEndVector:function(){return[t-this.sx,e-this.sy]}}}t.line=e}(e=t.segments||(t.segments={}))}(e=t.path||(t.path={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){function e(t,e){return{sx:null,sy:null,ex:t,ey:e,isSingle:!1,isMove:!0,x:t,y:e,draw:function(n){n.moveTo(t,e)},extendFillBox:function(n){n.l=Math.min(n.l,t),n.r=Math.max(n.r,t),n.t=Math.min(n.t,e),n.b=Math.max(n.b,e)},extendStrokeBox:function(t,e){this.extendFillBox(t)},toString:function(){return"M"+t.toString()+","+e.toString()},getStartVector:function(){return null},getEndVector:function(){return null}}}t.move=e}(e=t.segments||(t.segments={}))}(e=t.path||(t.path={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){function e(t,e,r,i){return{sx:null,sy:null,ex:r,ey:i,isSingle:!1,cpx:t,cpy:e,x:r,y:i,draw:function(n){n.quadraticCurveTo(t,e,r,i)},extendFillBox:function(a){var o=n(this.sx,t,r,this.sy,e,i);null!=o.x&&(a.l=Math.min(a.l,o.x),a.r=Math.max(a.r,o.x)),null!=o.y&&(a.t=Math.min(a.t,o.y),a.b=Math.max(a.b,o.y)),a.l=Math.min(a.l,r),a.r=Math.max(a.r,r),a.t=Math.min(a.t,i),a.b=Math.max(a.b,i)},extendStrokeBox:function(a,o){var s=o.strokeThickness/2,c=n(this.sx,t,r,this.sy,e,i);c.x&&(a.l=Math.min(a.l,c.x-s),a.r=Math.max(a.r,c.x+s)),c.y&&(a.t=Math.min(a.t,c.y-s),a.b=Math.max(a.b,c.y+s)),a.l=Math.min(a.l,r),a.r=Math.max(a.r,r),a.t=Math.min(a.t,i),a.b=Math.max(a.b,i)},toString:function(){return"Q"+t.toString()+","+e.toString()+" "+r.toString()+","+i.toString()},getStartVector:function(){return[2*(t-this.sx),2*(e-this.sy)]},getEndVector:function(){return[2*(r-t),2*(i-e)]}}}function n(t,e,n,i,a,o){return{x:r(t,e,n),y:r(i,a,o)}}function r(t,e,n){var r=(t-e)/(t-2*e+n);return 0>r||r>1?null:t*Math.pow(1-r,2)+2*e*(1-r)*r+n*Math.pow(r,2)}t.quadraticBezier=e}(e=t.segments||(t.segments={}))}(e=t.path||(t.path={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(t){function e(t,e,n,r){return{sx:null,sy:null,isSingle:!0,x:t,y:e,ex:t,ey:e,width:n,height:r,draw:function(i){i.rect(t,e,n,r)},extendFillBox:function(i){i.l=Math.min(i.l,t),i.r=Math.max(i.r,t+n),i.t=Math.min(i.t,e),i.b=Math.max(i.b,e+r)},extendStrokeBox:function(i,a){var o=a.strokeThickness/2;i.l=Math.min(i.l,t-o),i.r=Math.max(i.r,t+n+o),i.t=Math.min(i.t,e-o),i.b=Math.max(i.b,e+r+o)},getStartVector:function(){return null},getEndVector:function(){return null}}}t.rect=e}(e=t.segments||(t.segments={}))}(e=t.path||(t.path={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){function n(n,r,i,a,o,s){return 0===o&&0===s?e.rect(n,r,i,a):{sx:null,sy:null,ex:n,ey:r,isSingle:!0,x:n,y:r,width:i,height:a,radiusX:o,radiusY:s,draw:function(e){t.shapes.rectangle.helpers.draw(e,n,r,i,a,o,s)},extendFillBox:function(t){t.l=Math.min(t.l,n),t.r=Math.max(t.r,n+i),t.t=Math.min(t.t,r),t.b=Math.max(t.b,r+a)},extendStrokeBox:function(t,e){var o=e.strokeThickness/2;t.l=Math.min(t.l,n-o),t.r=Math.max(t.r,n+i+o),t.t=Math.min(t.t,r-o),t.b=Math.max(t.b,r+a+o)},getStartVector:function(){return null},getEndVector:function(){return null}}}e.roundedRect=n}(n=e.segments||(e.segments={}))}(e=t.path||(t.path={}))}(minerva||(minerva={})),CanvasRenderingContext2D.prototype.hasOwnProperty("backingStorePixelRatio")||Object.defineProperty(CanvasRenderingContext2D.prototype,"backingStorePixelRatio",{get:function(){var t=this;return t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||1}}),CanvasRenderingContext2D.prototype.ellipse||(CanvasRenderingContext2D.prototype.ellipse=function(t,e,n,r,i,a,o,s){this.save(),this.translate(t,e),this.rotate(i),this.scale(n,r),this.arc(0,0,1,a,o,s),this.restore()}),CanvasRenderingContext2D.prototype.isPointInStroke||(CanvasRenderingContext2D.prototype.isPointInStroke=function(t,e){return!1});var minerva;!function(t){var e;!function(e){var n;!function(e){var n=function(n){function r(){n.apply(this,arguments)}return __extends(r,n),r.prototype.init=function(){this.setMeasurePipe(t.singleton(e.measure.ShapeMeasurePipeDef)).setArrangePipe(t.singleton(e.arrange.ShapeArrangePipeDef)).setRenderPipe(t.singleton(e.render.ShapeRenderPipeDef)).setProcessUpPipe(t.singleton(e.processup.ShapeProcessUpPipeDef)).setHitTestPipe(t.singleton(e.hittest.ShapeHitTestPipeDef));var r=this.assets;r.naturalBounds=new t.Rect,r.shapeFlags=t.ShapeFlags.None,r.shapeRect=new t.Rect,r.fill=null,r.stretch=t.Stretch.None,r.stroke=null,r.strokeThickness=1,r.strokeDashArray=[],r.strokeDashCap=t.PenLineCap.Flat,r.strokeDashOffset=0,r.strokeStartLineCap=t.PenLineCap.Flat,r.strokeEndLineCap=t.PenLineCap.Flat,r.strokeLineJoin=t.PenLineJoin.Miter,r.strokeMiterLimit=10,n.prototype.init.call(this)},r.prototype.invalidateNaturalBounds=function(){var t=this.assets.naturalBounds;t.x=t.y=t.width=t.height=0,this.invalidateMeasure(),this.updateBounds(!0)},r}(t.core.Updater);e.ShapeUpdater=n}(n=e.shape||(e.shape={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(n){var r=function(e){function r(){e.apply(this,arguments)}return __extends(r,e),r.prototype.init=function(){this.setMeasurePipe(t.singleton(n.measure.EllipseMeasurePipeDef)).setRenderPipe(t.singleton(n.render.EllipseRenderPipeDef)).setHitTestPipe(t.singleton(n.hittest.EllipseHitTestPipeDef));var r=this.assets;r.stretch=t.Stretch.Fill,e.prototype.init.call(this)},r}(e.shape.ShapeUpdater);n.EllipseUpdater=r}(n=e.ellipse||(e.ellipse={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(n){var r=function(e){function r(){e.apply(this,arguments)}return __extends(r,e),r.prototype.init=function(){this.setMeasurePipe(t.singleton(n.measure.PathMeasurePipeDef)).setProcessUpPipe(t.singleton(n.processup.PathProcessUpPipeDef)).setRenderPipe(t.singleton(n.render.PathRenderPipeDef)).setHitTestPipe(t.singleton(n.hittest.PathHitTestPipeDef));var r=this.assets;r.stretch=t.Stretch.None,r.stretchXform=t.mat3.identity(),e.prototype.init.call(this)},r}(e.shape.ShapeUpdater);n.PathUpdater=r}(n=e.path||(e.path={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(n){var r=function(r){function i(){r.apply(this,arguments)}return __extends(i,r),i.prototype.init=function(){this.setMeasurePipe(t.singleton(n.measure.LineMeasurePipeDef));var i=this.assets;i.x1=0,i.y1=0,i.x2=0,i.y2=0,i.data=new e.path.AnonPathGeometry,r.prototype.init.call(this)},i.prototype.invalidatePath=function(){this.assets.data.old=!0,this.invalidateNaturalBounds()},i}(e.path.PathUpdater);n.LineUpdater=r}(n=e.line||(e.line={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n=function(){function e(){this.old=!0,this.path=new t.path.Path,this.fillRule=t.FillRule.EvenOdd}return e.prototype.Draw=function(t){this.path.draw(t.raw)},e.prototype.GetBounds=function(t){return this.path.calcBounds(t)},e}();e.AnonPathGeometry=n}(n=e.path||(e.path={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(n){var r=function(r){function i(){r.apply(this,arguments)}return __extends(i,r),i.prototype.init=function(){this.setMeasurePipe(t.singleton(n.measure.PolylineMeasurePipeDef));var i=this.assets;i.data=new e.path.AnonPathGeometry,i.isClosed=!1,r.prototype.init.call(this)},i.prototype.invalidateFillRule=function(){this.assets.data.fillRule=this.assets.fillRule,this.invalidate()},i.prototype.invalidatePath=function(){this.assets.data.old=!0,this.invalidateNaturalBounds()},i}(e.path.PathUpdater);n.PolylineUpdater=r}(n=e.polyline||(e.polyline={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(t){var e;!function(e){var n=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.assets.isClosed=!0},e}(t.polyline.PolylineUpdater);e.PolygonUpdater=n}(e=t.polygon||(t.polygon={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(n){var r=function(e){function r(){e.apply(this,arguments)}return __extends(r,e),r.prototype.init=function(){this.setMeasurePipe(t.singleton(n.measure.RectangleMeasurePipeDef)).setRenderPipe(t.singleton(n.render.RectangleRenderPipeDef)).setHitTestPipe(t.singleton(n.hittest.RectangleHitTestPipeDef));var r=this.assets;r.stretch=t.Stretch.Fill,r.radiusX=0,r.radiusY=0,e.prototype.init.call(this)},r}(e.shape.ShapeUpdater);n.RectangleUpdater=r}(n=e.rectangle||(e.rectangle={}))}(e=t.shapes||(t.shapes={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n=/firefox/i.test(navigator.userAgent),r=function(){function e(){this.isSelected=!1,this.text=null,this.width=0}return e.render=function(r,i,a){var o=i.font.getHeight(),s=new t.Rect(0,0,r.width,o),c=a.raw,u=r.isSelected?i.selectionBackground||e.DEFAULT_SELECTION_BG:i.background;u&&(c.beginPath(),c.rect(s.x,s.y,s.width,s.height),a.fillEx(u,s));var l=r.isSelected?i.selectionForeground||e.DEFAULT_SELECTION_FG:i.foreground,h="#000000";l&&(l.setupBrush(c,s),h=l.toHtml5Object()),c.fillStyle=h,c.font=i.font.toHtml5Object(),c.textAlign="left",n?(c.textBaseline="bottom",c.fillText(r.text,0,o)):(c.textBaseline="top",c.fillText(r.text,0,0)),i.isUnderlined&&(c.beginPath(),c.moveTo(0,o),c.lineTo(r.width,o),c.lineWidth=2,c.strokeStyle=h,c.stroke())},e.DEFAULT_SELECTION_BG=new t.FakeBrush("#444444"),e.DEFAULT_SELECTION_FG=new t.FakeBrush("#FFFFFF"),e}();e.Cluster=r}(n=e.layout||(e.layout={}))}(e=t.text||(t.text={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){var n=function(){function n(){this.runs=[],this.width=0,this.height=0}return n.getLineFromY=function(t,e){for(var n,r=0,i=0;r<t.length;r++)if(n=t[r],i+=n.height,i>e)return n;return t[t.length-1]},n.elliptify=function(n,r,i,a){if(n.textTrimming===t.TextTrimming.None||n.textWrapping!==t.TextWrapping.NoWrap||i.width<=r.maxWidth)return!1;for(var o=[],s=i.runs,c=0,u=0;u<s.length;u++){var l=s[u];if(c+=l.width,o.push(l),c>=r.maxWidth){c-=l.width,e.Run.elliptify(l,r.maxWidth-c,n.textTrimming,a),i.width=c+l.width;break}}return i.runs=o,!0},n}();e.Line=n}(n=e.layout||(e.layout={}))}(e=t.text||(t.text={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(e){function n(t,e,n){if(e>0){for(var r=t.text.length,i=0,a=0;(i=a)<r&&-1!==(a=t.text.indexOf(" ",i+1));)if(n(a)>e){t.text=t.text.substr(0,i);break}if(r===t.text.length)return}else t.text="";t.text+="...",t.length=t.text.length,t.width=n(t.length)}function r(t,e,n){if(e>0){for(var r=t.text.length,i=0,a=r,o=Math.ceil(i+(a-i)/2),s=0;a-i>1&&1e3>s;o=Math.ceil(i+(a-i)/2),s++)n(o)>e?a=o:i=o;if(t.text=t.text.substr(0,i),r===t.text.length)return}else t.text="";t.text+="...",t.length=t.text.length,t.width=n(t.length)}var i=function(){function i(){this.text="",this.start=0,this.length=0,this.width=0}return i.splitSelection=function(t,n,r,i){t.pre=t.sel=t.post=null;var a=t.start,o=a+t.length,s=Math.min(t.length,Math.max(0,n-a));if(s>0){var c=t.pre=new e.Cluster;c.text=t.text.substr(0,s),c.width=i(c.text,t.attrs)}var u=Math.min(t.length,Math.max(0,o-r));if(u>0){var l=t.post=new e.Cluster;l.text=t.text.substr(t.length-u),l.width=i(l.text,t.attrs)}var h=Math.min(o,Math.max(a,n)),p=Math.max(a,Math.min(o,r)),f=Math.max(0,p-h);if(f>0){var d=t.sel=new e.Cluster;d.isSelected=!0,d.text=t.text.substr(h-a,f),d.width=i(d.text,t.attrs)}},i.elliptify=function(e,i,a,o){if(!(e.width<i)){var s=e.text,c=e.attrs.font,u=function(t){return o(s.substr(0,t),c)};a===t.TextTrimming.WordEllipsis?n(e,i-o("...",c),u):r(e,i-o("...",c),u)}},i}();e.Run=i}(n=e.layout||(e.layout={}))}(e=t.text||(t.text={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(n){var r=function(){function r(){}return r.prototype.layout=function(r,i,a){var o=a.text;if(!o){var s=new e.layout.Line;s.height=a.font.getHeight(),i.lines.push(s);var c=new e.layout.Run;return c.attrs=a,s.runs.push(c),i.actualHeight=s.height,!1}return r.textWrapping===t.TextWrapping.NoWrap?n.doLayoutNoWrap(r,i,a):n.doLayoutWrap(r,i,a),i.selCached=!1,!0},r}();n.RunLayoutDef=r}(n=e.run||(e.run={}))}(e=t.text||(t.text={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(n){function r(t,n,r){var o={text:r.text,index:0,max:r.text.length},s=r.font,c=new e.layout.Line;c.height=s.getHeight(),n.actualHeight+=c.height,n.lines.push(c);var u=new e.layout.Run;for(u.attrs=r,c.runs.push(u);o.index<o.max;){var l=i(u,o,s);l&&(n.actualWidth=Math.max(n.actualWidth,u.width),c.width=u.width,c=new e.layout.Line,c.height=s.getHeight(),n.actualHeight+=c.height,n.lines.push(c),u=new e.layout.Run,u.attrs=r,c.runs.push(u))}c.width=u.width,e.layout.Line.elliptify(t,n,c,a),n.actualWidth=Math.max(n.actualWidth,u.width)}function i(t,e,n){var r=e.text.substr(e.index),i=r.indexOf("\r"),o=r.indexOf("\n");return 0>i&&0>o?(t.length=r.length,t.text=r,t.width=a(t.text,n),e.index+=t.length,!1):i>-1&&i+1===o?(t.length=o+1,t.text=r.substr(0,t.length),t.width=a(t.text,n),e.index+=t.length,!0):i>-1&&o>i?(t.length=i+1,t.text=r.substr(0,t.length),t.width=a(t.text,n),e.index+=t.length,!0):(t.length=o+1,t.text=r.substr(0,t.length),t.width=a(t.text,n),e.index+=t.length,!0)}function a(e,n){return t.engine.Surface.measureWidth(e,n)}n.doLayoutNoWrap=r}(n=e.run||(e.run={}))}(e=t.text||(t.text={}))}(minerva||(minerva={}));var minerva;!function(t){var e;!function(e){var n;!function(n){function r(t,n,r){var o={text:r.text,index:0,max:r.text.length},s=r.font,c=new e.layout.Line;c.height=s.getHeight(),n.actualHeight+=c.height,n.lines.push(c);var u=new e.layout.Run;for(u.attrs=r,c.runs.push(u);o.index<o.max;){var l=isFinite(n.maxWidth)?a(u,o,s,n.maxWidth):i(u,o,s);l&&(n.actualWidth=Math.max(n.actualWidth,u.width),c.width=u.width,c=new e.layout.Line,c.height=s.getHeight(),n.actualHeight+=c.height,n.lines.push(c),u=new e.layout.Run,u.attrs=r,c.runs.push(u))}c.width=u.width,n.actualWidth=Math.max(n.actualWidth,u.width)}function i(t,e,n){var r=e.text.substr(e.index),i=r.indexOf("\r"),a=r.indexOf("\n");return 0>i&&0>a?(t.length=r.length,t.text=r,t.width=o(t.text,n),e.index+=t.length,!1):i>-1&&i+1===a?(t.length=a+1,t.text=r.substr(0,t.length),t.width=o(t.text,n),e.index+=t.length,!0):i>-1&&a>i?(t.length=i+1,t.text=r.substr(0,t.length),t.width=o(t.text,n),e.index+=t.length,!0):(t.length=a+1,t.text=r.substr(0,t.length),t.width=o(t.text,n),e.index+=t.length,!0)}function a(t,e,n,r){for(var i,a=e.text,s=e.index,c=-1,u="",l=0;e.index<e.max;){if(i=a.charAt(e.index),u+=i,l=o(u,n),"\n"===i)return t.length=e.index-s+1,t.text=a.substr(s,t.length),t.width=o(t.text,n),e.index++,!0;if("\r"===i)return t.length=e.index-s+1,e.index++,"\n"===a.charAt(e.index)&&(t.length++,e.index++),t.text=a.substr(s,t.length),t.width=o(t.text,n),!0;if(l>r){var h=c>-1?c+1:e.index;return t.length=h-s||1,t.text=a.substr(s,t.length),t.width=o(t.text,n),e.index=s+t.length,e.index<e.max}" "===i&&(c=e.index),e.index++}return t.text=a.substr(s),t.length=t.text.length,t.width=o(t.text,n),!1}function o(e,n){return t.engine.Surface.measureWidth(e,n)}n.doLayoutWrap=r}(n=e.run||(e.run={}))}(e=t.text||(t.text={}))}(minerva||(minerva={}));
//# sourceMappingURL=minerva.min.js.map